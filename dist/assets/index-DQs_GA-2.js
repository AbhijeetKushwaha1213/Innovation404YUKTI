const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CompactResolvedShowcase-D1I3dTh9.js","assets/ui-vendor-Dv70Or3Y.js","assets/react-vendor-DV-ZlTgS.js","assets/supabase-vendor-DFQREE2C.js","assets/maps-vendor-tunuPykp.js"])))=>i.map(i=>d[i]);
var e,t,s,r,n,a,i,o,l,c,d,u,m,h,p,f,g,x,v,y,b,w,j,N,k,_,C,S,E,T,P,R,D,A,I,O,M,F,L,$,z=Object.defineProperty,U=Object.defineProperties,V=Object.getOwnPropertyDescriptors,B=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable,K=e=>{throw TypeError(e)},Z=Math.pow,H=(e,t,s)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,G=(e,t)=>{for(var s in t||(t={}))W.call(t,s)&&H(e,s,t[s]);if(B)for(var s of B(t))q.call(t,s)&&H(e,s,t[s]);return e},Y=(e,t)=>U(e,V(t)),Q=(e,t)=>{var s={};for(var r in e)W.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&B)for(var r of B(e))t.indexOf(r)<0&&q.call(e,r)&&(s[r]=e[r]);return s},X=(e,t,s)=>t.has(e)||K("Cannot "+s),J=(e,t,s)=>(X(e,t,"read from private field"),s?s.call(e):t.get(e)),ee=(e,t,s)=>t.has(e)?K("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),te=(e,t,s,r)=>(X(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),se=(e,t,s)=>(X(e,t,"access private method"),s),re=(e,t,s,r)=>({set _(r){te(e,t,r,s)},get _(){return J(e,t,r)}}),ne=(e,t,s)=>new Promise((r,n)=>{var a=e=>{try{o(s.next(e))}catch(t){n(t)}},i=e=>{try{o(s.throw(e))}catch(t){n(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,i);o((s=s.apply(e,t)).next())});import{j as ae,X as ie,M as oe,C as le,a as ce,N as de,U as ue,S as me,b as he,L as pe,A as fe,G as ge,m as xe,c as ve,W as ye,d as be,F as we,e as je,f as Ne,g as ke,B as _e,h as Ce,i as Se,k as Ee,l as Te,T as Pe,n as Re,o as De,p as Ae,q as Ie,r as Oe,s as Me,t as Fe,u as Le,P as $e,E as ze,v as Ue,I as Ve,w as Be,x as We,y as qe,z as Ke,D as Ze,H as He,J as Ge,K as Ye,O as Qe,Q as Xe,R as Je,V as et,Y as tt,Z as st,_ as rt,$ as nt,a0 as at,a1 as it,a2 as ot,a3 as lt,a4 as ct,a5 as dt,a6 as ut,a7 as mt,a8 as ht,a9 as pt,aa as ft,ab as gt,ac as xt,ad as vt,ae as yt}from"./ui-vendor-Dv70Or3Y.js";import{a as bt,r as wt,R as jt,d as Nt,e as kt,u as _t,f as Ct,L as St,h as Et,B as Tt,i as Pt,j as Rt,N as Dt}from"./react-vendor-DV-ZlTgS.js";import{c as At,_ as It,a as Ot,b as Mt,d as Ft}from"./supabase-vendor-DFQREE2C.js";import{L as Lt,M as $t,T as zt,a as Ut,P as Vt}from"./maps-vendor-tunuPykp.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Bt=bt;$=Bt.createRoot,Bt.hydrateRoot;let Wt=0;const qt=new Map,Kt=e=>{if(qt.has(e))return;const t=setTimeout(()=>{qt.delete(e),Yt({type:"REMOVE_TOAST",toastId:e})},1e6);qt.set(e,t)},Zt=(e,t)=>{switch(t.type){case"ADD_TOAST":return Y(G({},e),{toasts:[t.toast,...e.toasts].slice(0,1)});case"UPDATE_TOAST":return Y(G({},e),{toasts:e.toasts.map(e=>e.id===t.toast.id?G(G({},e),t.toast):e)});case"DISMISS_TOAST":{const{toastId:s}=t;return s?Kt(s):e.toasts.forEach(e=>{Kt(e.id)}),Y(G({},e),{toasts:e.toasts.map(e=>e.id===s||void 0===s?Y(G({},e),{open:!1}):e)})}case"REMOVE_TOAST":return void 0===t.toastId?Y(G({},e),{toasts:[]}):Y(G({},e),{toasts:e.toasts.filter(e=>e.id!==t.toastId)})}},Ht=[];let Gt={toasts:[]};function Yt(e){Gt=Zt(Gt,e),Ht.forEach(e=>{e(Gt)})}function Qt(e){var t=Q(e,[]);const s=(Wt=(Wt+1)%Number.MAX_SAFE_INTEGER,Wt.toString()),r=()=>Yt({type:"DISMISS_TOAST",toastId:s});return Yt({type:"ADD_TOAST",toast:Y(G({},t),{id:s,open:!0,onOpenChange:e=>{e||r()}})}),{id:s,dismiss:r,update:e=>Yt({type:"UPDATE_TOAST",toast:Y(G({},e),{id:s})})}}function Xt(){const[e,t]=wt.useState(Gt);return wt.useEffect(()=>(Ht.push(t),()=>{const e=Ht.indexOf(t);e>-1&&Ht.splice(e,1)}),[e]),Y(G({},e),{toast:Qt,dismiss:e=>Yt({type:"DISMISS_TOAST",toastId:e})})}function Jt(e,t,{checkForDefaultPrevented:s=!0}={}){return function(r){if(null==e||e(r),!1===s||!r.defaultPrevented)return null==t?void 0:t(r)}}function es(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}function ts(...e){return wt.useCallback(es(...e),e)}function ss(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:s,scopeName:r})=>{const n=s(e)[`__scope${r}`];return G(G({},t),n)},{});return wt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}var rs=wt.forwardRef((e,t)=>{const s=e,{children:r}=s,n=Q(s,["children"]),a=wt.Children.toArray(r),i=a.find(is);if(i){const e=i.props.children,s=a.map(t=>t===i?wt.Children.count(e)>1?wt.Children.only(null):wt.isValidElement(e)?e.props.children:null:t);return ae.jsx(ns,Y(G({},n),{ref:t,children:wt.isValidElement(e)?wt.cloneElement(e,void 0,s):null}))}return ae.jsx(ns,Y(G({},n),{ref:t,children:r}))});rs.displayName="Slot";var ns=wt.forwardRef((e,t)=>{const s=e,{children:r}=s,n=Q(s,["children"]);if(wt.isValidElement(r)){const e=function(e){var t,s;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning;if(n)return e.ref;if(r=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(r);return wt.cloneElement(r,Y(G({},function(e,t){const s=G({},t);for(const r in t){const n=e[r],a=t[r];/^on[A-Z]/.test(r)?n&&a?s[r]=(...e)=>{a(...e),n(...e)}:n&&(s[r]=n):"style"===r?s[r]=G(G({},n),a):"className"===r&&(s[r]=[n,a].filter(Boolean).join(" "))}return G(G({},e),s)}(n,r.props)),{ref:t?es(t,e):e}))}return wt.Children.count(r)>1?wt.Children.only(null):null});ns.displayName="SlotClone";var as=({children:e})=>ae.jsx(ae.Fragment,{children:e});function is(e){return wt.isValidElement(e)&&e.type===as}function os(e){const t=e+"CollectionProvider",[s,r]=function(e,t=[]){let s=[];const r=()=>{const t=s.map(e=>wt.createContext(e));return function(s){const r=(null==s?void 0:s[e])||t;return wt.useMemo(()=>({[`__scope${e}`]:Y(G({},s),{[e]:r})}),[s,r])}};return r.scopeName=e,[function(t,r){const n=wt.createContext(r),a=s.length;function i(t){const s=t,{scope:r,children:i}=s,o=Q(s,["scope","children"]),l=(null==r?void 0:r[e][a])||n,c=wt.useMemo(()=>o,Object.values(o));return ae.jsx(l.Provider,{value:c,children:i})}return s=[...s,r],i.displayName=t+"Provider",[i,function(s,i){const o=(null==i?void 0:i[e][a])||n,l=wt.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${s}\` must be used within \`${t}\``)}]},ss(r,...t)]}(t),[n,a]=s(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{const{scope:t,children:s}=e,r=jt.useRef(null),a=jt.useRef(new Map).current;return ae.jsx(n,{scope:t,itemMap:a,collectionRef:r,children:s})};i.displayName=t;const o=e+"CollectionSlot",l=jt.forwardRef((e,t)=>{const{scope:s,children:r}=e,n=ts(t,a(o,s).collectionRef);return ae.jsx(rs,{ref:n,children:r})});l.displayName=o;const c=e+"CollectionItemSlot",d="data-radix-collection-item",u=jt.forwardRef((e,t)=>{const s=e,{scope:r,children:n}=s,i=Q(s,["scope","children"]),o=jt.useRef(null),l=ts(t,o),u=a(c,r);return jt.useEffect(()=>(u.itemMap.set(o,G({ref:o},i)),()=>{u.itemMap.delete(o)})),ae.jsx(rs,Y(G({},{[d]:""}),{ref:l,children:n}))});return u.displayName=c,[{Provider:i,Slot:l,ItemSlot:u},function(t){const s=a(e+"CollectionConsumer",t);return jt.useCallback(()=>{const e=s.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(s.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[s.collectionRef,s.itemMap])},r]}function ls(e,t=[]){let s=[];const r=()=>{const t=s.map(e=>wt.createContext(e));return function(s){const r=(null==s?void 0:s[e])||t;return wt.useMemo(()=>({[`__scope${e}`]:Y(G({},s),{[e]:r})}),[s,r])}};return r.scopeName=e,[function(t,r){const n=wt.createContext(r),a=s.length;s=[...s,r];const i=t=>{var s;const r=t,{scope:i,children:o}=r,l=Q(r,["scope","children"]),c=(null==(s=null==i?void 0:i[e])?void 0:s[a])||n,d=wt.useMemo(()=>l,Object.values(l));return ae.jsx(c.Provider,{value:d,children:o})};return i.displayName=t+"Provider",[i,function(s,i){var o;const l=(null==(o=null==i?void 0:i[e])?void 0:o[a])||n,c=wt.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${s}\` must be used within \`${t}\``)}]},cs(r,...t)]}function cs(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:s,scopeName:r})=>{const n=s(e)[`__scope${r}`];return G(G({},t),n)},{});return wt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}var ds=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const s=wt.forwardRef((e,s)=>{const r=e,{asChild:n}=r,a=Q(r,["asChild"]),i=n?rs:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),ae.jsx(i,Y(G({},a),{ref:s}))});return s.displayName=`Primitive.${t}`,Y(G({},e),{[t]:s})},{});function us(e,t){e&&bt.flushSync(()=>e.dispatchEvent(t))}function ms(e){const t=wt.useRef(e);return wt.useEffect(()=>{t.current=e}),wt.useMemo(()=>(...e)=>{var s;return null==(s=t.current)?void 0:s.call(t,...e)},[])}var hs,ps="dismissableLayer.update",fs="dismissableLayer.pointerDownOutside",gs="dismissableLayer.focusOutside",xs=wt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vs=wt.forwardRef((e,t)=>{var s;const r=e,{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c}=r,d=Q(r,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),u=wt.useContext(xs),[m,h]=wt.useState(null),p=null!=(s=null==m?void 0:m.ownerDocument)?s:null==globalThis?void 0:globalThis.document,[,f]=wt.useState({}),g=ts(t,e=>h(e)),x=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(v),b=m?x.indexOf(m):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,j=b>=y,N=function(e,t=(null==globalThis?void 0:globalThis.document)){const s=ms(e),r=wt.useRef(!1),n=wt.useRef(()=>{});return wt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){ws(fs,s,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",n.current),n.current=r,t.addEventListener("click",n.current,{once:!0})):r()}else t.removeEventListener("click",n.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",n.current)}},[t,s]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,s=[...u.branches].some(e=>e.contains(t));j&&!s&&(null==i||i(e),null==l||l(e),e.defaultPrevented||null==c||c())},p),k=function(e,t=(null==globalThis?void 0:globalThis.document)){const s=ms(e),r=wt.useRef(!1);return wt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){ws(gs,s,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...u.branches].some(e=>e.contains(t))||(null==o||o(e),null==l||l(e),e.defaultPrevented||null==c||c())},p);return function(e,t=(null==globalThis?void 0:globalThis.document)){const s=ms(e);wt.useEffect(()=>{const e=e=>{"Escape"===e.key&&s(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[s,t])}(e=>{b===u.layers.size-1&&(null==a||a(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},p),wt.useEffect(()=>{if(m)return n&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(hs=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),bs(),()=>{n&&1===u.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=hs)}},[m,p,n,u]),wt.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),bs())},[m,u]),wt.useEffect(()=>{const e=()=>f({});return document.addEventListener(ps,e),()=>document.removeEventListener(ps,e)},[]),ae.jsx(ds.div,Y(G({},d),{ref:g,style:G({pointerEvents:w?j?"auto":"none":void 0},e.style),onFocusCapture:Jt(e.onFocusCapture,k.onFocusCapture),onBlurCapture:Jt(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Jt(e.onPointerDownCapture,N.onPointerDownCapture)}))});vs.displayName="DismissableLayer";var ys=wt.forwardRef((e,t)=>{const s=wt.useContext(xs),r=wt.useRef(null),n=ts(t,r);return wt.useEffect(()=>{const e=r.current;if(e)return s.branches.add(e),()=>{s.branches.delete(e)}},[s.branches]),ae.jsx(ds.div,Y(G({},e),{ref:n}))});function bs(){const e=new CustomEvent(ps);document.dispatchEvent(e)}function ws(e,t,s,{discrete:r}){const n=s.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&n.addEventListener(e,t,{once:!0}),r?us(n,a):n.dispatchEvent(a)}ys.displayName="DismissableLayerBranch";var js=vs,Ns=ys,ks=Boolean(null==globalThis?void 0:globalThis.document)?wt.useLayoutEffect:()=>{},_s=wt.forwardRef((e,t)=>{var s;const r=e,{container:n}=r,a=Q(r,["container"]),[i,o]=wt.useState(!1);ks(()=>o(!0),[]);const l=n||i&&(null==(s=null==globalThis?void 0:globalThis.document)?void 0:s.body);return l?Nt.createPortal(ae.jsx(ds.div,Y(G({},a),{ref:t})),l):null});_s.displayName="Portal";var Cs=e=>{const{present:t,children:s}=e,r=function(e){const[t,s]=wt.useState(),r=wt.useRef({}),n=wt.useRef(e),a=wt.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return wt.useReducer((e,s)=>{const r=t[e][s];return null!=r?r:e},e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return wt.useEffect(()=>{const e=Ss(r.current);a.current="mounted"===o?e:"none"},[o]),ks(()=>{const t=r.current,s=n.current;if(s!==e){const r=a.current,i=Ss(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(s&&r!==i?"ANIMATION_OUT":"UNMOUNT")}n.current=e}},[e,l]),ks(()=>{var e;if(t){let s;const i=null!=(e=t.ownerDocument.defaultView)?e:window,o=e=>{const a=Ss(r.current).includes(e.animationName);if(e.target===t&&a&&(l("ANIMATION_END"),!n.current)){const e=t.style.animationFillMode;t.style.animationFillMode="forwards",s=i.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},c=e=>{e.target===t&&(a.current=Ss(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{i.clearTimeout(s),t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:wt.useCallback(e=>{e&&(r.current=getComputedStyle(e)),s(e)},[])}}(t),n="function"==typeof s?s({present:r.isPresent}):wt.Children.only(s),a=ts(r.ref,function(e){var t,s;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning;if(n)return e.ref;if(r=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n));return"function"==typeof s||r.isPresent?wt.cloneElement(n,{ref:a}):null};function Ss(e){return(null==e?void 0:e.animationName)||"none"}function Es({prop:e,defaultProp:t,onChange:s=()=>{}}){const[r,n]=function({defaultProp:e,onChange:t}){const s=wt.useState(e),[r]=s,n=wt.useRef(r),a=ms(t);return wt.useEffect(()=>{n.current!==r&&(a(r),n.current=r)},[r,n,a]),s}({defaultProp:t,onChange:s}),a=void 0!==e,i=a?e:r,o=ms(s);return[i,wt.useCallback(t=>{if(a){const s="function"==typeof t?t(e):t;s!==e&&o(s)}else n(t)},[a,e,n,o])]}Cs.displayName="Presence";var Ts=wt.forwardRef((e,t)=>ae.jsx(ds.span,Y(G({},e),{ref:t,style:G({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},e.style)})));Ts.displayName="VisuallyHidden";var Ps=Ts,Rs="ToastProvider",[Ds,As,Is]=os("Toast"),[Os,Ms]=ls("Toast",[Is]),[Fs,Ls]=Os(Rs),$s=e=>{const{__scopeToast:t,label:s="Notification",duration:r=5e3,swipeDirection:n="right",swipeThreshold:a=50,children:i}=e,[o,l]=wt.useState(null),[c,d]=wt.useState(0),u=wt.useRef(!1),m=wt.useRef(!1);return s.trim(),ae.jsx(Ds.Provider,{scope:t,children:ae.jsx(Fs,{scope:t,label:s,duration:r,swipeDirection:n,swipeThreshold:a,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:wt.useCallback(()=>d(e=>e+1),[]),onToastRemove:wt.useCallback(()=>d(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:u,isClosePausedRef:m,children:i})})};$s.displayName=Rs;var zs="ToastViewport",Us=["F8"],Vs="toast.viewportPause",Bs="toast.viewportResume",Ws=wt.forwardRef((e,t)=>{const s=e,{__scopeToast:r,hotkey:n=Us,label:a="Notifications ({hotkey})"}=s,i=Q(s,["__scopeToast","hotkey","label"]),o=Ls(zs,r),l=As(r),c=wt.useRef(null),d=wt.useRef(null),u=wt.useRef(null),m=wt.useRef(null),h=ts(t,m,o.onViewportChange),p=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),f=o.toastCount>0;wt.useEffect(()=>{const e=e=>{var t;0!==n.length&&n.every(t=>e[t]||e.code===t)&&(null==(t=m.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n]),wt.useEffect(()=>{const e=c.current,t=m.current;if(f&&e&&t){const s=()=>{if(!o.isClosePausedRef.current){const e=new CustomEvent(Vs);t.dispatchEvent(e),o.isClosePausedRef.current=!0}},r=()=>{if(o.isClosePausedRef.current){const e=new CustomEvent(Bs);t.dispatchEvent(e),o.isClosePausedRef.current=!1}},n=t=>{!e.contains(t.relatedTarget)&&r()},a=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",s),e.addEventListener("focusout",n),e.addEventListener("pointermove",s),e.addEventListener("pointerleave",a),window.addEventListener("blur",s),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",s),e.removeEventListener("focusout",n),e.removeEventListener("pointermove",s),e.removeEventListener("pointerleave",a),window.removeEventListener("blur",s),window.removeEventListener("focus",r)}}},[f,o.isClosePausedRef]);const g=wt.useCallback(({tabbingDirection:e})=>{const t=l().map(t=>{const s=t.ref.current,r=[s,...lr(s)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[l]);return wt.useEffect(()=>{const e=m.current;if(e){const t=t=>{var s,r,n;const a=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!a){const a=document.activeElement,i=t.shiftKey;if(t.target===e&&i)return void(null==(s=d.current)||s.focus());const o=g({tabbingDirection:i?"backwards":"forwards"}),l=o.findIndex(e=>e===a);cr(o.slice(l+1))?t.preventDefault():i?null==(r=d.current)||r.focus():null==(n=u.current)||n.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[l,g]),ae.jsxs(Ns,{ref:c,role:"region","aria-label":a.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:f?void 0:"none"},children:[f&&ae.jsx(Ks,{ref:d,onFocusFromOutsideViewport:()=>{cr(g({tabbingDirection:"forwards"}))}}),ae.jsx(Ds.Slot,{scope:r,children:ae.jsx(ds.ol,Y(G({tabIndex:-1},i),{ref:h}))}),f&&ae.jsx(Ks,{ref:u,onFocusFromOutsideViewport:()=>{cr(g({tabbingDirection:"backwards"}))}})]})});Ws.displayName=zs;var qs="ToastFocusProxy",Ks=wt.forwardRef((e,t)=>{const s=e,{__scopeToast:r,onFocusFromOutsideViewport:n}=s,a=Q(s,["__scopeToast","onFocusFromOutsideViewport"]),i=Ls(qs,r);return ae.jsx(Ts,Y(G({"aria-hidden":!0,tabIndex:0},a),{ref:t,style:{position:"fixed"},onFocus:e=>{var t;const s=e.relatedTarget;!(null==(t=i.viewport)?void 0:t.contains(s))&&n()}}))});Ks.displayName=qs;var Zs="Toast",Hs=wt.forwardRef((e,t)=>{const s=e,{forceMount:r,open:n,defaultOpen:a,onOpenChange:i}=s,o=Q(s,["forceMount","open","defaultOpen","onOpenChange"]),[l=!0,c]=Es({prop:n,defaultProp:a,onChange:i});return ae.jsx(Cs,{present:r||l,children:ae.jsx(Qs,Y(G({open:l},o),{ref:t,onClose:()=>c(!1),onPause:ms(e.onPause),onResume:ms(e.onResume),onSwipeStart:Jt(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Jt(e.onSwipeMove,e=>{const{x:t,y:s}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${s}px`)}),onSwipeCancel:Jt(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Jt(e.onSwipeEnd,e=>{const{x:t,y:s}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${s}px`),c(!1)})}))})});Hs.displayName=Zs;var[Gs,Ys]=Os(Zs,{onClose(){}}),Qs=wt.forwardRef((e,t)=>{const s=e,{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:m,onSwipeCancel:h,onSwipeEnd:p}=s,f=Q(s,["__scopeToast","type","duration","open","onClose","onEscapeKeyDown","onPause","onResume","onSwipeStart","onSwipeMove","onSwipeCancel","onSwipeEnd"]),g=Ls(Zs,r),[x,v]=wt.useState(null),y=ts(t,e=>v(e)),b=wt.useRef(null),w=wt.useRef(null),j=a||g.duration,N=wt.useRef(0),k=wt.useRef(j),_=wt.useRef(0),{onToastAdd:C,onToastRemove:S}=g,E=ms(()=>{var e;(null==x?void 0:x.contains(document.activeElement))&&(null==(e=g.viewport)||e.focus()),o()}),T=wt.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(_.current),N.current=(new Date).getTime(),_.current=window.setTimeout(E,e))},[E]);wt.useEffect(()=>{const e=g.viewport;if(e){const t=()=>{T(k.current),null==d||d()},s=()=>{const e=(new Date).getTime()-N.current;k.current=k.current-e,window.clearTimeout(_.current),null==c||c()};return e.addEventListener(Vs,s),e.addEventListener(Bs,t),()=>{e.removeEventListener(Vs,s),e.removeEventListener(Bs,t)}}},[g.viewport,j,c,d,T]),wt.useEffect(()=>{i&&!g.isClosePausedRef.current&&T(j)},[i,j,g.isClosePausedRef,T]),wt.useEffect(()=>(C(),()=>S()),[C,S]);const P=wt.useMemo(()=>x?ar(x):null,[x]);return g.viewport?ae.jsxs(ae.Fragment,{children:[P&&ae.jsx(Xs,{__scopeToast:r,role:"status","aria-live":"foreground"===n?"assertive":"polite","aria-atomic":!0,children:P}),ae.jsx(Gs,{scope:r,onClose:E,children:bt.createPortal(ae.jsx(Ds.ItemSlot,{scope:r,children:ae.jsx(js,{asChild:!0,onEscapeKeyDown:Jt(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||E(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:ae.jsx(ds.li,Y(G({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection},f),{ref:y,style:G({userSelect:"none",touchAction:"none"},e.style),onKeyDown:Jt(e.onKeyDown,e=>{"Escape"===e.key&&(null==l||l(e.nativeEvent),e.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:Jt(e.onPointerDown,e=>{0===e.button&&(b.current={x:e.clientX,y:e.clientY})}),onPointerMove:Jt(e.onPointerMove,e=>{if(!b.current)return;const t=e.clientX-b.current.x,s=e.clientY-b.current.y,r=Boolean(w.current),n=["left","right"].includes(g.swipeDirection),a=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,i=n?a(0,t):0,o=n?0:a(0,s),l="touch"===e.pointerType?10:2,c={x:i,y:o},d={originalEvent:e,delta:c};r?(w.current=c,ir("toast.swipeMove",m,d,{discrete:!1})):or(c,g.swipeDirection,l)?(w.current=c,ir("toast.swipeStart",u,d,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(s)>l)&&(b.current=null)}),onPointerUp:Jt(e.onPointerUp,e=>{const t=w.current,s=e.target;if(s.hasPointerCapture(e.pointerId)&&s.releasePointerCapture(e.pointerId),w.current=null,b.current=null,t){const s=e.currentTarget,r={originalEvent:e,delta:t};or(t,g.swipeDirection,g.swipeThreshold)?ir("toast.swipeEnd",p,r,{discrete:!0}):ir("toast.swipeCancel",h,r,{discrete:!0}),s.addEventListener("click",e=>e.preventDefault(),{once:!0})}})}))})}),g.viewport)})]}):null}),Xs=e=>{const t=e,{__scopeToast:s,children:r}=t,n=Q(t,["__scopeToast","children"]),a=Ls(Zs,s),[i,o]=wt.useState(!1),[l,c]=wt.useState(!1);return function(e=()=>{}){const t=ms(e);ks(()=>{let e=0,s=0;return e=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(s)}},[t])}(()=>o(!0)),wt.useEffect(()=>{const e=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(e)},[]),l?null:ae.jsx(_s,{asChild:!0,children:ae.jsx(Ts,Y(G({},n),{children:i&&ae.jsxs(ae.Fragment,{children:[a.label," ",r]})}))})},Js=wt.forwardRef((e,t)=>{const s=e,{__scopeToast:r}=s,n=Q(s,["__scopeToast"]);return ae.jsx(ds.div,Y(G({},n),{ref:t}))});Js.displayName="ToastTitle";var er=wt.forwardRef((e,t)=>{const s=e,{__scopeToast:r}=s,n=Q(s,["__scopeToast"]);return ae.jsx(ds.div,Y(G({},n),{ref:t}))});er.displayName="ToastDescription";var tr=wt.forwardRef((e,t)=>{const s=e,{altText:r}=s,n=Q(s,["altText"]);return r.trim()?ae.jsx(nr,{altText:r,asChild:!0,children:ae.jsx(rr,Y(G({},n),{ref:t}))}):null});tr.displayName="ToastAction";var sr="ToastClose",rr=wt.forwardRef((e,t)=>{const s=e,{__scopeToast:r}=s,n=Q(s,["__scopeToast"]),a=Ys(sr,r);return ae.jsx(nr,{asChild:!0,children:ae.jsx(ds.button,Y(G({type:"button"},n),{ref:t,onClick:Jt(e.onClick,a.onClose)}))})});rr.displayName=sr;var nr=wt.forwardRef((e,t)=>{const s=e,{__scopeToast:r,altText:n}=s,a=Q(s,["__scopeToast","altText"]);return ae.jsx(ds.div,Y(G({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0},a),{ref:t}))});function ar(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const s=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!s)if(r){const s=e.dataset.radixToastAnnounceAlt;s&&t.push(s)}else t.push(...ar(e))}}),t}function ir(e,t,s,{discrete:r}){const n=s.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:s});t&&n.addEventListener(e,t,{once:!0}),r?us(n,a):n.dispatchEvent(a)}var or=(e,t,s=0)=>{const r=Math.abs(e.x),n=Math.abs(e.y),a=r>n;return"left"===t||"right"===t?a&&r>s:!a&&n>s};function lr(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function cr(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var dr=$s,ur=Ws,mr=Hs,hr=Js,pr=er,fr=tr,gr=rr;function xr(e){var t,s,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(s=xr(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function vr(){for(var e,t,s=0,r="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=xr(e))&&(r&&(r+=" "),r+=t);return r}const yr=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,br=vr,wr=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return br(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:n,defaultVariants:a}=t,i=Object.keys(n).map(e=>{const t=null==s?void 0:s[e],r=null==a?void 0:a[e];if(null===t)return null;const i=yr(t)||yr(r);return n[e][i]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let s=t,{class:r,className:n}=s,i=Q(s,["class","className"]);return Object.entries(i).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes(G(G({},a),o)[t]):G(G({},a),o)[t]===s})?[...e,r,n]:e},[]);return br(e,i,l,null==s?void 0:s.class,null==s?void 0:s.className)},jr=(e,t)=>{var s;if(0===e.length)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?jr(e.slice(1),n):void 0;if(a)return a;if(0===t.validators.length)return;const i=e.join("-");return null==(s=t.validators.find(({validator:e})=>e(i)))?void 0:s.classGroupId},Nr=/^\[(.+)\]$/,kr=e=>{if(Nr.test(e)){const t=Nr.exec(e)[1],s=null==t?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},_r=e=>{const{theme:t,prefix:s}=e,r={nextPart:new Map,validators:[]};return Tr(Object.entries(e.classGroups),s).forEach(([e,s])=>{Cr(s,r,e,t)}),r},Cr=(e,t,s,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Sr(t,e)).classGroupId=s)}if("function"==typeof e)return Er(e)?void Cr(e(r),t,s,r):void t.validators.push({validator:e,classGroupId:s});Object.entries(e).forEach(([e,n])=>{Cr(n,Sr(t,e),s,r)})})},Sr=(e,t)=>{let s=e;return t.split("-").forEach(e=>{s.nextPart.has(e)||s.nextPart.set(e,{nextPart:new Map,validators:[]}),s=s.nextPart.get(e)}),s},Er=e=>e.isThemeGetter,Tr=(e,t)=>t?e.map(([e,s])=>[e,s.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,s])=>[t+e,s])):e)]):e,Pr=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,r=new Map;const n=(n,a)=>{s.set(n,a),t++,t>e&&(t=0,r=s,s=new Map)};return{get(e){let t=s.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(n(e,t),t):void 0},set(e,t){s.has(e)?s.set(e,t):n(e,t)}}},Rr=e=>{const{separator:t,experimentalParseClassName:s}=e,r=1===t.length,n=t[0],a=t.length,i=e=>{const s=[];let i,o=0,l=0;for(let u=0;u<e.length;u++){let c=e[u];if(0===o){if(c===n&&(r||e.slice(u,u+a)===t)){s.push(e.slice(l,u)),l=u+a;continue}if("/"===c){i=u;continue}}"["===c?o++:"]"===c&&o--}const c=0===s.length?e:e.substring(l),d=c.startsWith("!");return{modifiers:s,hasImportantModifier:d,baseClassName:d?c.substring(1):c,maybePostfixModifierPosition:i&&i>l?i-l:void 0}};return s?e=>s({className:e,parseClassName:i}):i},Dr=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(e=>{"["===e[0]?(t.push(...s.sort(),e),s=[]):s.push(e)}),t.push(...s.sort()),t},Ar=e=>G({cache:Pr(e.cacheSize),parseClassName:Rr(e)},(e=>{const t=_r(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const s=e.split("-");return""===s[0]&&1!==s.length&&s.shift(),jr(s,t)||kr(e)},getConflictingClassGroupIds:(e,t)=>{const n=s[e]||[];return t&&r[e]?[...n,...r[e]]:n}}})(e)),Ir=/\s+/;function Or(){let e,t,s=0,r="";for(;s<arguments.length;)(e=arguments[s++])&&(t=Mr(e))&&(r&&(r+=" "),r+=t);return r}const Mr=e=>{if("string"==typeof e)return e;let t,s="";for(let r=0;r<e.length;r++)e[r]&&(t=Mr(e[r]))&&(s&&(s+=" "),s+=t);return s};function Fr(e,...t){let s,r,n,a=function(o){const l=t.reduce((e,t)=>t(e),e());return s=Ar(l),r=s.cache.get,n=s.cache.set,a=i,i(o)};function i(e){const t=r(e);if(t)return t;const a=((e,t)=>{const{parseClassName:s,getClassGroupId:r,getConflictingClassGroupIds:n}=t,a=[],i=e.trim().split(Ir);let o="";for(let l=i.length-1;l>=0;l-=1){const e=i[l],{modifiers:t,hasImportantModifier:c,baseClassName:d,maybePostfixModifierPosition:u}=s(e);let m=Boolean(u),h=r(m?d.substring(0,u):d);if(!h){if(!m){o=e+(o.length>0?" "+o:o);continue}if(h=r(d),!h){o=e+(o.length>0?" "+o:o);continue}m=!1}const p=Dr(t).join(":"),f=c?p+"!":p,g=f+h;if(a.includes(g))continue;a.push(g);const x=n(h,m);for(let s=0;s<x.length;++s){const e=x[s];a.push(f+e)}o=e+(o.length>0?" "+o:o)}return o})(e,s);return n(e,a),a}return function(){return a(Or.apply(null,arguments))}}const Lr=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},$r=/^\[(?:([a-z-]+):)?(.+)\]$/i,zr=/^\d+\/\d+$/,Ur=new Set(["px","full","screen"]),Vr=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Br=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Wr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,qr=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Kr=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zr=e=>Gr(e)||Ur.has(e)||zr.test(e),Hr=e=>cn(e,"length",dn),Gr=e=>Boolean(e)&&!Number.isNaN(Number(e)),Yr=e=>cn(e,"number",Gr),Qr=e=>Boolean(e)&&Number.isInteger(Number(e)),Xr=e=>e.endsWith("%")&&Gr(e.slice(0,-1)),Jr=e=>$r.test(e),en=e=>Vr.test(e),tn=new Set(["length","size","percentage"]),sn=e=>cn(e,tn,un),rn=e=>cn(e,"position",un),nn=new Set(["image","url"]),an=e=>cn(e,nn,hn),on=e=>cn(e,"",mn),ln=()=>!0,cn=(e,t,s)=>{const r=$r.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):s(r[2]))},dn=e=>Br.test(e)&&!Wr.test(e),un=()=>!1,mn=e=>qr.test(e),hn=e=>Kr.test(e),pn=Fr(()=>{const e=Lr("colors"),t=Lr("spacing"),s=Lr("blur"),r=Lr("brightness"),n=Lr("borderColor"),a=Lr("borderRadius"),i=Lr("borderSpacing"),o=Lr("borderWidth"),l=Lr("contrast"),c=Lr("grayscale"),d=Lr("hueRotate"),u=Lr("invert"),m=Lr("gap"),h=Lr("gradientColorStops"),p=Lr("gradientColorStopPositions"),f=Lr("inset"),g=Lr("margin"),x=Lr("opacity"),v=Lr("padding"),y=Lr("saturate"),b=Lr("scale"),w=Lr("sepia"),j=Lr("skew"),N=Lr("space"),k=Lr("translate"),_=()=>["auto",Jr,t],C=()=>[Jr,t],S=()=>["",Zr,Hr],E=()=>["auto",Gr,Jr],T=()=>["","0",Jr],P=()=>[Gr,Jr];return{cacheSize:500,separator:":",theme:{colors:[ln],spacing:[Zr,Hr],blur:["none","",en,Jr],brightness:P(),borderColor:[e],borderRadius:["none","","full",en,Jr],borderSpacing:C(),borderWidth:S(),contrast:P(),grayscale:T(),hueRotate:P(),invert:T(),gap:C(),gradientColorStops:[e],gradientColorStopPositions:[Xr,Hr],inset:_(),margin:_(),opacity:P(),padding:C(),saturate:P(),scale:P(),sepia:T(),skew:P(),space:C(),translate:C()},classGroups:{aspect:[{aspect:["auto","square","video",Jr]}],container:["container"],columns:[{columns:[en]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Jr]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qr,Jr]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Jr]}],grow:[{grow:T()}],shrink:[{shrink:T()}],order:[{order:["first","last","none",Qr,Jr]}],"grid-cols":[{"grid-cols":[ln]}],"col-start-end":[{col:["auto",{span:["full",Qr,Jr]},Jr]}],"col-start":[{"col-start":E()}],"col-end":[{"col-end":E()}],"grid-rows":[{"grid-rows":[ln]}],"row-start-end":[{row:["auto",{span:[Qr,Jr]},Jr]}],"row-start":[{"row-start":E()}],"row-end":[{"row-end":E()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Jr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Jr]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Jr,t]}],"min-w":[{"min-w":[Jr,t,"min","max","fit"]}],"max-w":[{"max-w":[Jr,t,"none","full","min","max","fit","prose",{screen:[en]},en]}],h:[{h:[Jr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Jr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Jr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Jr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",en,Hr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Yr]}],"font-family":[{font:[ln]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Jr]}],"line-clamp":[{"line-clamp":["none",Gr,Yr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zr,Jr]}],"list-image":[{"list-image":["none",Jr]}],"list-style-type":[{list:["none","disc","decimal",Jr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zr,Hr]}],"underline-offset":[{"underline-offset":["auto",Zr,Jr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Jr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Jr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",rn]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sn]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},an]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Zr,Jr]}],"outline-w":[{outline:[Zr,Hr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:S()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Zr,Hr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",en,on]}],"shadow-color":[{shadow:[ln]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",en,Jr]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[u]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[u]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[i]}],"border-spacing-x":[{"border-spacing-x":[i]}],"border-spacing-y":[{"border-spacing-y":[i]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Jr]}],duration:[{duration:P()}],ease:[{ease:["linear","in","out","in-out",Jr]}],delay:[{delay:P()}],animate:[{animate:["none","spin","ping","pulse","bounce",Jr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[Qr,Jr]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Jr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Jr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Jr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Zr,Hr,Yr]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function fn(...e){return pn(vr(e))}function gn(e){return e instanceof Error?e.message:"string"==typeof e?e:"An unexpected error occurred"}const xn=dr,vn=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(ur,G({ref:t,className:fn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r)},n))});vn.displayName=ur.displayName;const yn=wr("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),bn=wt.forwardRef((e,t)=>{var s=e,{className:r,variant:n}=s,a=Q(s,["className","variant"]);return ae.jsx(mr,G({ref:t,className:fn(yn({variant:n}),r)},a))});bn.displayName=mr.displayName;wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(fr,G({ref:t,className:fn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r)},n))}).displayName=fr.displayName;const wn=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(gr,Y(G({ref:t,className:fn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":""},n),{children:ae.jsx(ie,{className:"h-4 w-4"})}))});wn.displayName=gr.displayName;const jn=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(hr,G({ref:t,className:fn("text-sm font-semibold",r)},n))});jn.displayName=hr.displayName;const Nn=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(pr,G({ref:t,className:fn("text-sm opacity-90",r)},n))});function kn(){const{toasts:e}=Xt();return ae.jsxs(xn,{children:[e.map(function(e){var t=e,{id:s,title:r,description:n,action:a}=t,i=Q(t,["id","title","description","action"]);return ae.jsxs(bn,Y(G({},i),{children:[ae.jsxs("div",{className:"grid gap-1",children:[r&&ae.jsx(jn,{children:r}),n&&ae.jsx(Nn,{children:n})]}),a,ae.jsx(wn,{})]}),s)}),ae.jsx(vn,{})]})}Nn.displayName=pr.displayName;var _n=["light","dark"],Cn=wt.createContext(void 0),Sn={setTheme:e=>{},themes:[]};wt.memo(({forcedTheme:e,storageKey:t,attribute:s,enableSystem:r,enableColorScheme:n,defaultTheme:a,value:i,attrs:o,nonce:l})=>{let c="system"===a,d="class"===s?`var d=document.documentElement,c=d.classList;c.remove(${o.map(e=>`'${e}'`).join(",")});`:`var d=document.documentElement,n='${s}',s='setAttribute';`,u=n?_n.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(e,t=!1,r=!0)=>{let a=i?i[e]:e,o=t?e+"|| ''":`'${a}'`,l="";return n&&r&&!t&&_n.includes(e)&&(l+=`d.style.colorScheme = '${e}';`),"class"===s?l+=t||a?`c.add(${o})`:"null":a&&(l+=`d[s](n,${o})`),l},h=e?`!function(){${d}${m(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${c})){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}${c?"":"else{"+m(a,!1,!1)+"}"}${u}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${i?`var x=${JSON.stringify(i)};`:""}${m(i?"x[e]":"e",!0)}}else{${m(a,!1,!1)};}${u}}catch(t){}}();`;return wt.createElement("script",{nonce:l,dangerouslySetInnerHTML:{__html:h}})});var En=Array(12).fill(0),Tn=({visible:e})=>jt.createElement("div",{className:"sonner-loading-wrapper","data-visible":e},jt.createElement("div",{className:"sonner-spinner"},En.map((e,t)=>jt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),Pn=jt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},jt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Rn=jt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},jt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Dn=jt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},jt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),An=jt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},jt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),In=1,On=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let s=e,{message:r}=s,n=Q(s,["message"]),a="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:In++,i=this.toasts.find(e=>e.id===a),o=void 0===e.dismissible||e.dismissible;return i?this.toasts=this.toasts.map(t=>t.id===a?(this.publish(Y(G(G({},t),e),{id:a,title:r})),Y(G(G({},t),e),{id:a,dismissible:o,title:r})):t):this.addToast(Y(G({title:r},n),{dismissible:o,id:a})),a},this.dismiss=e=>(e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create(Y(G({},t),{message:e})),this.error=(e,t)=>this.create(Y(G({},t),{message:e,type:"error"})),this.success=(e,t)=>this.create(Y(G({},t),{type:"success",message:e})),this.info=(e,t)=>this.create(Y(G({},t),{type:"info",message:e})),this.warning=(e,t)=>this.create(Y(G({},t),{type:"warning",message:e})),this.loading=(e,t)=>this.create(Y(G({},t),{type:"loading",message:e})),this.promise=(e,t)=>{if(!t)return;let s;void 0!==t.loading&&(s=this.create(Y(G({},t),{promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0})));let r=e instanceof Promise?e:e(),n=void 0!==s;return r.then(e=>ne(this,null,function*(){if(Mn(e)&&!e.ok){n=!1;let r="function"==typeof t.error?yield t.error(`HTTP error! status: ${e.status}`):t.error,a="function"==typeof t.description?yield t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:s,type:"error",message:r,description:a})}else if(void 0!==t.success){n=!1;let r="function"==typeof t.success?yield t.success(e):t.success,a="function"==typeof t.description?yield t.description(e):t.description;this.create({id:s,type:"success",message:r,description:a})}})).catch(e=>ne(this,null,function*(){if(void 0!==t.error){n=!1;let r="function"==typeof t.error?yield t.error(e):t.error,a="function"==typeof t.description?yield t.description(e):t.description;this.create({id:s,type:"error",message:r,description:a})}})).finally(()=>{var e;n&&(this.dismiss(s),s=void 0),null==(e=t.finally)||e.call(t)}),s},this.custom=(e,t)=>{let s=(null==t?void 0:t.id)||In++;return this.create(G({jsx:e(s),id:s},t)),s},this.subscribers=[],this.toasts=[]}},Mn=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,Fn=(e,t)=>{let s=(null==t?void 0:t.id)||In++;return On.addToast(Y(G({title:e},t),{id:s})),s};function Ln(e){return void 0!==e.label}Object.assign(Fn,{success:On.success,info:On.info,warning:On.warning,error:On.error,custom:On.custom,message:On.message,promise:On.promise,dismiss:On.dismiss,loading:On.loading},{getHistory:()=>On.toasts}),function(e,{insertAt:t}={}){if("undefined"==typeof document)return;let s=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&s.firstChild?s.insertBefore(r,s.firstChild):s.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}\n');var $n=3,zn=14;function Un(...e){return e.filter(Boolean).join(" ")}var Vn=e=>{var t,s,r,n,a,i,o,l,c,d;let{invert:u,toast:m,unstyled:h,interacting:p,setHeights:f,visibleToasts:g,heights:x,index:v,toasts:y,expanded:b,removeToast:w,defaultRichColors:j,closeButton:N,style:k,cancelButtonStyle:_,actionButtonStyle:C,className:S="",descriptionClassName:E="",duration:T,position:P,gap:R,loadingIcon:D,expandByDefault:A,classNames:I,icons:O,closeButtonAriaLabel:M="Close toast",pauseWhenPageIsHidden:F,cn:L}=e,[$,z]=jt.useState(!1),[U,V]=jt.useState(!1),[B,W]=jt.useState(!1),[q,K]=jt.useState(!1),[Z,H]=jt.useState(0),[Q,X]=jt.useState(0),J=jt.useRef(null),ee=jt.useRef(null),te=0===v,se=v+1<=g,re=m.type,ne=!1!==m.dismissible,ae=m.className||"",ie=m.descriptionClassName||"",oe=jt.useMemo(()=>x.findIndex(e=>e.toastId===m.id)||0,[x,m.id]),le=jt.useMemo(()=>{var e;return null!=(e=m.closeButton)?e:N},[m.closeButton,N]),ce=jt.useMemo(()=>m.duration||T||4e3,[m.duration,T]),de=jt.useRef(0),ue=jt.useRef(0),me=jt.useRef(0),he=jt.useRef(null),[pe,fe]=P.split("-"),ge=jt.useMemo(()=>x.reduce((e,t,s)=>s>=oe?e:e+t.height,0),[x,oe]),xe=(()=>{let[e,t]=jt.useState(document.hidden);return jt.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),ve=m.invert||u,ye="loading"===re;ue.current=jt.useMemo(()=>oe*R+ge,[oe,ge]),jt.useEffect(()=>{z(!0)},[]),jt.useLayoutEffect(()=>{if(!$)return;let e=ee.current,t=e.style.height;e.style.height="auto";let s=e.getBoundingClientRect().height;e.style.height=t,X(s),f(e=>e.find(e=>e.toastId===m.id)?e.map(e=>e.toastId===m.id?Y(G({},e),{height:s}):e):[{toastId:m.id,height:s,position:m.position},...e])},[$,m.title,m.description,f,m.id]);let be=jt.useCallback(()=>{V(!0),H(ue.current),f(e=>e.filter(e=>e.toastId!==m.id)),setTimeout(()=>{w(m)},200)},[m,w,f,ue]);return jt.useEffect(()=>{if(m.promise&&"loading"===re||m.duration===1/0||"loading"===m.type)return;let e,t=ce;return b||p||F&&xe?(()=>{if(me.current<de.current){let e=(new Date).getTime()-de.current;t-=e}me.current=(new Date).getTime()})():t!==1/0&&(de.current=(new Date).getTime(),e=setTimeout(()=>{var e;null==(e=m.onAutoClose)||e.call(m,m),be()},t)),()=>clearTimeout(e)},[b,p,A,m,ce,be,m.promise,re,F,xe]),jt.useEffect(()=>{let e=ee.current;if(e){let t=e.getBoundingClientRect().height;return X(t),f(e=>[{toastId:m.id,height:t,position:m.position},...e]),()=>f(e=>e.filter(e=>e.toastId!==m.id))}},[f,m.id]),jt.useEffect(()=>{m.delete&&be()},[be,m.delete]),jt.createElement("li",{"aria-live":m.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ee,className:L(S,ae,null==I?void 0:I.toast,null==(t=null==m?void 0:m.classNames)?void 0:t.toast,null==I?void 0:I.default,null==I?void 0:I[re],null==(s=null==m?void 0:m.classNames)?void 0:s[re]),"data-sonner-toast":"","data-rich-colors":null!=(r=m.richColors)?r:j,"data-styled":!(m.jsx||m.unstyled||h),"data-mounted":$,"data-promise":!!m.promise,"data-removed":U,"data-visible":se,"data-y-position":pe,"data-x-position":fe,"data-index":v,"data-front":te,"data-swiping":B,"data-dismissible":ne,"data-type":re,"data-invert":ve,"data-swipe-out":q,"data-expanded":!!(b||A&&$),style:G(G({"--index":v,"--toasts-before":v,"--z-index":y.length-v,"--offset":`${U?Z:ue.current}px`,"--initial-height":A?"auto":`${Q}px`},k),m.style),onPointerDown:e=>{ye||!ne||(J.current=new Date,H(ue.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(W(!0),he.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,s,r;if(q||!ne)return;he.current=null;let n=Number((null==(e=ee.current)?void 0:e.style.getPropertyValue("--swipe-amount").replace("px",""))||0),a=(new Date).getTime()-(null==(t=J.current)?void 0:t.getTime()),i=Math.abs(n)/a;if(Math.abs(n)>=20||i>.11)return H(ue.current),null==(s=m.onDismiss)||s.call(m,m),be(),void K(!0);null==(r=ee.current)||r.style.setProperty("--swipe-amount","0px"),W(!1)},onPointerMove:e=>{var t;if(!he.current||!ne)return;let s=e.clientY-he.current.y,r=e.clientX-he.current.x,n=("top"===pe?Math.min:Math.max)(0,s),a="touch"===e.pointerType?10:2;Math.abs(n)>a?null==(t=ee.current)||t.style.setProperty("--swipe-amount",`${s}px`):Math.abs(r)>a&&(he.current=null)}},le&&!m.jsx?jt.createElement("button",{"aria-label":M,"data-disabled":ye,"data-close-button":!0,onClick:ye||!ne?()=>{}:()=>{var e;be(),null==(e=m.onDismiss)||e.call(m,m)},className:L(null==I?void 0:I.closeButton,null==(n=null==m?void 0:m.classNames)?void 0:n.closeButton)},jt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},jt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),jt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,m.jsx||jt.isValidElement(m.title)?m.jsx||m.title:jt.createElement(jt.Fragment,null,re||m.icon||m.promise?jt.createElement("div",{"data-icon":"",className:L(null==I?void 0:I.icon,null==(a=null==m?void 0:m.classNames)?void 0:a.icon)},m.promise||"loading"===m.type&&!m.icon?m.icon||(null!=O&&O.loading?jt.createElement("div",{className:"sonner-loader","data-visible":"loading"===re},O.loading):D?jt.createElement("div",{className:"sonner-loader","data-visible":"loading"===re},D):jt.createElement(Tn,{visible:"loading"===re})):null,"loading"!==m.type?m.icon||(null==O?void 0:O[re])||(e=>{switch(e){case"success":return Pn;case"info":return Dn;case"warning":return Rn;case"error":return An;default:return null}})(re):null):null,jt.createElement("div",{"data-content":"",className:L(null==I?void 0:I.content,null==(i=null==m?void 0:m.classNames)?void 0:i.content)},jt.createElement("div",{"data-title":"",className:L(null==I?void 0:I.title,null==(o=null==m?void 0:m.classNames)?void 0:o.title)},m.title),m.description?jt.createElement("div",{"data-description":"",className:L(E,ie,null==I?void 0:I.description,null==(l=null==m?void 0:m.classNames)?void 0:l.description)},m.description):null),jt.isValidElement(m.cancel)?m.cancel:m.cancel&&Ln(m.cancel)?jt.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||_,onClick:e=>{var t,s;Ln(m.cancel)&&ne&&(null==(s=(t=m.cancel).onClick)||s.call(t,e),be())},className:L(null==I?void 0:I.cancelButton,null==(c=null==m?void 0:m.classNames)?void 0:c.cancelButton)},m.cancel.label):null,jt.isValidElement(m.action)?m.action:m.action&&Ln(m.action)?jt.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||C,onClick:e=>{var t,s;Ln(m.action)&&(e.defaultPrevented||(null==(s=(t=m.action).onClick)||s.call(t,e),be()))},className:L(null==I?void 0:I.actionButton,null==(d=null==m?void 0:m.classNames)?void 0:d.actionButton)},m.action.label):null))};function Bn(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}var Wn=e=>{let{invert:t,position:s="bottom-right",hotkey:r=["altKey","KeyT"],expand:n,closeButton:a,className:i,offset:o,theme:l="light",richColors:c,duration:d,style:u,visibleToasts:m=$n,toastOptions:h,dir:p=Bn(),gap:f=zn,loadingIcon:g,icons:x,containerAriaLabel:v="Notifications",pauseWhenPageIsHidden:y,cn:b=Un}=e,[w,j]=jt.useState([]),N=jt.useMemo(()=>Array.from(new Set([s].concat(w.filter(e=>e.position).map(e=>e.position)))),[w,s]),[k,_]=jt.useState([]),[C,S]=jt.useState(!1),[E,T]=jt.useState(!1),[P,R]=jt.useState("system"!==l?l:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),D=jt.useRef(null),A=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=jt.useRef(null),O=jt.useRef(!1),M=jt.useCallback(e=>{var t;null!=(t=w.find(t=>t.id===e.id))&&t.delete||On.dismiss(e.id),j(t=>t.filter(({id:t})=>t!==e.id))},[w]);return jt.useEffect(()=>On.subscribe(e=>{e.dismiss?j(t=>t.map(t=>t.id===e.id?Y(G({},t),{delete:!0}):t)):setTimeout(()=>{Nt.flushSync(()=>{j(t=>{let s=t.findIndex(t=>t.id===e.id);return-1!==s?[...t.slice(0,s),G(G({},t[s]),e),...t.slice(s+1)]:[e,...t]})})})}),[]),jt.useEffect(()=>{"system"===l?("system"===l&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),"undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:e})=>{R(e?"dark":"light")})):R(l)},[l]),jt.useEffect(()=>{w.length<=1&&S(!1)},[w]),jt.useEffect(()=>{let e=e=>{var t,s;r.every(t=>e[t]||e.code===t)&&(S(!0),null==(t=D.current)||t.focus()),"Escape"===e.code&&(document.activeElement===D.current||null!=(s=D.current)&&s.contains(document.activeElement))&&S(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),jt.useEffect(()=>{if(D.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,O.current=!1)}},[D.current]),w.length?jt.createElement("section",{"aria-label":`${v} ${A}`,tabIndex:-1},N.map((e,s)=>{var r;let[l,v]=e.split("-");return jt.createElement("ol",{key:e,dir:"auto"===p?Bn():p,tabIndex:-1,ref:D,className:i,"data-sonner-toaster":!0,"data-theme":P,"data-y-position":l,"data-x-position":v,style:G({"--front-toast-height":`${(null==(r=k[0])?void 0:r.height)||0}px`,"--offset":"number"==typeof o?`${o}px`:o||"32px","--width":"356px","--gap":`${f}px`},u),onBlur:e=>{O.current&&!e.currentTarget.contains(e.relatedTarget)&&(O.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||O.current||(O.current=!0,I.current=e.relatedTarget)},onMouseEnter:()=>S(!0),onMouseMove:()=>S(!0),onMouseLeave:()=>{E||S(!1)},onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||T(!0)},onPointerUp:()=>T(!1)},w.filter(t=>!t.position&&0===s||t.position===e).map((s,r)=>{var i,o;return jt.createElement(Vn,{key:s.id,icons:x,index:r,toast:s,defaultRichColors:c,duration:null!=(i=null==h?void 0:h.duration)?i:d,className:null==h?void 0:h.className,descriptionClassName:null==h?void 0:h.descriptionClassName,invert:t,visibleToasts:m,closeButton:null!=(o=null==h?void 0:h.closeButton)?o:a,interacting:E,position:e,style:null==h?void 0:h.style,unstyled:null==h?void 0:h.unstyled,classNames:null==h?void 0:h.classNames,cancelButtonStyle:null==h?void 0:h.cancelButtonStyle,actionButtonStyle:null==h?void 0:h.actionButtonStyle,removeToast:M,toasts:w.filter(e=>e.position==s.position),heights:k.filter(e=>e.position==s.position),setHeights:_,expandByDefault:n,gap:f,loadingIcon:g,expanded:C,pauseWhenPageIsHidden:y,cn:b})}))})):null};const qn=e=>{var t=Q(e,[]);const{theme:s="system"}=null!=(r=wt.useContext(Cn))?r:Sn;var r;return ae.jsx(Wn,G({theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},t))};var Kn=kt["useId".toString()]||(()=>{}),Zn=0;function Hn(e){const[t,s]=wt.useState(Kn());return ks(()=>{s(e=>null!=e?e:String(Zn++))},[e]),t?`radix-${t}`:""}const Gn=["top","right","bottom","left"],Yn=Math.min,Qn=Math.max,Xn=Math.round,Jn=Math.floor,ea=e=>({x:e,y:e}),ta={left:"right",right:"left",bottom:"top",top:"bottom"},sa={start:"end",end:"start"};function ra(e,t,s){return Qn(e,Yn(t,s))}function na(e,t){return"function"==typeof e?e(t):e}function aa(e){return e.split("-")[0]}function ia(e){return e.split("-")[1]}function oa(e){return"x"===e?"y":"x"}function la(e){return"y"===e?"height":"width"}function ca(e){return["top","bottom"].includes(aa(e))?"y":"x"}function da(e){return oa(ca(e))}function ua(e){return e.replace(/start|end/g,e=>sa[e])}function ma(e){return e.replace(/left|right|bottom|top/g,e=>ta[e])}function ha(e){return"number"!=typeof e?function(e){return G({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}}function pa(e){const{x:t,y:s,width:r,height:n}=e;return{width:r,height:n,top:s,left:t,right:t+r,bottom:s+n,x:t,y:s}}function fa(e,t,s){let{reference:r,floating:n}=e;const a=ca(t),i=da(t),o=la(i),l=aa(t),c="y"===a,d=r.x+r.width/2-n.width/2,u=r.y+r.height/2-n.height/2,m=r[o]/2-n[o]/2;let h;switch(l){case"top":h={x:d,y:r.y-n.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:u};break;case"left":h={x:r.x-n.width,y:u};break;default:h={x:r.x,y:r.y}}switch(ia(t)){case"start":h[i]-=m*(s&&c?-1:1);break;case"end":h[i]+=m*(s&&c?-1:1)}return h}function ga(e,t){return ne(this,null,function*(){var s;void 0===t&&(t={});const{x:r,y:n,platform:a,rects:i,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:d="viewport",elementContext:u="floating",altBoundary:m=!1,padding:h=0}=na(t,e),p=ha(h),f=o[m?"floating"===u?"reference":"floating":u],g=pa(yield a.getClippingRect({element:null==(s=yield null==a.isElement?void 0:a.isElement(f))||s?f:f.contextElement||(yield null==a.getDocumentElement?void 0:a.getDocumentElement(o.floating)),boundary:c,rootBoundary:d,strategy:l})),x="floating"===u?{x:r,y:n,width:i.floating.width,height:i.floating.height}:i.reference,v=yield null==a.getOffsetParent?void 0:a.getOffsetParent(o.floating),y=(yield null==a.isElement?void 0:a.isElement(v))&&(yield null==a.getScale?void 0:a.getScale(v))||{x:1,y:1},b=pa(a.convertOffsetParentRelativeRectToViewportRelativeRect?yield a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:x,offsetParent:v,strategy:l}):x);return{top:(g.top-b.top+p.top)/y.y,bottom:(b.bottom-g.bottom+p.bottom)/y.y,left:(g.left-b.left+p.left)/y.x,right:(b.right-g.right+p.right)/y.x}})}function xa(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function va(e){return Gn.some(t=>e[t]>=0)}function ya(){return"undefined"!=typeof window}function ba(e){return Na(e)?(e.nodeName||"").toLowerCase():"#document"}function wa(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function ja(e){var t;return null==(t=(Na(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Na(e){return!!ya()&&(e instanceof Node||e instanceof wa(e).Node)}function ka(e){return!!ya()&&(e instanceof Element||e instanceof wa(e).Element)}function _a(e){return!!ya()&&(e instanceof HTMLElement||e instanceof wa(e).HTMLElement)}function Ca(e){return!(!ya()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof wa(e).ShadowRoot)}function Sa(e){const{overflow:t,overflowX:s,overflowY:r,display:n}=Aa(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+s)&&!["inline","contents"].includes(n)}function Ea(e){return["table","td","th"].includes(ba(e))}function Ta(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch(s){return!1}})}function Pa(e){const t=Ra(),s=ka(e)?Aa(e):e;return"none"!==s.transform||"none"!==s.perspective||!!s.containerType&&"normal"!==s.containerType||!t&&!!s.backdropFilter&&"none"!==s.backdropFilter||!t&&!!s.filter&&"none"!==s.filter||["transform","perspective","filter"].some(e=>(s.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(s.contain||"").includes(e))}function Ra(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Da(e){return["html","body","#document"].includes(ba(e))}function Aa(e){return wa(e).getComputedStyle(e)}function Ia(e){return ka(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Oa(e){if("html"===ba(e))return e;const t=e.assignedSlot||e.parentNode||Ca(e)&&e.host||ja(e);return Ca(t)?t.host:t}function Ma(e){const t=Oa(e);return Da(t)?e.ownerDocument?e.ownerDocument.body:e.body:_a(t)&&Sa(t)?t:Ma(t)}function Fa(e,t,s){var r;void 0===t&&(t=[]),void 0===s&&(s=!0);const n=Ma(e),a=n===(null==(r=e.ownerDocument)?void 0:r.body),i=wa(n);if(a){const e=La(i);return t.concat(i,i.visualViewport||[],Sa(n)?n:[],e&&s?Fa(e):[])}return t.concat(n,Fa(n,[],s))}function La(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $a(e){const t=Aa(e);let s=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const n=_a(e),a=n?e.offsetWidth:s,i=n?e.offsetHeight:r,o=Xn(s)!==a||Xn(r)!==i;return o&&(s=a,r=i),{width:s,height:r,$:o}}function za(e){return ka(e)?e:e.contextElement}function Ua(e){const t=za(e);if(!_a(t))return ea(1);const s=t.getBoundingClientRect(),{width:r,height:n,$:a}=$a(t);let i=(a?Xn(s.width):s.width)/r,o=(a?Xn(s.height):s.height)/n;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}const Va=ea(0);function Ba(e){const t=wa(e);return Ra()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Va}function Wa(e,t,s,r){void 0===t&&(t=!1),void 0===s&&(s=!1);const n=e.getBoundingClientRect(),a=za(e);let i=ea(1);t&&(r?ka(r)&&(i=Ua(r)):i=Ua(e));const o=function(e,t,s){return void 0===t&&(t=!1),!(!s||t&&s!==wa(e))&&t}(a,s,r)?Ba(a):ea(0);let l=(n.left+o.x)/i.x,c=(n.top+o.y)/i.y,d=n.width/i.x,u=n.height/i.y;if(a){const e=wa(a),t=r&&ka(r)?wa(r):r;let s=e,n=La(s);for(;n&&r&&t!==s;){const e=Ua(n),t=n.getBoundingClientRect(),r=Aa(n),a=t.left+(n.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(n.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,c*=e.y,d*=e.x,u*=e.y,l+=a,c+=i,s=wa(n),n=La(s)}}return pa({width:d,height:u,x:l,y:c})}function qa(e,t){const s=Ia(e).scrollLeft;return t?t.left+s:Wa(ja(e)).left+s}function Ka(e,t,s){let r;if("viewport"===t)r=function(e,t){const s=wa(e),r=ja(e),n=s.visualViewport;let a=r.clientWidth,i=r.clientHeight,o=0,l=0;if(n){a=n.width,i=n.height;const e=Ra();(!e||e&&"fixed"===t)&&(o=n.offsetLeft,l=n.offsetTop)}return{width:a,height:i,x:o,y:l}}(e,s);else if("document"===t)r=function(e){const t=ja(e),s=Ia(e),r=e.ownerDocument.body,n=Qn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Qn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-s.scrollLeft+qa(e);const o=-s.scrollTop;return"rtl"===Aa(r).direction&&(i+=Qn(t.clientWidth,r.clientWidth)-n),{width:n,height:a,x:i,y:o}}(ja(e));else if(ka(t))r=function(e,t){const s=Wa(e,!0,"fixed"===t),r=s.top+e.clientTop,n=s.left+e.clientLeft,a=_a(e)?Ua(e):ea(1);return{width:e.clientWidth*a.x,height:e.clientHeight*a.y,x:n*a.x,y:r*a.y}}(t,s);else{const s=Ba(e);r=Y(G({},t),{x:t.x-s.x,y:t.y-s.y})}return pa(r)}function Za(e,t){const s=Oa(e);return!(s===t||!ka(s)||Da(s))&&("fixed"===Aa(s).position||Za(s,t))}function Ha(e,t,s){const r=_a(t),n=ja(t),a="fixed"===s,i=Wa(e,!0,a,t);let o={scrollLeft:0,scrollTop:0};const l=ea(0);if(r||!r&&!a)if(("body"!==ba(t)||Sa(n))&&(o=Ia(t)),r){const e=Wa(t,!0,a,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else n&&(l.x=qa(n));let c=0,d=0;if(n&&!r&&!a){const e=n.getBoundingClientRect();d=e.top+o.scrollTop,c=e.left+o.scrollLeft-qa(n,e)}return{x:i.left+o.scrollLeft-l.x-c,y:i.top+o.scrollTop-l.y-d,width:i.width,height:i.height}}function Ga(e){return"static"===Aa(e).position}function Ya(e,t){if(!_a(e)||"fixed"===Aa(e).position)return null;if(t)return t(e);let s=e.offsetParent;return ja(e)===s&&(s=s.ownerDocument.body),s}function Qa(e,t){const s=wa(e);if(Ta(e))return s;if(!_a(e)){let t=Oa(e);for(;t&&!Da(t);){if(ka(t)&&!Ga(t))return t;t=Oa(t)}return s}let r=Ya(e,t);for(;r&&Ea(r)&&Ga(r);)r=Ya(r,t);return r&&Da(r)&&Ga(r)&&!Pa(r)?s:r||function(e){let t=Oa(e);for(;_a(t)&&!Da(t);){if(Pa(t))return t;if(Ta(t))return null;t=Oa(t)}return null}(e)||s}const Xa={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:s,offsetParent:r,strategy:n}=e;const a="fixed"===n,i=ja(r),o=!!t&&Ta(t.floating);if(r===i||o&&a)return s;let l={scrollLeft:0,scrollTop:0},c=ea(1);const d=ea(0),u=_a(r);if((u||!u&&!a)&&(("body"!==ba(r)||Sa(i))&&(l=Ia(r)),_a(r))){const e=Wa(r);c=Ua(r),d.x=e.x+r.clientLeft,d.y=e.y+r.clientTop}return{width:s.width*c.x,height:s.height*c.y,x:s.x*c.x-l.scrollLeft*c.x+d.x,y:s.y*c.y-l.scrollTop*c.y+d.y}},getDocumentElement:ja,getClippingRect:function(e){let{element:t,boundary:s,rootBoundary:r,strategy:n}=e;const a=[..."clippingAncestors"===s?Ta(t)?[]:function(e,t){const s=t.get(e);if(s)return s;let r=Fa(e,[],!1).filter(e=>ka(e)&&"body"!==ba(e)),n=null;const a="fixed"===Aa(e).position;let i=a?Oa(e):e;for(;ka(i)&&!Da(i);){const t=Aa(i),s=Pa(i);s||"fixed"!==t.position||(n=null),(a?!s&&!n:!s&&"static"===t.position&&n&&["absolute","fixed"].includes(n.position)||Sa(i)&&!s&&Za(e,i))?r=r.filter(e=>e!==i):n=t,i=Oa(i)}return t.set(e,r),r}(t,this._c):[].concat(s),r],i=a[0],o=a.reduce((e,s)=>{const r=Ka(t,s,n);return e.top=Qn(r.top,e.top),e.right=Yn(r.right,e.right),e.bottom=Yn(r.bottom,e.bottom),e.left=Qn(r.left,e.left),e},Ka(t,i,n));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:Qa,getElementRects:function(e){return ne(this,null,function*(){const t=this.getOffsetParent||Qa,s=this.getDimensions,r=yield s(e.floating);return{reference:Ha(e.reference,yield t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}})},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:s}=$a(e);return{width:t,height:s}},getScale:Ua,isElement:ka,isRTL:function(e){return"rtl"===Aa(e).direction}};function Ja(e,t,s,r){void 0===r&&(r={});const{ancestorScroll:n=!0,ancestorResize:a=!0,elementResize:i="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,c=za(e),d=n||a?[...c?Fa(c):[],...Fa(t)]:[];d.forEach(e=>{n&&e.addEventListener("scroll",s,{passive:!0}),a&&e.addEventListener("resize",s)});const u=c&&o?function(e,t){let s,r=null;const n=ja(e);function a(){var e;clearTimeout(s),null==(e=r)||e.disconnect(),r=null}return function i(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),a();const{left:c,top:d,width:u,height:m}=e.getBoundingClientRect();if(o||t(),!u||!m)return;const h={rootMargin:-Jn(d)+"px "+-Jn(n.clientWidth-(c+u))+"px "+-Jn(n.clientHeight-(d+m))+"px "+-Jn(c)+"px",threshold:Qn(0,Yn(1,l))||1};let p=!0;function f(e){const t=e[0].intersectionRatio;if(t!==l){if(!p)return i();t?i(!1,t):s=setTimeout(()=>{i(!1,1e-7)},1e3)}p=!1}try{r=new IntersectionObserver(f,Y(G({},h),{root:n.ownerDocument}))}catch(g){r=new IntersectionObserver(f,h)}r.observe(e)}(!0),a}(c,s):null;let m,h=-1,p=null;i&&(p=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),s()}),c&&!l&&p.observe(c),p.observe(t));let f=l?Wa(e):null;return l&&function t(){const r=Wa(e);!f||r.x===f.x&&r.y===f.y&&r.width===f.width&&r.height===f.height||s();f=r,m=requestAnimationFrame(t)}(),s(),()=>{var e;d.forEach(e=>{n&&e.removeEventListener("scroll",s),a&&e.removeEventListener("resize",s)}),null==u||u(),null==(e=p)||e.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const ei=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn(t){return ne(this,null,function*(){var s,r;const{x:n,y:a,placement:i,middlewareData:o}=t,l=yield function(e,t){return ne(this,null,function*(){const{placement:s,platform:r,elements:n}=e,a=yield null==r.isRTL?void 0:r.isRTL(n.floating),i=aa(s),o=ia(s),l="y"===ca(s),c=["left","top"].includes(i)?-1:1,d=a&&l?-1:1,u=na(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return o&&"number"==typeof p&&(h="end"===o?-1*p:p),l?{x:h*d,y:m*c}:{x:m*c,y:h*d}})}(t,e);return i===(null==(s=o.offset)?void 0:s.placement)&&null!=(r=o.arrow)&&r.alignmentOffset?{}:{x:n+l.x,y:a+l.y,data:Y(G({},l),{placement:i})}})}}},ti=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn(t){return ne(this,null,function*(){const{x:s,y:r,placement:n}=t,a=na(e,t),{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:e=>{let{x:t,y:s}=e;return{x:t,y:s}}}}=a,c=Q(a,["mainAxis","crossAxis","limiter"]),d={x:s,y:r},u=yield ga(t,c),m=ca(aa(n)),h=oa(m);let p=d[h],f=d[m];if(i){const e="y"===h?"bottom":"right";p=ra(p+u["y"===h?"top":"left"],p,p-u[e])}if(o){const e="y"===m?"bottom":"right";f=ra(f+u["y"===m?"top":"left"],f,f-u[e])}const g=l.fn(Y(G({},t),{[h]:p,[m]:f}));return Y(G({},g),{data:{x:g.x-s,y:g.y-r,enabled:{[h]:i,[m]:o}}})})}}},si=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn(t){return ne(this,null,function*(){var s,r;const{placement:n,middlewareData:a,rects:i,initialPlacement:o,platform:l,elements:c}=t,d=na(e,t),{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:g=!0}=d,x=Q(d,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]);if(null!=(s=a.arrow)&&s.alignmentOffset)return{};const v=aa(n),y=ca(o),b=aa(o)===o,w=yield null==l.isRTL?void 0:l.isRTL(c.floating),j=h||(b||!g?[ma(o)]:function(e){const t=ma(e);return[ua(e),t,ua(t)]}(o)),N="none"!==f;!h&&N&&j.push(...function(e,t,s,r){const n=ia(e);let a=function(e,t,s){const r=["left","right"],n=["right","left"],a=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return s?t?n:r:t?r:n;case"left":case"right":return t?a:i;default:return[]}}(aa(e),"start"===s,r);return n&&(a=a.map(e=>e+"-"+n),t&&(a=a.concat(a.map(ua)))),a}(o,g,f,w));const k=[o,...j],_=yield ga(t,x),C=[];let S=(null==(r=a.flip)?void 0:r.overflows)||[];if(u&&C.push(_[v]),m){const e=function(e,t,s){void 0===s&&(s=!1);const r=ia(e),n=da(e),a=la(n);let i="x"===n?r===(s?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=ma(i)),[i,ma(i)]}(n,i,w);C.push(_[e[0]],_[e[1]])}if(S=[...S,{placement:n,overflows:C}],!C.every(e=>e<=0)){var E,T;const e=((null==(E=a.flip)?void 0:E.index)||0)+1,t=k[e];if(t)return{data:{index:e,overflows:S},reset:{placement:t}};let s=null==(T=S.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:T.placement;if(!s)switch(p){case"bestFit":{var P;const e=null==(P=S.filter(e=>{if(N){const t=ca(e.placement);return t===y||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:P[0];e&&(s=e);break}case"initialPlacement":s=o}if(n!==s)return{reset:{placement:s}}}return{}})}}},ri=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn(t){return ne(this,null,function*(){var s,r;const{placement:n,rects:a,platform:i,elements:o}=t,l=na(e,t),{apply:c=()=>{}}=l,d=Q(l,["apply"]),u=yield ga(t,d),m=aa(n),h=ia(n),p="y"===ca(n),{width:f,height:g}=a.floating;let x,v;"top"===m||"bottom"===m?(x=m,v=h===((yield null==i.isRTL?void 0:i.isRTL(o.floating))?"start":"end")?"left":"right"):(v=m,x="end"===h?"top":"bottom");const y=g-u.top-u.bottom,b=f-u.left-u.right,w=Yn(g-u[x],y),j=Yn(f-u[v],b),N=!t.middlewareData.shift;let k=w,_=j;if(null!=(s=t.middlewareData.shift)&&s.enabled.x&&(_=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(k=y),N&&!h){const e=Qn(u.left,0),t=Qn(u.right,0),s=Qn(u.top,0),r=Qn(u.bottom,0);p?_=f-2*(0!==e||0!==t?e+t:Qn(u.left,u.right)):k=g-2*(0!==s||0!==r?s+r:Qn(u.top,u.bottom))}yield c(Y(G({},t),{availableWidth:_,availableHeight:k}));const C=yield i.getDimensions(o.floating);return f!==C.width||g!==C.height?{reset:{rects:!0}}:{}})}}},ni=function(e){return void 0===e&&(e={}),{name:"hide",options:e,fn(t){return ne(this,null,function*(){const{rects:s}=t,r=na(e,t),{strategy:n="referenceHidden"}=r,a=Q(r,["strategy"]);switch(n){case"referenceHidden":{const e=xa(yield ga(t,Y(G({},a),{elementContext:"reference"})),s.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:va(e)}}}case"escaped":{const e=xa(yield ga(t,Y(G({},a),{altBoundary:!0})),s.floating);return{data:{escapedOffsets:e,escaped:va(e)}}}default:return{}}})}}},ai=e=>({name:"arrow",options:e,fn(t){return ne(this,null,function*(){const{x:s,y:r,placement:n,rects:a,platform:i,elements:o,middlewareData:l}=t,{element:c,padding:d=0}=na(e,t)||{};if(null==c)return{};const u=ha(d),m={x:s,y:r},h=da(n),p=la(h),f=yield i.getDimensions(c),g="y"===h,x=g?"top":"left",v=g?"bottom":"right",y=g?"clientHeight":"clientWidth",b=a.reference[p]+a.reference[h]-m[h]-a.floating[p],w=m[h]-a.reference[h],j=yield null==i.getOffsetParent?void 0:i.getOffsetParent(c);let N=j?j[y]:0;N&&(yield null==i.isElement?void 0:i.isElement(j))||(N=o.floating[y]||a.floating[p]);const k=b/2-w/2,_=N/2-f[p]/2-1,C=Yn(u[x],_),S=Yn(u[v],_),E=C,T=N-f[p]-S,P=N/2-f[p]/2+k,R=ra(E,P,T),D=!l.arrow&&null!=ia(n)&&P!==R&&a.reference[p]/2-(P<E?C:S)-f[p]/2<0,A=D?P<E?P-E:P-T:0;return{[h]:m[h]+A,data:G({[h]:R,centerOffset:P-R-A},D&&{alignmentOffset:A}),reset:D}})}}),ii=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:s,y:r,placement:n,rects:a,middlewareData:i}=t,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=na(e,t),d={x:s,y:r},u=ca(n),m=oa(u);let h=d[m],p=d[u];const f=na(o,t),g="number"==typeof f?{mainAxis:f,crossAxis:0}:G({mainAxis:0,crossAxis:0},f);if(l){const e="y"===m?"height":"width",t=a.reference[m]-a.floating[e]+g.mainAxis,s=a.reference[m]+a.reference[e]-g.mainAxis;h<t?h=t:h>s&&(h=s)}if(c){var x,v;const e="y"===m?"width":"height",t=["top","left"].includes(aa(n)),s=a.reference[u]-a.floating[e]+(t&&(null==(x=i.offset)?void 0:x[u])||0)+(t?0:g.crossAxis),r=a.reference[u]+a.reference[e]+(t?0:(null==(v=i.offset)?void 0:v[u])||0)-(t?g.crossAxis:0);p<s?p=s:p>r&&(p=r)}return{[m]:h,[u]:p}}}},oi=(e,t,s)=>{const r=new Map,n=G({platform:Xa},s),a=Y(G({},n.platform),{_c:r});return((e,t,s)=>ne(void 0,null,function*(){const{placement:r="bottom",strategy:n="absolute",middleware:a=[],platform:i}=s,o=a.filter(Boolean),l=yield null==i.isRTL?void 0:i.isRTL(t);let c=yield i.getElementRects({reference:e,floating:t,strategy:n}),{x:d,y:u}=fa(c,r,l),m=r,h={},p=0;for(let s=0;s<o.length;s++){const{name:a,fn:f}=o[s],{x:g,y:x,data:v,reset:y}=yield f({x:d,y:u,initialPlacement:r,placement:m,strategy:n,middlewareData:h,rects:c,platform:i,elements:{reference:e,floating:t}});d=null!=g?g:d,u=null!=x?x:u,h=Y(G({},h),{[a]:G(G({},h[a]),v)}),y&&p<=50&&(p++,"object"==typeof y&&(y.placement&&(m=y.placement),y.rects&&(c=!0===y.rects?yield i.getElementRects({reference:e,floating:t,strategy:n}):y.rects),({x:d,y:u}=fa(c,m,l))),s=-1)}return{x:d,y:u,placement:m,strategy:n,middlewareData:h}}))(e,t,Y(G({},n),{platform:a}))};var li="undefined"!=typeof document?wt.useLayoutEffect:wt.useEffect;function ci(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let s,r,n;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(r=s;0!==r--;)if(!ci(e[r],t[r]))return!1;return!0}if(n=Object.keys(e),s=n.length,s!==Object.keys(t).length)return!1;for(r=s;0!==r--;)if(!{}.hasOwnProperty.call(t,n[r]))return!1;for(r=s;0!==r--;){const s=n[r];if(("_owner"!==s||!e.$$typeof)&&!ci(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}function di(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ui(e,t){const s=di(e);return Math.round(t*s)/s}function mi(e){const t=wt.useRef(e);return li(()=>{t.current=e}),t}const hi=(e,t)=>Y(G({},ei(e)),{options:[e,t]}),pi=(e,t)=>Y(G({},ti(e)),{options:[e,t]}),fi=(e,t)=>Y(G({},ii(e)),{options:[e,t]}),gi=(e,t)=>Y(G({},si(e)),{options:[e,t]}),xi=(e,t)=>Y(G({},ri(e)),{options:[e,t]}),vi=(e,t)=>Y(G({},ni(e)),{options:[e,t]}),yi=(e,t)=>Y(G({},(e=>({name:"arrow",options:e,fn(t){const{element:s,padding:r}="function"==typeof e?e(t):e;return s&&(n=s,{}.hasOwnProperty.call(n,"current"))?null!=s.current?ai({element:s.current,padding:r}).fn(t):{}:s?ai({element:s,padding:r}).fn(t):{};var n}}))(e)),{options:[e,t]});var bi=wt.forwardRef((e,t)=>{const s=e,{children:r,width:n=10,height:a=5}=s,i=Q(s,["children","width","height"]);return ae.jsx(ds.svg,Y(G({},i),{ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:ae.jsx("polygon",{points:"0,0 30,0 15,10"})}))});bi.displayName="Arrow";var wi=bi;function ji(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:s,scopeName:r})=>{const n=s(e)[`__scope${r}`];return G(G({},t),n)},{});return wt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}var Ni="Popper",[ki,_i]=function(e,t=[]){let s=[];const r=()=>{const t=s.map(e=>wt.createContext(e));return function(s){const r=(null==s?void 0:s[e])||t;return wt.useMemo(()=>({[`__scope${e}`]:Y(G({},s),{[e]:r})}),[s,r])}};return r.scopeName=e,[function(t,r){const n=wt.createContext(r),a=s.length;function i(t){const s=t,{scope:r,children:i}=s,o=Q(s,["scope","children"]),l=(null==r?void 0:r[e][a])||n,c=wt.useMemo(()=>o,Object.values(o));return ae.jsx(l.Provider,{value:c,children:i})}return s=[...s,r],i.displayName=t+"Provider",[i,function(s,i){const o=(null==i?void 0:i[e][a])||n,l=wt.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${s}\` must be used within \`${t}\``)}]},ji(r,...t)]}(Ni),[Ci,Si]=ki(Ni),Ei=e=>{const{__scopePopper:t,children:s}=e,[r,n]=wt.useState(null);return ae.jsx(Ci,{scope:t,anchor:r,onAnchorChange:n,children:s})};Ei.displayName=Ni;var Ti="PopperAnchor",Pi=wt.forwardRef((e,t)=>{const s=e,{__scopePopper:r,virtualRef:n}=s,a=Q(s,["__scopePopper","virtualRef"]),i=Si(Ti,r),o=wt.useRef(null),l=ts(t,o);return wt.useEffect(()=>{i.onAnchorChange((null==n?void 0:n.current)||o.current)}),n?null:ae.jsx(ds.div,Y(G({},a),{ref:l}))});Pi.displayName=Ti;var Ri="PopperContent",[Di,Ai]=ki(Ri),Ii=wt.forwardRef((e,t)=>{var s,r,n,a,i,o,l,c;const d=e,{__scopePopper:u,side:m="bottom",sideOffset:h=0,align:p="center",alignOffset:f=0,arrowPadding:g=0,avoidCollisions:x=!0,collisionBoundary:v=[],collisionPadding:y=0,sticky:b="partial",hideWhenDetached:w=!1,updatePositionStrategy:j="optimized",onPlaced:N}=d,k=Q(d,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),_=Si(Ri,u),[C,S]=wt.useState(null),E=ts(t,e=>S(e)),[T,P]=wt.useState(null),R=function(e){const[t,s]=wt.useState(void 0);return ks(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let n,a;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;n=t.inlineSize,a=t.blockSize}else n=e.offsetWidth,a=e.offsetHeight;s({width:n,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}s(void 0)},[e]),t}(T),D=null!=(s=null==R?void 0:R.width)?s:0,A=null!=(r=null==R?void 0:R.height)?r:0,I=m+("center"!==p?"-"+p:""),O="number"==typeof y?y:G({top:0,right:0,bottom:0,left:0},y),M=Array.isArray(v)?v:[v],F=M.length>0,L={padding:O,boundary:M.filter(Li),altBoundary:F},{refs:$,floatingStyles:z,placement:U,isPositioned:V,middlewareData:B}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:r=[],platform:n,elements:{reference:a,floating:i}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[d,u]=wt.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[m,h]=wt.useState(r);ci(m,r)||h(r);const[p,f]=wt.useState(null),[g,x]=wt.useState(null),v=wt.useCallback(e=>{e!==j.current&&(j.current=e,f(e))},[]),y=wt.useCallback(e=>{e!==N.current&&(N.current=e,x(e))},[]),b=a||p,w=i||g,j=wt.useRef(null),N=wt.useRef(null),k=wt.useRef(d),_=null!=l,C=mi(l),S=mi(n),E=mi(c),T=wt.useCallback(()=>{if(!j.current||!N.current)return;const e={placement:t,strategy:s,middleware:m};S.current&&(e.platform=S.current),oi(j.current,N.current,e).then(e=>{const t=Y(G({},e),{isPositioned:!1!==E.current});P.current&&!ci(k.current,t)&&(k.current=t,bt.flushSync(()=>{u(t)}))})},[m,t,s,S,E]);li(()=>{!1===c&&k.current.isPositioned&&(k.current.isPositioned=!1,u(e=>Y(G({},e),{isPositioned:!1})))},[c]);const P=wt.useRef(!1);li(()=>(P.current=!0,()=>{P.current=!1}),[]),li(()=>{if(b&&(j.current=b),w&&(N.current=w),b&&w){if(C.current)return C.current(b,w,T);T()}},[b,w,T,C,_]);const R=wt.useMemo(()=>({reference:j,floating:N,setReference:v,setFloating:y}),[v,y]),D=wt.useMemo(()=>({reference:b,floating:w}),[b,w]),A=wt.useMemo(()=>{const e={position:s,left:0,top:0};if(!D.floating)return e;const t=ui(D.floating,d.x),r=ui(D.floating,d.y);return o?G(Y(G({},e),{transform:"translate("+t+"px, "+r+"px)"}),di(D.floating)>=1.5&&{willChange:"transform"}):{position:s,left:t,top:r}},[s,o,D.floating,d.x,d.y]);return wt.useMemo(()=>Y(G({},d),{update:T,refs:R,elements:D,floatingStyles:A}),[d,T,R,D,A])}({strategy:"fixed",placement:I,whileElementsMounted:(...e)=>Ja(...e,{animationFrame:"always"===j}),elements:{reference:_.anchor},middleware:[hi({mainAxis:h+A,alignmentAxis:f}),x&&pi(G({mainAxis:!0,crossAxis:!1,limiter:"partial"===b?fi():void 0},L)),x&&gi(G({},L)),xi(Y(G({},L),{apply:({elements:e,rects:t,availableWidth:s,availableHeight:r})=>{const{width:n,height:a}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${s}px`),i.setProperty("--radix-popper-available-height",`${r}px`),i.setProperty("--radix-popper-anchor-width",`${n}px`),i.setProperty("--radix-popper-anchor-height",`${a}px`)}})),T&&yi({element:T,padding:g}),$i({arrowWidth:D,arrowHeight:A}),w&&vi(G({strategy:"referenceHidden"},L))]}),[W,q]=zi(U),K=ms(N);ks(()=>{V&&(null==K||K())},[V,K]);const Z=null==(n=B.arrow)?void 0:n.x,H=null==(a=B.arrow)?void 0:a.y,X=0!==(null==(i=B.arrow)?void 0:i.centerOffset),[J,ee]=wt.useState();return ks(()=>{C&&ee(window.getComputedStyle(C).zIndex)},[C]),ae.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:G(Y(G({},z),{transform:V?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[null==(o=B.transformOrigin)?void 0:o.x,null==(l=B.transformOrigin)?void 0:l.y].join(" ")}),(null==(c=B.hide)?void 0:c.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}),dir:e.dir,children:ae.jsx(Di,{scope:u,placedSide:W,onArrowChange:P,arrowX:Z,arrowY:H,shouldHideArrow:X,children:ae.jsx(ds.div,Y(G({"data-side":W,"data-align":q},k),{ref:E,style:Y(G({},k.style),{animation:V?void 0:"none"})}))})})});Ii.displayName=Ri;var Oi="PopperArrow",Mi={top:"bottom",right:"left",bottom:"top",left:"right"},Fi=wt.forwardRef(function(e,t){const s=e,{__scopePopper:r}=s,n=Q(s,["__scopePopper"]),a=Ai(Oi,r),i=Mi[a.placedSide];return ae.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:ae.jsx(wi,Y(G({},n),{ref:t,style:Y(G({},n.style),{display:"block"})}))})});function Li(e){return null!==e}Fi.displayName=Oi;var $i=e=>({name:"transformOrigin",options:e,fn(t){var s,r,n,a,i;const{placement:o,rects:l,middlewareData:c}=t,d=0!==(null==(s=c.arrow)?void 0:s.centerOffset),u=d?0:e.arrowWidth,m=d?0:e.arrowHeight,[h,p]=zi(o),f={start:"0%",center:"50%",end:"100%"}[p],g=(null!=(n=null==(r=c.arrow)?void 0:r.x)?n:0)+u/2,x=(null!=(i=null==(a=c.arrow)?void 0:a.y)?i:0)+m/2;let v="",y="";return"bottom"===h?(v=d?f:`${g}px`,y=-m+"px"):"top"===h?(v=d?f:`${g}px`,y=`${l.floating.height+m}px`):"right"===h?(v=-m+"px",y=d?f:`${x}px`):"left"===h&&(v=`${l.floating.width+m}px`,y=d?f:`${x}px`),{data:{x:v,y:y}}}});function zi(e){const[t,s="center"]=e.split("-");return[t,s]}var Ui=Ei,Vi=Pi,Bi=Ii,Wi=Fi,[qi,Ki]=ls("Tooltip",[_i]),Zi=_i(),Hi="TooltipProvider",Gi=700,Yi="tooltip.open",[Qi,Xi]=qi(Hi),Ji=e=>{const{__scopeTooltip:t,delayDuration:s=Gi,skipDelayDuration:r=300,disableHoverableContent:n=!1,children:a}=e,[i,o]=wt.useState(!0),l=wt.useRef(!1),c=wt.useRef(0);return wt.useEffect(()=>{const e=c.current;return()=>window.clearTimeout(e)},[]),ae.jsx(Qi,{scope:t,isOpenDelayed:i,delayDuration:s,onOpen:wt.useCallback(()=>{window.clearTimeout(c.current),o(!1)},[]),onClose:wt.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o(!0),r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:wt.useCallback(e=>{l.current=e},[]),disableHoverableContent:n,children:a})};Ji.displayName=Hi;var eo="Tooltip",[to,so]=qi(eo),ro="TooltipTrigger";wt.forwardRef((e,t)=>{const s=e,{__scopeTooltip:r}=s,n=Q(s,["__scopeTooltip"]),a=so(ro,r),i=Xi(ro,r),o=Zi(r),l=ts(t,wt.useRef(null),a.onTriggerChange),c=wt.useRef(!1),d=wt.useRef(!1),u=wt.useCallback(()=>c.current=!1,[]);return wt.useEffect(()=>()=>document.removeEventListener("pointerup",u),[u]),ae.jsx(Vi,Y(G({asChild:!0},o),{children:ae.jsx(ds.button,Y(G({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},n),{ref:l,onPointerMove:Jt(e.onPointerMove,e=>{"touch"!==e.pointerType&&(d.current||i.isPointerInTransitRef.current||(a.onTriggerEnter(),d.current=!0))}),onPointerLeave:Jt(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Jt(e.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",u,{once:!0})}),onFocus:Jt(e.onFocus,()=>{c.current||a.onOpen()}),onBlur:Jt(e.onBlur,a.onClose),onClick:Jt(e.onClick,a.onClose)}))}))}).displayName=ro;var[no,ao]=qi("TooltipPortal",{forceMount:void 0}),io="TooltipContent",oo=wt.forwardRef((e,t)=>{const s=ao(io,e.__scopeTooltip),r=e,{forceMount:n=s.forceMount,side:a="top"}=r,i=Q(r,["forceMount","side"]),o=so(io,e.__scopeTooltip);return ae.jsx(Cs,{present:n||o.open,children:o.disableHoverableContent?ae.jsx(mo,Y(G({side:a},i),{ref:t})):ae.jsx(lo,Y(G({side:a},i),{ref:t}))})}),lo=wt.forwardRef((e,t)=>{const s=so(io,e.__scopeTooltip),r=Xi(io,e.__scopeTooltip),n=wt.useRef(null),a=ts(t,n),[i,o]=wt.useState(null),{trigger:l,onClose:c}=s,d=n.current,{onPointerInTransitChange:u}=r,m=wt.useCallback(()=>{o(null),u(!1)},[u]),h=wt.useCallback((e,t)=>{const s=e.currentTarget,r={x:e.clientX,y:e.clientY},n=function(e,t,s=5){const r=[];switch(t){case"top":r.push({x:e.x-s,y:e.y+s},{x:e.x+s,y:e.y+s});break;case"bottom":r.push({x:e.x-s,y:e.y-s},{x:e.x+s,y:e.y-s});break;case"left":r.push({x:e.x+s,y:e.y-s},{x:e.x+s,y:e.y+s});break;case"right":r.push({x:e.x-s,y:e.y-s},{x:e.x-s,y:e.y+s})}return r}(r,function(e,t){const s=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),n=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(s,r,n,a)){case a:return"left";case n:return"right";case s:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,s.getBoundingClientRect())),a=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(s.y-r.y)>=(e.y-r.y)*(s.x-r.x)))break;t.pop()}t.push(s)}t.pop();const s=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;s.length>=2;){const e=s[s.length-1],r=s[s.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;s.pop()}s.push(t)}return s.pop(),1===t.length&&1===s.length&&t[0].x===s[0].x&&t[0].y===s[0].y?t:t.concat(s)}(t)}([...n,...function(e){const{top:t,right:s,bottom:r,left:n}=e;return[{x:n,y:t},{x:s,y:t},{x:s,y:r},{x:n,y:r}]}(t.getBoundingClientRect())]);o(a),u(!0)},[u]);return wt.useEffect(()=>()=>m(),[m]),wt.useEffect(()=>{if(l&&d){const e=e=>h(e,d),t=e=>h(e,l);return l.addEventListener("pointerleave",e),d.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),d.removeEventListener("pointerleave",t)}}},[l,d,h,m]),wt.useEffect(()=>{if(i){const e=e=>{const t=e.target,s={x:e.clientX,y:e.clientY},r=(null==l?void 0:l.contains(t))||(null==d?void 0:d.contains(t)),n=!function(e,t){const{x:s,y:r}=e;let n=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const e=t[a].x,o=t[a].y,l=t[i].x,c=t[i].y;o>r!=c>r&&s<(l-e)*(r-o)/(c-o)+e&&(n=!n)}return n}(s,i);r?m():n&&(m(),c())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,d,i,c,m]),ae.jsx(mo,Y(G({},e),{ref:a}))}),[co,uo]=qi(eo,{isInside:!1}),mo=wt.forwardRef((e,t)=>{const s=e,{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o}=s,l=Q(s,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),c=so(io,r),d=Zi(r),{onClose:u}=c;return wt.useEffect(()=>(document.addEventListener(Yi,u),()=>document.removeEventListener(Yi,u)),[u]),wt.useEffect(()=>{if(c.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(c.trigger))&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),ae.jsx(vs,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:u,children:ae.jsxs(Bi,Y(G(G({"data-state":c.stateAttribute},d),l),{ref:t,style:G(G({},l.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}),children:[ae.jsx(as,{children:n}),ae.jsx(co,{scope:r,isInside:!0,children:ae.jsx(Ps,{id:c.contentId,role:"tooltip",children:a||n})})]}))})});oo.displayName=io;var ho="TooltipArrow";wt.forwardRef((e,t)=>{const s=e,{__scopeTooltip:r}=s,n=Q(s,["__scopeTooltip"]),a=Zi(r);return uo(ho,r).isInside?null:ae.jsx(Wi,Y(G(G({},a),n),{ref:t}))}).displayName=ho;var po=oo;const fo=Ji;wt.forwardRef((e,t)=>{var s=e,{className:r,sideOffset:n=4}=s,a=Q(s,["className","sideOffset"]);return ae.jsx(po,G({ref:t,sideOffset:n,className:fn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},a))}).displayName=po.displayName;var go=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},xo="undefined"==typeof window||"Deno"in globalThis;function vo(){}function yo(e,t){return"function"==typeof e?e(t):e}function bo(e,t){const{type:s="all",exact:r,fetchStatus:n,predicate:a,queryKey:i,stale:o}=e;if(i)if(r){if(t.queryHash!==jo(i,t.options))return!1}else if(!ko(t.queryKey,i))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!n||n===t.state.fetchStatus)&&!(a&&!a(t)))}function wo(e,t){const{exact:s,status:r,predicate:n,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(s){if(No(t.options.mutationKey)!==No(a))return!1}else if(!ko(t.options.mutationKey,a))return!1}return(!r||t.state.status===r)&&!(n&&!n(t))}function jo(e,t){return((null==t?void 0:t.queryKeyHashFn)||No)(e)}function No(e){return JSON.stringify(e,(e,t)=>So(t)?Object.keys(t).sort().reduce((e,s)=>(e[s]=t[s],e),{}):t)}function ko(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some(s=>!ko(e[s],t[s])))}function _o(e,t){if(e===t)return e;const s=Co(e)&&Co(t);if(s||So(e)&&So(t)){const r=s?e:Object.keys(e),n=r.length,a=s?t:Object.keys(t),i=a.length,o=s?[]:{};let l=0;for(let c=0;c<i;c++){const n=s?c:a[c];(!s&&r.includes(n)||s)&&void 0===e[n]&&void 0===t[n]?(o[n]=void 0,l++):(o[n]=_o(e[n],t[n]),o[n]===e[n]&&void 0!==e[n]&&l++)}return n===i&&l===n?e:o}return t}function Co(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function So(e){if(!Eo(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!!Eo(s)&&(!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function Eo(e){return"[object Object]"===Object.prototype.toString.call(e)}function To(e,t,s){return"function"==typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?_o(e,t):t}function Po(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function Ro(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var Do=Symbol();function Ao(e,t){return!e.queryFn&&(null==t?void 0:t.initialPromise)?()=>t.initialPromise:e.queryFn&&e.queryFn!==Do?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var Io=new(r=class extends go{constructor(){super(),ee(this,e),ee(this,t),ee(this,s),te(this,s,e=>{if(!xo&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){J(this,t)||this.setEventListener(J(this,s))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=J(this,t))||e.call(this),te(this,t,void 0))}setEventListener(e){var r;te(this,s,e),null==(r=J(this,t))||r.call(this),te(this,t,e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()}))}setFocused(t){J(this,e)!==t&&(te(this,e,t),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var t;return"boolean"==typeof J(this,e)?J(this,e):"hidden"!==(null==(t=globalThis.document)?void 0:t.visibilityState)}},e=new WeakMap,t=new WeakMap,s=new WeakMap,r),Oo=new(o=class extends go{constructor(){super(),ee(this,n,!0),ee(this,a),ee(this,i),te(this,i,e=>{if(!xo&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){J(this,a)||this.setEventListener(J(this,i))}onUnsubscribe(){var e;this.hasListeners()||(null==(e=J(this,a))||e.call(this),te(this,a,void 0))}setEventListener(e){var t;te(this,i,e),null==(t=J(this,a))||t.call(this),te(this,a,e(this.setOnline.bind(this)))}setOnline(e){J(this,n)!==e&&(te(this,n,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return J(this,n)}},n=new WeakMap,a=new WeakMap,i=new WeakMap,o);function Mo(e){return Math.min(1e3*Z(2,e),3e4)}function Fo(e){return"online"!==(null!=e?e:"online")||Oo.isOnline()}var Lo=class extends Error{constructor(e){super("CancelledError"),this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent}};function $o(e){return e instanceof Lo}function zo(e){let t,s=!1,r=0,n=!1;const a=function(){let e,t;const s=new Promise((s,r)=>{e=s,t=r});function r(e){Object.assign(s,e),delete s.resolve,delete s.reject}return s.status="pending",s.catch(()=>{}),s.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},s.reject=e=>{r({status:"rejected",reason:e}),t(e)},s}(),i=()=>Io.isFocused()&&("always"===e.networkMode||Oo.isOnline())&&e.canRun(),o=()=>Fo(e.networkMode)&&e.canRun(),l=s=>{var r;n||(n=!0,null==(r=e.onSuccess)||r.call(e,s),null==t||t(),a.resolve(s))},c=s=>{var r;n||(n=!0,null==(r=e.onError)||r.call(e,s),null==t||t(),a.reject(s))},d=()=>new Promise(s=>{var r;t=e=>{(n||i())&&s(e)},null==(r=e.onPause)||r.call(e)}).then(()=>{var s;t=void 0,n||null==(s=e.onContinue)||s.call(e)}),u=()=>{if(n)return;let t;const a=0===r?e.initialPromise:void 0;try{t=null!=a?a:e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{var a,o,l;if(n)return;const m=null!=(a=e.retry)?a:xo?0:3,h=null!=(o=e.retryDelay)?o:Mo,p="function"==typeof h?h(r,t):h,f=!0===m||"number"==typeof m&&r<m||"function"==typeof m&&m(r,t);var g;!s&&f?(r++,null==(l=e.onFail)||l.call(e,r,t),(g=p,new Promise(e=>{setTimeout(e,g)})).then(()=>i()?void 0:d()).then(()=>{s?c(t):u()})):c(t)})};return{promise:a,cancel:t=>{var s;n||(c(new Lo(t)),null==(s=e.abort)||s.call(e))},continue:()=>(null==t||t(),a),cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:o,start:()=>(o()?u():d().then(u),a)}}var Uo=function(){let e=[],t=0,s=e=>{e()},r=e=>{e()},n=e=>setTimeout(e,0);const a=r=>{t?e.push(r):n(()=>{s(r)})};return{batch:a=>{let i;t++;try{i=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&n(()=>{r(()=>{t.forEach(e=>{s(e)})})})})()}return i},batchCalls:e=>(...t)=>{a(()=>{e(...t)})},schedule:a,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{n=e}}}(),Vo=(c=class{constructor(){ee(this,l)}destroy(){this.clearGcTimeout()}scheduleGc(){var e;this.clearGcTimeout(),"number"==typeof(e=this.gcTime)&&e>=0&&e!==1/0&&te(this,l,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!=e?e:xo?1/0:3e5)}clearGcTimeout(){J(this,l)&&(clearTimeout(J(this,l)),te(this,l,void 0))}},l=new WeakMap,c),Bo=(v=class extends Vo{constructor(e){var t;super(),ee(this,g),ee(this,d),ee(this,u),ee(this,m),ee(this,h),ee(this,p),ee(this,f),te(this,f,!1),te(this,p,e.defaultOptions),this.setOptions(e.options),this.observers=[],te(this,m,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,te(this,d,function(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,s=void 0!==t,r=s?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}(this.options)),this.state=null!=(t=e.state)?t:J(this,d),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null==(e=J(this,h))?void 0:e.promise}setOptions(e){this.options=G(G({},J(this,p)),e),this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||J(this,m).remove(this)}setData(e,t){const s=To(this.state.data,e,this.options);return se(this,g,x).call(this,{data:s,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt,manual:null==t?void 0:t.manual}),s}setState(e,t){se(this,g,x).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,s;const r=null==(t=J(this,h))?void 0:t.promise;return null==(s=J(this,h))||s.cancel(e),r?r.then(vo).catch(vo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,d))}isActive(){return this.observers.some(e=>{return!1!==(t=e.options.enabled,s=this,"function"==typeof t?t(s):t);var t,s})}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Do||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return!!this.state.isInvalidated||(this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data)}isStaleByTime(e=0){return this.state.isInvalidated||void 0===this.state.data||!function(e,t){return Math.max(e+(t||0)-Date.now(),0)}(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null==t||t.refetch({cancelRefetch:!1}),null==(e=J(this,h))||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null==t||t.refetch({cancelRefetch:!1}),null==(e=J(this,h))||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),J(this,m).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(J(this,h)&&(J(this,f)?J(this,h).cancel({revert:!0}):J(this,h).cancelRetry()),this.scheduleGc()),J(this,m).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||se(this,g,x).call(this,{type:"invalidate"})}fetch(e,t){var s,r,n;if("idle"!==this.state.fetchStatus)if(void 0!==this.state.data&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(J(this,h))return J(this,h).continueRetry(),J(this,h).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const a=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(te(this,f,!0),a.signal)})},o={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:()=>{const e=Ao(this.options,t),s={queryKey:this.queryKey,meta:this.meta};return i(s),te(this,f,!1),this.options.persister?this.options.persister(e,s,this):e(s)}};i(o),null==(s=this.options.behavior)||s.onFetch(o,this),te(this,u,this.state),"idle"!==this.state.fetchStatus&&this.state.fetchMeta===(null==(r=o.fetchOptions)?void 0:r.meta)||se(this,g,x).call(this,{type:"fetch",meta:null==(n=o.fetchOptions)?void 0:n.meta});const l=e=>{var t,s,r,n;$o(e)&&e.silent||se(this,g,x).call(this,{type:"error",error:e}),$o(e)||(null==(s=(t=J(this,m).config).onError)||s.call(t,e,this),null==(n=(r=J(this,m).config).onSettled)||n.call(r,this.state.data,e,this)),this.scheduleGc()};return te(this,h,zo({initialPromise:null==t?void 0:t.initialPromise,fn:o.fetchFn,abort:a.abort.bind(a),onSuccess:e=>{var t,s,r,n;if(void 0!==e){try{this.setData(e)}catch(a){return void l(a)}null==(s=(t=J(this,m).config).onSuccess)||s.call(t,e,this),null==(n=(r=J(this,m).config).onSettled)||n.call(r,e,this.state.error,this),this.scheduleGc()}else l(new Error(`${this.queryHash} data is undefined`))},onError:l,onFail:(e,t)=>{se(this,g,x).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{se(this,g,x).call(this,{type:"pause"})},onContinue:()=>{se(this,g,x).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),J(this,h).start()}},d=new WeakMap,u=new WeakMap,m=new WeakMap,h=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakSet,x=function(e){this.state=(t=>{var s,r;switch(e.type){case"failed":return Y(G({},t),{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return Y(G({},t),{fetchStatus:"paused"});case"continue":return Y(G({},t),{fetchStatus:"fetching"});case"fetch":return Y(G(G({},t),function(e,t){return G({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Fo(t.networkMode)?"fetching":"paused"},void 0===e&&{error:null,status:"pending"})}(t.data,this.options)),{fetchMeta:null!=(s=e.meta)?s:null});case"success":return G(Y(G({},t),{data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(r=e.dataUpdatedAt)?r:Date.now(),error:null,isInvalidated:!1,status:"success"}),!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});case"error":const n=e.error;return $o(n)&&n.revert&&J(this,u)?Y(G({},J(this,u)),{fetchStatus:"idle"}):Y(G({},t),{error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"});case"invalidate":return Y(G({},t),{isInvalidated:!0});case"setState":return G(G({},t),e.state)}})(this.state),Uo.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),J(this,m).notify({query:this,type:"updated",action:e})})},v);var Wo=(b=class extends go{constructor(e={}){super(),ee(this,y),this.config=e,te(this,y,new Map)}build(e,t,s){var r;const n=t.queryKey,a=null!=(r=t.queryHash)?r:jo(n,t);let i=this.get(a);return i||(i=new Bo({cache:this,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){J(this,y).has(e.queryHash)||(J(this,y).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=J(this,y).get(e.queryHash);t&&(e.destroy(),t===e&&J(this,y).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Uo.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,y).get(e)}getAll(){return[...J(this,y).values()]}find(e){const t=G({exact:!0},e);return this.getAll().find(e=>bo(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>bo(e,t)):t}notify(e){Uo.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Uo.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Uo.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},y=new WeakMap,b),qo=(C=class extends Vo{constructor(e){super(),ee(this,k),ee(this,w),ee(this,j),ee(this,N),this.mutationId=e.mutationId,te(this,j,e.mutationCache),te(this,w,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){J(this,w).includes(e)||(J(this,w).push(e),this.clearGcTimeout(),J(this,j).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){te(this,w,J(this,w).filter(t=>t!==e)),this.scheduleGc(),J(this,j).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){J(this,w).length||("pending"===this.state.status?this.scheduleGc():J(this,j).remove(this))}continue(){var e,t;return null!=(t=null==(e=J(this,N))?void 0:e.continue())?t:this.execute(this.state.variables)}execute(e){return ne(this,null,function*(){var t,s,r,n,a,i,o,l,c,d,u,m,h,p,f,g,x,v,y,b,w;te(this,N,zo({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{se(this,k,_).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{se(this,k,_).call(this,{type:"pause"})},onContinue:()=>{se(this,k,_).call(this,{type:"continue"})},retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,j).canRun(this)}));const C="pending"===this.state.status,S=!J(this,N).canStart();try{if(!C){se(this,k,_).call(this,{type:"pending",variables:e,isPaused:S}),yield null==(r=(s=J(this,j).config).onMutate)?void 0:r.call(s,e,this);const t=yield null==(a=(n=this.options).onMutate)?void 0:a.call(n,e);t!==this.state.context&&se(this,k,_).call(this,{type:"pending",context:t,variables:e,isPaused:S})}const t=yield J(this,N).start();return yield null==(o=(i=J(this,j).config).onSuccess)?void 0:o.call(i,t,e,this.state.context,this),yield null==(c=(l=this.options).onSuccess)?void 0:c.call(l,t,e,this.state.context),yield null==(u=(d=J(this,j).config).onSettled)?void 0:u.call(d,t,null,this.state.variables,this.state.context,this),yield null==(h=(m=this.options).onSettled)?void 0:h.call(m,t,null,e,this.state.context),se(this,k,_).call(this,{type:"success",data:t}),t}catch(E){try{throw yield null==(f=(p=J(this,j).config).onError)?void 0:f.call(p,E,e,this.state.context,this),yield null==(x=(g=this.options).onError)?void 0:x.call(g,E,e,this.state.context),yield null==(y=(v=J(this,j).config).onSettled)?void 0:y.call(v,void 0,E,this.state.variables,this.state.context,this),yield null==(w=(b=this.options).onSettled)?void 0:w.call(b,void 0,E,e,this.state.context),E}finally{se(this,k,_).call(this,{type:"error",error:E})}}finally{J(this,j).runNext(this)}})}},w=new WeakMap,j=new WeakMap,N=new WeakMap,k=new WeakSet,_=function(e){this.state=(t=>{switch(e.type){case"failed":return Y(G({},t),{failureCount:e.failureCount,failureReason:e.error});case"pause":return Y(G({},t),{isPaused:!0});case"continue":return Y(G({},t),{isPaused:!1});case"pending":return Y(G({},t),{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return Y(G({},t),{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return Y(G({},t),{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),Uo.batch(()=>{J(this,w).forEach(t=>{t.onMutationUpdate(e)}),J(this,j).notify({mutation:this,type:"updated",action:e})})},C);var Ko=(T=class extends go{constructor(e={}){super(),ee(this,S),ee(this,E),this.config=e,te(this,S,new Map),te(this,E,Date.now())}build(e,t,s){const r=new qo({mutationCache:this,mutationId:++re(this,E)._,options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){var t;const s=Zo(e),r=null!=(t=J(this,S).get(s))?t:[];r.push(e),J(this,S).set(s,r),this.notify({type:"added",mutation:e})}remove(e){var t;const s=Zo(e);if(J(this,S).has(s)){const r=null==(t=J(this,S).get(s))?void 0:t.filter(t=>t!==e);r&&(0===r.length?J(this,S).delete(s):J(this,S).set(s,r))}this.notify({type:"removed",mutation:e})}canRun(e){var t;const s=null==(t=J(this,S).get(Zo(e)))?void 0:t.find(e=>"pending"===e.state.status);return!s||s===e}runNext(e){var t,s;const r=null==(t=J(this,S).get(Zo(e)))?void 0:t.find(t=>t!==e&&t.state.isPaused);return null!=(s=null==r?void 0:r.continue())?s:Promise.resolve()}clear(){Uo.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...J(this,S).values()].flat()}find(e){const t=G({exact:!0},e);return this.getAll().find(e=>wo(t,e))}findAll(e={}){return this.getAll().filter(t=>wo(e,t))}notify(e){Uo.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Uo.batch(()=>Promise.all(e.map(e=>e.continue().catch(vo))))}},S=new WeakMap,E=new WeakMap,T);function Zo(e){var t,s;return null!=(s=null==(t=e.options.scope)?void 0:t.id)?s:String(e.mutationId)}function Ho(e){return{onFetch:(t,s)=>{var r,n,a,i,o;const l=t.options,c=null==(a=null==(n=null==(r=t.fetchOptions)?void 0:r.meta)?void 0:n.fetchMore)?void 0:a.direction,d=(null==(i=t.state.data)?void 0:i.pages)||[],u=(null==(o=t.state.data)?void 0:o.pageParams)||[];let m={pages:[],pageParams:[]},h=0;const p=()=>ne(this,null,function*(){var s;let r=!1;const n=Ao(t.options,t.fetchOptions),a=(e,s,a)=>ne(this,null,function*(){if(r)return Promise.reject();if(null==s&&e.pages.length)return Promise.resolve(e);const i={queryKey:t.queryKey,pageParam:s,direction:a?"backward":"forward",meta:t.options.meta};var o;o=i,Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",()=>{r=!0}),t.signal)});const l=yield n(i),{maxPages:c}=t.options,d=a?Ro:Po;return{pages:d(e.pages,l,c),pageParams:d(e.pageParams,s,c)}});if(c&&d.length){const e="backward"===c,t={pages:d,pageParams:u},s=(e?Yo:Go)(l,t);m=yield a(t,s,e)}else{const t=null!=e?e:d.length;do{const e=0===h?null!=(s=u[0])?s:l.initialPageParam:Go(l,m);if(h>0&&null==e)break;m=yield a(m,e),h++}while(h<t)}return m});t.options.persister?t.fetchFn=()=>{var e,r;return null==(r=(e=t.options).persister)?void 0:r.call(e,p,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=p}}}function Go(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function Yo(e,{pages:t,pageParams:s}){var r;return t.length>0?null==(r=e.getPreviousPageParam)?void 0:r.call(e,t[0],t,s[0],s):void 0}var Qo=(L=class{constructor(e={}){ee(this,P),ee(this,R),ee(this,D),ee(this,A),ee(this,I),ee(this,O),ee(this,M),ee(this,F),te(this,P,e.queryCache||new Wo),te(this,R,e.mutationCache||new Ko),te(this,D,e.defaultOptions||{}),te(this,A,new Map),te(this,I,new Map),te(this,O,0)}mount(){re(this,O)._++,1===J(this,O)&&(te(this,M,Io.subscribe(e=>ne(this,null,function*(){e&&(yield this.resumePausedMutations(),J(this,P).onFocus())}))),te(this,F,Oo.subscribe(e=>ne(this,null,function*(){e&&(yield this.resumePausedMutations(),J(this,P).onOnline())}))))}unmount(){var e,t;re(this,O)._--,0===J(this,O)&&(null==(e=J(this,M))||e.call(this),te(this,M,void 0),null==(t=J(this,F))||t.call(this),te(this,F,void 0))}isFetching(e){return J(this,P).findAll(Y(G({},e),{fetchStatus:"fetching"})).length}isMutating(e){return J(this,R).findAll(Y(G({},e),{status:"pending"})).length}getQueryData(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null==(t=J(this,P).get(s.queryHash))?void 0:t.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(void 0===t)return this.fetchQuery(e);{const s=this.defaultQueryOptions(e),r=J(this,P).build(this,s);return e.revalidateIfStale&&r.isStaleByTime(yo(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(t)}}getQueriesData(e){return J(this,P).findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),n=J(this,P).get(r.queryHash),a=function(e,t){return"function"==typeof e?e(t):e}(t,null==n?void 0:n.state.data);if(void 0!==a)return J(this,P).build(this,r).setData(a,Y(G({},s),{manual:!0}))}setQueriesData(e,t,s){return Uo.batch(()=>J(this,P).findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,s)]))}getQueryState(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null==(t=J(this,P).get(s.queryHash))?void 0:t.state}removeQueries(e){const t=J(this,P);Uo.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const s=J(this,P),r=G({type:"active"},e);return Uo.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const s=G({revert:!0},t),r=Uo.batch(()=>J(this,P).findAll(e).map(e=>e.cancel(s)));return Promise.all(r).then(vo).catch(vo)}invalidateQueries(e={},t={}){return Uo.batch(()=>{var s,r;if(J(this,P).findAll(e).forEach(e=>{e.invalidate()}),"none"===e.refetchType)return Promise.resolve();const n=Y(G({},e),{type:null!=(r=null!=(s=e.refetchType)?s:e.type)?r:"active"});return this.refetchQueries(n,t)})}refetchQueries(e={},t){var s;const r=Y(G({},t),{cancelRefetch:null==(s=null==t?void 0:t.cancelRefetch)||s}),n=Uo.batch(()=>J(this,P).findAll(e).filter(e=>!e.isDisabled()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(vo)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(n).then(vo)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const s=J(this,P).build(this,t);return s.isStaleByTime(yo(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(vo).catch(vo)}fetchInfiniteQuery(e){return e.behavior=Ho(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(vo).catch(vo)}ensureInfiniteQueryData(e){return e.behavior=Ho(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Oo.isOnline()?J(this,R).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,P)}getMutationCache(){return J(this,R)}getDefaultOptions(){return J(this,D)}setDefaultOptions(e){te(this,D,e)}setQueryDefaults(e,t){J(this,A).set(No(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...J(this,A).values()];let s={};return t.forEach(t=>{ko(e,t.queryKey)&&(s=G(G({},s),t.defaultOptions))}),s}setMutationDefaults(e,t){J(this,I).set(No(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...J(this,I).values()];let s={};return t.forEach(t=>{ko(e,t.mutationKey)&&(s=G(G({},s),t.defaultOptions))}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t=Y(G(G(G({},J(this,D).queries),this.getQueryDefaults(e.queryKey)),e),{_defaulted:!0});return t.queryHash||(t.queryHash=jo(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),!0!==t.enabled&&t.queryFn===Do&&(t.enabled=!1),t}defaultMutationOptions(e){return(null==e?void 0:e._defaulted)?e:Y(G(G(G({},J(this,D).mutations),(null==e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{_defaulted:!0})}clear(){J(this,P).clear(),J(this,R).clear()}},P=new WeakMap,R=new WeakMap,D=new WeakMap,A=new WeakMap,I=new WeakMap,O=new WeakMap,M=new WeakMap,F=new WeakMap,L),Xo=wt.createContext(void 0),Jo=({client:e,children:t})=>(wt.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),ae.jsx(Xo.Provider,{value:e,children:t}));const el=At("https://vzqtjhoevvjxdgocnfju.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ6cXRqaG9ldnZqeGRnb2NuZmp1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE4MTk5MjksImV4cCI6MjA3NzM5NTkyOX0.Y_z1NwNMsGtgJk-0opVJv4ZHj0mCSc7taQsuwcA7jJ0",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});class tl{handleError(e,t){throw new Error(gn(e))}executeQuery(e,t){return ne(this,null,function*(){try{const{data:s,error:r}=yield e();if(r&&this.handleError(r,t),!s)throw new Error(`No data returned from ${t}`);return s}catch(s){this.handleError(s,t)}})}}const sl=new class extends tl{getAll(){return ne(this,null,function*(){return this.executeQuery(()=>el.from("events").select("*").order("created_at",{ascending:!1}),"getEvents")})}getById(e){return ne(this,null,function*(){try{const{data:t,error:s}=yield el.from("events").select("*").eq("id",e).single();return s&&"PGRST116"===s.code?null:(s&&this.handleError(s,"getEventById"),t)}catch(t){this.handleError(t,"getEventById")}})}create(e,t){return ne(this,null,function*(){return this.executeQuery(()=>el.from("events").insert([Y(G({},e),{created_by:t,status:"upcoming",volunteers_count:0,created_at:(new Date).toISOString()})]).select().single(),"createEvent")})}update(e,t){return ne(this,null,function*(){return this.executeQuery(()=>el.from("events").update(t).eq("id",e).select().single(),"updateEvent")})}delete(e){return ne(this,null,function*(){yield this.executeQuery(()=>el.from("events").delete().eq("id",e),"deleteEvent")})}getPaginated(e,t=0){return ne(this,null,function*(){try{const{data:s,error:r,count:n}=yield el.from("events").select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(t,t+e-1);return r&&this.handleError(r,"getPaginatedEvents"),{data:s||[],totalCount:n||0,hasMore:(n||0)>t+e,page:Math.floor(t/e)+1,limit:e}}catch(s){this.handleError(s,"getPaginatedEvents")}})}getByUser(e){return ne(this,null,function*(){return this.executeQuery(()=>el.from("events").select("*").eq("created_by",e).order("created_at",{ascending:!1}),"getUserEvents")})}};const rl=new class extends tl{getProfile(e){return ne(this,null,function*(){try{const{data:t,error:s}=yield el.from("user_profiles").select("*").eq("id",e).single();return s&&"PGRST116"===s.code?null:(s&&this.handleError(s,"getUserProfile"),t)}catch(t){this.handleError(t,"getUserProfile")}})}updateProfile(e,t){return ne(this,null,function*(){return this.executeQuery(()=>el.from("user_profiles").update(t).eq("id",e).select().single(),"updateUserProfile")})}createProfile(e){return ne(this,null,function*(){return this.executeQuery(()=>el.from("user_profiles").insert([Y(G({},e),{created_at:(new Date).toISOString()})]).select().single(),"createUserProfile")})}},nl=e=>ne(void 0,null,function*(){try{const t="NAGAR_SETU_AUTH_2024_SECURE";return e===t}catch(t){return!1}}),al=e=>e.trim(),il=wt.createContext(void 0),ol=()=>{const e=wt.useContext(il);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},ll=({children:e})=>{const[t,s]=wt.useState(null),[r,n]=wt.useState(null),[a,i]=wt.useState(null),[o,l]=wt.useState(!0),[c,d]=wt.useState(!1),{toast:u}=Xt();wt.useEffect(()=>{const e=setTimeout(()=>{o&&l(!1)},1e4);return()=>clearTimeout(e)},[o]);const m=wt.useCallback(e=>ne(void 0,null,function*(){try{const t=yield rl.getProfile(e);n(t),t&&t.is_onboarding_complete?d(!1):d(!0)}catch(t){d(!0),n(null)}finally{l(!1)}}),[]);wt.useEffect(()=>{el.auth.getSession().then(({data:{session:e}})=>{var t;i(e),s(null!=(t=null==e?void 0:e.user)?t:null),(null==e?void 0:e.user)?m(e.user.id):l(!1)});const{data:{subscription:e}}=el.auth.onAuthStateChange((e,t)=>ne(void 0,null,function*(){var e;i(t),s(null!=(e=null==t?void 0:t.user)?e:null),(null==t?void 0:t.user)?yield m(t.user.id):(n(null),d(!1),l(!1))}));return()=>e.unsubscribe()},[m]);const h=()=>"authority"===(null==r?void 0:r.user_type),p={currentUser:t,userProfile:r,session:a,loading:o,isNewUser:c,signUp:(e,t,s,r="citizen",a,i)=>ne(void 0,null,function*(){try{if("authority"===r){if(!i)throw new Error("Authority access code is required for authority accounts");const e=al(i);if(!(yield nl(e)))throw new Error("Invalid authority access code")}const{data:l,error:c}=yield el.auth.signUp({email:e,password:t,options:{data:{full_name:s}}});if(c)throw c;if(l.user){d(!0);try{const t=yield rl.createProfile({id:l.user.id,email:l.user.email||e,full_name:s,user_type:r,department:"authority"===r?a:void 0,is_onboarding_complete:!1});n(t)}catch(o){}u({title:"Account created",description:"Please check your email to verify your account."})}}catch(l){const e=gn(l);let t=e;throw e.includes("already registered")?t="An account with this email already exists":e.includes("invalid email")?t="Please enter a valid email address":e.includes("password")?t="Password should be at least 6 characters":e.includes("Invalid authority access code")?t="Invalid authority access code. Please contact your administrator.":e.includes("Authority access code is required")&&(t="Authority access code is required for authority accounts"),u({title:"Sign up failed",description:t,variant:"destructive"}),l}}),signIn:(e,t)=>ne(void 0,null,function*(){var s,r;try{const{data:s,error:r}=yield el.auth.signInWithPassword({email:e,password:t});if(r)throw r}catch(n){let e="Sign in failed";throw e=(null==(s=n.message)?void 0:s.includes("Invalid login credentials"))?"Invalid email or password":(null==(r=n.message)?void 0:r.includes("invalid email"))?"Please enter a valid email address":n.message||"Sign in failed",u({title:"Sign in failed",description:e,variant:"destructive"}),n}}),signInWithGoogle:e=>ne(void 0,null,function*(){var t,s,r,n;try{e&&sessionStorage.setItem("auth_redirect_to",e);const{data:t,error:s}=yield el.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(s)throw s}catch(a){let e="Google sign in failed",i="";throw(null==(t=a.message)?void 0:t.includes("OAuth"))||(null==(s=a.message)?void 0:s.includes("provider"))?(e="Google authentication is not configured",i="Please set up Google OAuth in your Supabase dashboard under Authentication > Providers"):(null==(r=a.message)?void 0:r.includes("Invalid login credentials"))?(e="Google authentication failed",i="Please try again or contact support if the issue persists"):(null==(n=a.message)?void 0:n.includes("redirect"))?(e="Redirect URL configuration error",i="Please check your Google Cloud Console and Supabase redirect URL settings"):(e=a.message||"Google sign in failed",i="Please check the browser console for more details"),u({title:e,description:i,variant:"destructive"}),a}}),logOut:()=>ne(void 0,null,function*(){try{const{error:e}=yield el.auth.signOut();if(e)throw e}catch(e){throw u({title:"Sign out failed",description:e.message,variant:"destructive"}),e}}),updateProfile:e=>ne(void 0,null,function*(){if(!t)throw new Error("No user logged in");try{const s=yield rl.updateProfile(t.id,e);n(s),u({title:"Profile updated",description:"Your profile has been updated successfully."})}catch(s){const e=gn(s);throw u({title:"Update failed",description:e,variant:"destructive"}),s}}),refreshProfile:()=>ne(void 0,null,function*(){if(t)try{yield m(t.id)}catch(e){}}),isAuthority:h,isCitizen:()=>"citizen"===(null==r?void 0:r.user_type),hasPermission:e=>{if(!r)return!1;switch(e){case"manage_issues":case"assign_issues":case"create_events":return h();case"report_issues":case"comment_issues":return!0;default:return!1}}};return ae.jsx(il.Provider,{value:p,children:o?ae.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-blue-600 border-t-transparent mx-auto mb-4"}),ae.jsx("p",{className:"text-gray-600",children:"Initializing Nagar Setu..."})]})}):e})},cl=wt.createContext(void 0),dl=()=>{const e=wt.useContext(cl);if(void 0===e)throw new Error("useLocation must be used within a LocationProvider");return e},ul=({children:e})=>{const[t,s]=wt.useState(null),[r,n]=wt.useState(!1),a="true"===localStorage.getItem("locationPermissionAsked"),i="true"===localStorage.getItem("locationPermissionSkipped"),o=null!==t;wt.useEffect(()=>{const e=localStorage.getItem("userLocation");if(e)try{const t=JSON.parse(e);Date.now()-t.timestamp<864e5?s(t):localStorage.removeItem("userLocation")}catch(t){localStorage.removeItem("userLocation")}a||i||e||setTimeout(()=>{n(!0)},2e3)},[]);const l=e=>{s(e),localStorage.setItem("userLocation",JSON.stringify(e)),localStorage.setItem("locationPermissionAsked","true"),localStorage.removeItem("locationPermissionSkipped")},c={userLocation:t,isLocationAvailable:o,isLocationPermissionAsked:a,showLocationModal:r,setShowLocationModal:n,updateUserLocation:l,clearUserLocation:()=>{s(null),localStorage.removeItem("userLocation")},requestLocationUpdate:()=>ne(void 0,null,function*(){return new Promise(e=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>ne(void 0,null,function*(){const s={lat:t.coords.latitude,lng:t.coords.longitude};try{const t="AIzaSyD7nJAmr4M4-qfzUQtubXAgWpc1P4ATh9E";let r=`${s.lat.toFixed(6)}, ${s.lng.toFixed(6)}`;if(t){const e=yield fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${s.lat},${s.lng}&key=${t}`);if(e.ok){const t=yield e.json();"OK"===t.status&&t.results&&t.results.length>0&&(r=t.results[0].formatted_address)}}const n=Y(G({},s),{address:r,timestamp:Date.now()});l(n),e(n)}catch(r){const t=Y(G({},s),{address:`${s.lat.toFixed(6)}, ${s.lng.toFixed(6)}`,timestamp:Date.now()});l(t),e(t)}}),t=>{e(null)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}):e(null)})})};return ae.jsx(cl.Provider,{value:c,children:e})};class ml extends wt.Component{constructor(){var e;super(...arguments),H(this,"symbol"!=typeof(e="state")?e+"":e,{hasError:!1})}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?this.props.fallback?this.props.fallback:ae.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:ae.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[ae.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),ae.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),ae.jsx("p",{className:"text-gray-600 mb-4",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),ae.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Page"}),!1]})}):this.props.children}}const hl=({size:e="md",message:t="Loading...",fullScreen:s=!1})=>{const r=s?"min-h-screen flex items-center justify-center bg-gray-50":"flex items-center justify-center p-8";return ae.jsx("div",{className:r,children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:`animate-spin rounded-full border-2 border-blue-600 border-t-transparent mx-auto mb-4 ${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[e]}`}),t&&ae.jsx("p",{className:"text-gray-600 text-sm",children:t})]})})},pl=wr("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),fl=wt.forwardRef((e,t)=>{var s=e,{className:r,variant:n,size:a,asChild:i=!1}=s,o=Q(s,["className","variant","size","asChild"]);const l=i?rs:"button";return ae.jsx(l,G({className:fn(pl({variant:n,size:a,className:r})),ref:t},o))});function gl(e,t,{checkForDefaultPrevented:s=!0}={}){return function(r){if(null==e||e(r),!1===s||!r.defaultPrevented)return null==t?void 0:t(r)}}function xl(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function vl(...e){return t=>{let s=!1;const r=e.map(e=>{const r=xl(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){const s=r[t];"function"==typeof s?s():xl(e[t],null)}}}}function yl(...e){return wt.useCallback(vl(...e),e)}function bl(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:s,scopeName:r})=>{const n=s(e)[`__scope${r}`];return G(G({},t),n)},{});return wt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}fl.displayName="Button";var wl=(null==globalThis?void 0:globalThis.document)?wt.useLayoutEffect:()=>{},jl=kt[" useId ".trim().toString()]||(()=>{}),Nl=0;function kl(e){const[t,s]=wt.useState(jl());return wl(()=>{e||s(e=>null!=e?e:String(Nl++))},[e]),e||(t?`radix-${t}`:"")}var _l=kt[" useInsertionEffect ".trim().toString()]||wl;function Cl({prop:e,defaultProp:t,onChange:s=()=>{},caller:r}){const[n,a,i]=function({defaultProp:e,onChange:t}){const[s,r]=wt.useState(e),n=wt.useRef(s),a=wt.useRef(t);return _l(()=>{a.current=t},[t]),wt.useEffect(()=>{var e;n.current!==s&&(null==(e=a.current)||e.call(a,s),n.current=s)},[s,n]),[s,r,a]}({defaultProp:t,onChange:s}),o=void 0!==e,l=o?e:n;{const t=wt.useRef(void 0!==e);wt.useEffect(()=>{const e=t.current;if(e!==o){}t.current=o},[o,r])}const c=wt.useCallback(t=>{var s;if(o){const r=function(e){return"function"==typeof e}(t)?t(e):t;r!==e&&(null==(s=i.current)||s.call(i,r))}else a(t)},[o,e,a,i]);return[l,c]}function Sl(e){const t=El(e),s=wt.forwardRef((e,s)=>{const r=e,{children:n}=r,a=Q(r,["children"]),i=wt.Children.toArray(n),o=i.find(Pl);if(o){const e=o.props.children,r=i.map(t=>t===o?wt.Children.count(e)>1?wt.Children.only(null):wt.isValidElement(e)?e.props.children:null:t);return ae.jsx(t,Y(G({},a),{ref:s,children:wt.isValidElement(e)?wt.cloneElement(e,void 0,r):null}))}return ae.jsx(t,Y(G({},a),{ref:s,children:n}))});return s.displayName=`${e}.Slot`,s}function El(e){const t=wt.forwardRef((e,t)=>{const s=e,{children:r}=s,n=Q(s,["children"]);if(wt.isValidElement(r)){const e=function(e){var t,s;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning;if(n)return e.ref;if(r=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(r),s=function(e,t){const s=G({},t);for(const r in t){const n=e[r],a=t[r];/^on[A-Z]/.test(r)?n&&a?s[r]=(...e)=>{const t=a(...e);return n(...e),t}:n&&(s[r]=n):"style"===r?s[r]=G(G({},n),a):"className"===r&&(s[r]=[n,a].filter(Boolean).join(" "))}return G(G({},e),s)}(n,r.props);return r.type!==wt.Fragment&&(s.ref=t?vl(t,e):e),wt.cloneElement(r,s)}return wt.Children.count(r)>1?wt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Tl=Symbol("radix.slottable");function Pl(e){return wt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===Tl}var Rl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const s=Sl(`Primitive.${t}`),r=wt.forwardRef((e,r)=>{const n=e,{asChild:a}=n,i=Q(n,["asChild"]),o=a?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),ae.jsx(o,Y(G({},i),{ref:r}))});return r.displayName=`Primitive.${t}`,Y(G({},e),{[t]:r})},{});function Dl(e){const t=wt.useRef(e);return wt.useEffect(()=>{t.current=e}),wt.useMemo(()=>(...e)=>{var s;return null==(s=t.current)?void 0:s.call(t,...e)},[])}var Al,Il="dismissableLayer.update",Ol="dismissableLayer.pointerDownOutside",Ml="dismissableLayer.focusOutside",Fl=wt.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ll=wt.forwardRef((e,t)=>{var s;const r=e,{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:l,onDismiss:c}=r,d=Q(r,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),u=wt.useContext(Fl),[m,h]=wt.useState(null),p=null!=(s=null==m?void 0:m.ownerDocument)?s:null==globalThis?void 0:globalThis.document,[,f]=wt.useState({}),g=yl(t,e=>h(e)),x=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=x.indexOf(v),b=m?x.indexOf(m):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,j=b>=y,N=function(e,t=(null==globalThis?void 0:globalThis.document)){const s=Dl(e),r=wt.useRef(!1),n=wt.useRef(()=>{});return wt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){zl(Ol,s,a,{discrete:!0})};const a={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",n.current),n.current=r,t.addEventListener("click",n.current,{once:!0})):r()}else t.removeEventListener("click",n.current);r.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",e),t.removeEventListener("click",n.current)}},[t,s]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,s=[...u.branches].some(e=>e.contains(t));j&&!s&&(null==i||i(e),null==l||l(e),e.defaultPrevented||null==c||c())},p),k=function(e,t=(null==globalThis?void 0:globalThis.document)){const s=Dl(e),r=wt.useRef(!1);return wt.useEffect(()=>{const e=e=>{if(e.target&&!r.current){zl(Ml,s,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,s]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...u.branches].some(e=>e.contains(t))||(null==o||o(e),null==l||l(e),e.defaultPrevented||null==c||c())},p);return function(e,t=(null==globalThis?void 0:globalThis.document)){const s=Dl(e);wt.useEffect(()=>{const e=e=>{"Escape"===e.key&&s(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[s,t])}(e=>{b===u.layers.size-1&&(null==a||a(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},p),wt.useEffect(()=>{if(m)return n&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(Al=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(m)),u.layers.add(m),$l(),()=>{n&&1===u.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=Al)}},[m,p,n,u]),wt.useEffect(()=>()=>{m&&(u.layers.delete(m),u.layersWithOutsidePointerEventsDisabled.delete(m),$l())},[m,u]),wt.useEffect(()=>{const e=()=>f({});return document.addEventListener(Il,e),()=>document.removeEventListener(Il,e)},[]),ae.jsx(Rl.div,Y(G({},d),{ref:g,style:G({pointerEvents:w?j?"auto":"none":void 0},e.style),onFocusCapture:gl(e.onFocusCapture,k.onFocusCapture),onBlurCapture:gl(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:gl(e.onPointerDownCapture,N.onPointerDownCapture)}))});Ll.displayName="DismissableLayer";function $l(){const e=new CustomEvent(Il);document.dispatchEvent(e)}function zl(e,t,s,{discrete:r}){const n=s.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});t&&n.addEventListener(e,t,{once:!0}),r?function(e,t){e&&bt.flushSync(()=>e.dispatchEvent(t))}(n,a):n.dispatchEvent(a)}wt.forwardRef((e,t)=>{const s=wt.useContext(Fl),r=wt.useRef(null),n=yl(t,r);return wt.useEffect(()=>{const e=r.current;if(e)return s.branches.add(e),()=>{s.branches.delete(e)}},[s.branches]),ae.jsx(Rl.div,Y(G({},e),{ref:n}))}).displayName="DismissableLayerBranch";var Ul="focusScope.autoFocusOnMount",Vl="focusScope.autoFocusOnUnmount",Bl={bubbles:!1,cancelable:!0},Wl=wt.forwardRef((e,t)=>{const s=e,{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i}=s,o=Q(s,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[l,c]=wt.useState(null),d=Dl(a),u=Dl(i),m=wt.useRef(null),h=yl(t,e=>c(e)),p=wt.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;wt.useEffect(()=>{if(n){let e=function(e){if(p.paused||!l)return;const t=e.target;l.contains(t)?m.current=t:Hl(m.current,{select:!0})},t=function(e){if(p.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||Hl(m.current,{select:!0}))},s=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Hl(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(s);return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[n,l,p.paused]),wt.useEffect(()=>{if(l){Gl.add(p);const t=document.activeElement;if(!l.contains(t)){const s=new CustomEvent(Ul,Bl);l.addEventListener(Ul,d),l.dispatchEvent(s),s.defaultPrevented||(!function(e,{select:t=!1}={}){const s=document.activeElement;for(const r of e)if(Hl(r,{select:t}),document.activeElement!==s)return}((e=ql(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Hl(l))}return()=>{l.removeEventListener(Ul,d),setTimeout(()=>{const e=new CustomEvent(Vl,Bl);l.addEventListener(Vl,u),l.dispatchEvent(e),e.defaultPrevented||Hl(null!=t?t:document.body,{select:!0}),l.removeEventListener(Vl,u),Gl.remove(p)},0)}}var e},[l,d,u,p]);const f=wt.useCallback(e=>{if(!r&&!n)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[n,a]=function(e){const t=ql(e),s=Kl(t,e),r=Kl(t.reverse(),e);return[s,r]}(t);n&&a?e.shiftKey||s!==a?e.shiftKey&&s===n&&(e.preventDefault(),r&&Hl(a,{select:!0})):(e.preventDefault(),r&&Hl(n,{select:!0})):s===t&&e.preventDefault()}},[r,n,p.paused]);return ae.jsx(Rl.div,Y(G({tabIndex:-1},o),{ref:h,onKeyDown:f}))});function ql(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function Kl(e,t){for(const s of e)if(!Zl(s,{upTo:t}))return s}function Zl(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Hl(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Wl.displayName="FocusScope";var Gl=function(){let e=[];return{add(t){const s=e[0];t!==s&&(null==s||s.pause()),e=Yl(e,t),e.unshift(t)},remove(t){var s;e=Yl(e,t),null==(s=e[0])||s.resume()}}}();function Yl(e,t){const s=[...e],r=s.indexOf(t);return-1!==r&&s.splice(r,1),s}var Ql=wt.forwardRef((e,t)=>{var s;const r=e,{container:n}=r,a=Q(r,["container"]),[i,o]=wt.useState(!1);wl(()=>o(!0),[]);const l=n||i&&(null==(s=null==globalThis?void 0:globalThis.document)?void 0:s.body);return l?Nt.createPortal(ae.jsx(Rl.div,Y(G({},a),{ref:t})),l):null});Ql.displayName="Portal";var Xl=e=>{const{present:t,children:s}=e,r=function(e){const[t,s]=wt.useState(),r=wt.useRef(null),n=wt.useRef(e),a=wt.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return wt.useReducer((e,s)=>{const r=t[e][s];return null!=r?r:e},e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return wt.useEffect(()=>{const e=Jl(r.current);a.current="mounted"===o?e:"none"},[o]),wl(()=>{const t=r.current,s=n.current;if(s!==e){const r=a.current,i=Jl(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(s&&r!==i?"ANIMATION_OUT":"UNMOUNT")}n.current=e}},[e,l]),wl(()=>{var e;if(t){let s;const i=null!=(e=t.ownerDocument.defaultView)?e:window,o=e=>{const a=Jl(r.current).includes(CSS.escape(e.animationName));if(e.target===t&&a&&(l("ANIMATION_END"),!n.current)){const e=t.style.animationFillMode;t.style.animationFillMode="forwards",s=i.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},c=e=>{e.target===t&&(a.current=Jl(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{i.clearTimeout(s),t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:wt.useCallback(e=>{r.current=e?getComputedStyle(e):null,s(e)},[])}}(t),n="function"==typeof s?s({present:r.isPresent}):wt.Children.only(s),a=yl(r.ref,function(e){var t,s;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning;if(n)return e.ref;if(r=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n));return"function"==typeof s||r.isPresent?wt.cloneElement(n,{ref:a}):null};function Jl(e){return(null==e?void 0:e.animationName)||"none"}Xl.displayName="Presence";var ec=0;function tc(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var sc="right-scroll-bar-position",rc="width-before-scroll-bar";function nc(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var ac="undefined"!=typeof window?wt.useLayoutEffect:wt.useEffect,ic=new WeakMap;function oc(e,t){var s,r,n,a=(s=null,r=function(t){return e.forEach(function(e){return nc(e,t)})},(n=wt.useState(function(){return{value:s,callback:r,facade:{get current(){return n.value},set current(e){var t=n.value;t!==e&&(n.value=e,n.callback(e,t))}}}})[0]).callback=r,n.facade);return ac(function(){var t=ic.get(a);if(t){var s=new Set(t),r=new Set(e),n=a.current;s.forEach(function(e){r.has(e)||nc(e,null)}),r.forEach(function(e){s.has(e)||nc(e,n)})}ic.set(a,e)},[e]),a}function lc(e){return e}function cc(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=lc);var s=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(e){var n=t(e,r);return s.push(n),function(){s=s.filter(function(e){return e!==n})}},assignSyncMedium:function(e){for(r=!0;s.length;){var t=s;s=[],t.forEach(e)}s={push:function(t){return e(t)},filter:function(){return s}}},assignMedium:function(e){r=!0;var t=[];if(s.length){var n=s;s=[],n.forEach(e),t=s}var a=function(){var s=t;t=[],s.forEach(e)},i=function(){return Promise.resolve().then(a)};i(),s={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),s}}}}}(null);return t.options=It({async:!0,ssr:!1},e),t}var dc=function(e){var t=e.sideCar,s=Ot(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return wt.createElement(r,It({},s))};function uc(e,t){return e.useMedium(t),dc}dc.isSideCarExport=!0;var mc=cc(),hc=function(){},pc=wt.forwardRef(function(e,t){var s=wt.useRef(null),r=wt.useState({onScrollCapture:hc,onWheelCapture:hc,onTouchMoveCapture:hc}),n=r[0],a=r[1],i=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,m=e.sideCar,h=e.noRelative,p=e.noIsolation,f=e.inert,g=e.allowPinchZoom,x=e.as,v=void 0===x?"div":x,y=e.gapMode,b=Ot(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=m,j=oc([s,t]),N=It(It({},b),n);return wt.createElement(wt.Fragment,null,d&&wt.createElement(w,{sideCar:mc,removeScrollBar:c,shards:u,noRelative:h,noIsolation:p,inert:f,setCallbacks:a,allowPinchZoom:!!g,lockRef:s,gapMode:y}),i?wt.cloneElement(wt.Children.only(o),It(It({},N),{ref:j})):wt.createElement(v,It({},N,{className:l,ref:j}),o))});pc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},pc.classNames={fullWidth:rc,zeroRight:sc};function fc(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var gc=function(){var e=0,t=null;return{add:function(s){var r,n;0==e&&(t=fc())&&(n=s,(r=t).styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xc=function(){var e,t=(e=gc(),function(t,s){wt.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&s])});return function(e){var s=e.styles,r=e.dynamic;return t(s,r),null}},vc={left:0,top:0,right:0,gap:0},yc=function(e){return parseInt(e||"",10)||0},bc=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return vc;var t=function(e){var t=window.getComputedStyle(document.body),s=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],n=t["padding"===e?"paddingRight":"marginRight"];return[yc(s),yc(r),yc(n)]}(e),s=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-s+t[2]-t[0])}},wc=xc(),jc="data-scroll-locked",Nc=function(e,t,s,r){var n=e.left,a=e.top,i=e.right,o=e.gap;return void 0===s&&(s="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(o,"px ").concat(r,";\n  }\n  body[").concat(jc,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===s&&"\n    padding-left: ".concat(n,"px;\n    padding-top: ").concat(a,"px;\n    padding-right: ").concat(i,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(r,";\n    "),"padding"===s&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(sc," {\n    right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(rc," {\n    margin-right: ").concat(o,"px ").concat(r,";\n  }\n  \n  .").concat(sc," .").concat(sc," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(rc," .").concat(rc," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(jc,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},kc=function(){var e=parseInt(document.body.getAttribute(jc)||"0",10);return isFinite(e)?e:0},_c=function(e){var t=e.noRelative,s=e.noImportant,r=e.gapMode,n=void 0===r?"margin":r;wt.useEffect(function(){return document.body.setAttribute(jc,(kc()+1).toString()),function(){var e=kc()-1;e<=0?document.body.removeAttribute(jc):document.body.setAttribute(jc,e.toString())}},[]);var a=wt.useMemo(function(){return bc(n)},[n]);return wt.createElement(wc,{styles:Nc(a,!t,n,s?"":"!important")})},Cc=!1;if("undefined"!=typeof window)try{var Sc=Object.defineProperty({},"passive",{get:function(){return Cc=!0,!0}});window.addEventListener("test",Sc,Sc),window.removeEventListener("test",Sc,Sc)}catch(Aw){Cc=!1}var Ec=!!Cc&&{passive:!1},Tc=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return"hidden"!==s[t]&&!(s.overflowY===s.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===s[t])},Pc=function(e,t){var s=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Rc(e,r)){var n=Dc(e,r);if(n[1]>n[2])return!0}r=r.parentNode}while(r&&r!==s.body);return!1},Rc=function(e,t){return"v"===e?function(e){return Tc(e,"overflowY")}(t):function(e){return Tc(e,"overflowX")}(t)},Dc=function(e,t){return"v"===e?[(s=t).scrollTop,s.scrollHeight,s.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var s},Ac=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ic=function(e){return[e.deltaX,e.deltaY]},Oc=function(e){return e&&"current"in e?e.current:e},Mc=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Fc=0,Lc=[];function $c(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const zc=uc(mc,function(e){var t=wt.useRef([]),s=wt.useRef([0,0]),r=wt.useRef(),n=wt.useState(Fc++)[0],a=wt.useState(xc)[0],i=wt.useRef(e);wt.useEffect(function(){i.current=e},[e]),wt.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var t=Mt([e.lockRef.current],(e.shards||[]).map(Oc),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var o=wt.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var n,a=Ac(e),o=s.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=Pc(u,d);if(!m)return!0;if(m?n=u:(n="v"===u?"h":"v",m=Pc(u,d)),!m)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=n),!n)return!0;var h=r.current||n;return function(e,t,s,r,n){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=a*r,o=s.target,l=t.contains(o),c=!1,d=i>0,u=0,m=0;do{if(!o)break;var h=Dc(e,o),p=h[0],f=h[1]-h[2]-a*p;(p||f)&&Rc(e,o)&&(u+=f,m+=p);var g=o.parentNode;o=g&&g.nodeType===Node.DOCUMENT_FRAGMENT_NODE?g.host:g}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return d&&(Math.abs(u)<1||!n)?c=!0:d||!(Math.abs(m)<1)&&n||(c=!0),c}(h,t,e,"h"===h?l:c,!0)},[]),l=wt.useCallback(function(e){var s=e;if(Lc.length&&Lc[Lc.length-1]===a){var r="deltaY"in s?Ic(s):Ac(s),n=t.current.filter(function(e){return e.name===s.type&&(e.target===s.target||s.target===e.shadowParent)&&(t=e.delta,n=r,t[0]===n[0]&&t[1]===n[1]);var t,n})[0];if(n&&n.should)s.cancelable&&s.preventDefault();else if(!n){var l=(i.current.shards||[]).map(Oc).filter(Boolean).filter(function(e){return e.contains(s.target)});(l.length>0?o(s,l[0]):!i.current.noIsolation)&&s.cancelable&&s.preventDefault()}}},[]),c=wt.useCallback(function(e,s,r,n){var a={name:e,delta:s,target:r,should:n,shadowParent:$c(r)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),d=wt.useCallback(function(e){s.current=Ac(e),r.current=void 0},[]),u=wt.useCallback(function(t){c(t.type,Ic(t),t.target,o(t,e.lockRef.current))},[]),m=wt.useCallback(function(t){c(t.type,Ac(t),t.target,o(t,e.lockRef.current))},[]);wt.useEffect(function(){return Lc.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Ec),document.addEventListener("touchmove",l,Ec),document.addEventListener("touchstart",d,Ec),function(){Lc=Lc.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,Ec),document.removeEventListener("touchmove",l,Ec),document.removeEventListener("touchstart",d,Ec)}},[]);var h=e.removeScrollBar,p=e.inert;return wt.createElement(wt.Fragment,null,p?wt.createElement(a,{styles:Mc(n)}):null,h?wt.createElement(_c,{noRelative:e.noRelative,gapMode:e.gapMode}):null)});var Uc=wt.forwardRef(function(e,t){return wt.createElement(pc,It({},e,{ref:t,sideCar:zc}))});Uc.classNames=pc.classNames;var Vc=new WeakMap,Bc=new WeakMap,Wc={},qc=0,Kc=function(e){return e&&(e.host||Kc(e.parentNode))},Zc=function(e,t,s,r){var n=function(e,t){return t.map(function(t){if(e.contains(t))return t;var s=Kc(t);return s&&e.contains(s)?s:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Wc[s]||(Wc[s]=new WeakMap);var a=Wc[s],i=[],o=new Set,l=new Set(n),c=function(e){e&&!o.has(e)&&(o.add(e),c(e.parentNode))};n.forEach(c);var d=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(o.has(e))d(e);else try{var t=e.getAttribute(r),n=null!==t&&"false"!==t,l=(Vc.get(e)||0)+1,c=(a.get(e)||0)+1;Vc.set(e,l),a.set(e,c),i.push(e),1===l&&n&&Bc.set(e,!0),1===c&&e.setAttribute(s,"true"),n||e.setAttribute(r,"true")}catch(u){}})};return d(t),o.clear(),qc++,function(){i.forEach(function(e){var t=Vc.get(e)-1,n=a.get(e)-1;Vc.set(e,t),a.set(e,n),t||(Bc.has(e)||e.removeAttribute(r),Bc.delete(e)),n||e.removeAttribute(s)}),--qc||(Vc=new WeakMap,Vc=new WeakMap,Bc=new WeakMap,Wc={})}},Hc=function(e,t,s){void 0===s&&(s="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),n=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return n?(r.push.apply(r,Array.from(n.querySelectorAll("[aria-live]"))),Zc(r,n,s,"aria-hidden")):function(){return null}},Gc="Dialog",[Yc,Qc]=function(e,t=[]){let s=[];const r=()=>{const t=s.map(e=>wt.createContext(e));return function(s){const r=(null==s?void 0:s[e])||t;return wt.useMemo(()=>({[`__scope${e}`]:Y(G({},s),{[e]:r})}),[s,r])}};return r.scopeName=e,[function(t,r){const n=wt.createContext(r),a=s.length;s=[...s,r];const i=t=>{var s;const r=t,{scope:i,children:o}=r,l=Q(r,["scope","children"]),c=(null==(s=null==i?void 0:i[e])?void 0:s[a])||n,d=wt.useMemo(()=>l,Object.values(l));return ae.jsx(c.Provider,{value:d,children:o})};return i.displayName=t+"Provider",[i,function(s,i){var o;const l=(null==(o=null==i?void 0:i[e])?void 0:o[a])||n,c=wt.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${s}\` must be used within \`${t}\``)}]},bl(r,...t)]}(Gc),[Xc,Jc]=Yc(Gc),ed=e=>{const{__scopeDialog:t,children:s,open:r,defaultOpen:n,onOpenChange:a,modal:i=!0}=e,o=wt.useRef(null),l=wt.useRef(null),[c,d]=Cl({prop:r,defaultProp:null!=n&&n,onChange:a,caller:Gc});return ae.jsx(Xc,{scope:t,triggerRef:o,contentRef:l,contentId:kl(),titleId:kl(),descriptionId:kl(),open:c,onOpenChange:d,onOpenToggle:wt.useCallback(()=>d(e=>!e),[d]),modal:i,children:s})};ed.displayName=Gc;var td="DialogTrigger";wt.forwardRef((e,t)=>{const s=e,{__scopeDialog:r}=s,n=Q(s,["__scopeDialog"]),a=Jc(td,r),i=yl(t,a.triggerRef);return ae.jsx(Rl.button,Y(G({type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":wd(a.open)},n),{ref:i,onClick:gl(e.onClick,a.onOpenToggle)}))}).displayName=td;var sd="DialogPortal",[rd,nd]=Yc(sd,{forceMount:void 0}),ad=e=>{const{__scopeDialog:t,forceMount:s,children:r,container:n}=e,a=Jc(sd,t);return ae.jsx(rd,{scope:t,forceMount:s,children:wt.Children.map(r,e=>ae.jsx(Xl,{present:s||a.open,children:ae.jsx(Ql,{asChild:!0,container:n,children:e})}))})};ad.displayName=sd;var id="DialogOverlay",od=wt.forwardRef((e,t)=>{const s=nd(id,e.__scopeDialog),r=e,{forceMount:n=s.forceMount}=r,a=Q(r,["forceMount"]),i=Jc(id,e.__scopeDialog);return i.modal?ae.jsx(Xl,{present:n||i.open,children:ae.jsx(cd,Y(G({},a),{ref:t}))}):null});od.displayName=id;var ld=Sl("DialogOverlay.RemoveScroll"),cd=wt.forwardRef((e,t)=>{const s=e,{__scopeDialog:r}=s,n=Q(s,["__scopeDialog"]),a=Jc(id,r);return ae.jsx(Uc,{as:ld,allowPinchZoom:!0,shards:[a.contentRef],children:ae.jsx(Rl.div,Y(G({"data-state":wd(a.open)},n),{ref:t,style:G({pointerEvents:"auto"},n.style)}))})}),dd="DialogContent",ud=wt.forwardRef((e,t)=>{const s=nd(dd,e.__scopeDialog),r=e,{forceMount:n=s.forceMount}=r,a=Q(r,["forceMount"]),i=Jc(dd,e.__scopeDialog);return ae.jsx(Xl,{present:n||i.open,children:i.modal?ae.jsx(md,Y(G({},a),{ref:t})):ae.jsx(hd,Y(G({},a),{ref:t}))})});ud.displayName=dd;var md=wt.forwardRef((e,t)=>{const s=Jc(dd,e.__scopeDialog),r=wt.useRef(null),n=yl(t,s.contentRef,r);return wt.useEffect(()=>{const e=r.current;if(e)return Hc(e)},[]),ae.jsx(pd,Y(G({},e),{ref:n,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gl(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=s.triggerRef.current)||t.focus()}),onPointerDownOutside:gl(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey;(2===t.button||s)&&e.preventDefault()}),onFocusOutside:gl(e.onFocusOutside,e=>e.preventDefault())}))}),hd=wt.forwardRef((e,t)=>{const s=Jc(dd,e.__scopeDialog),r=wt.useRef(!1),n=wt.useRef(!1);return ae.jsx(pd,Y(G({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,i;null==(a=e.onCloseAutoFocus)||a.call(e,t),t.defaultPrevented||(r.current||null==(i=s.triggerRef.current)||i.focus(),t.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:t=>{var a,i;null==(a=e.onInteractOutside)||a.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));const o=t.target;(null==(i=s.triggerRef.current)?void 0:i.contains(o))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}}))}),pd=wt.forwardRef((e,t)=>{const s=e,{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i}=s,o=Q(s,["__scopeDialog","trapFocus","onOpenAutoFocus","onCloseAutoFocus"]),l=Jc(dd,r),c=wt.useRef(null),d=yl(t,c);return wt.useEffect(()=>{var e,t;const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!=(e=s[0])?e:tc()),document.body.insertAdjacentElement("beforeend",null!=(t=s[1])?t:tc()),ec++,()=>{1===ec&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ec--}},[]),ae.jsxs(ae.Fragment,{children:[ae.jsx(Wl,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:ae.jsx(Ll,Y(G({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":wd(l.open)},o),{ref:d,onDismiss:()=>l.onOpenChange(!1)}))}),ae.jsxs(ae.Fragment,{children:[ae.jsx(_d,{titleId:l.titleId}),ae.jsx(Cd,{contentRef:c,descriptionId:l.descriptionId})]})]})}),fd="DialogTitle",gd=wt.forwardRef((e,t)=>{const s=e,{__scopeDialog:r}=s,n=Q(s,["__scopeDialog"]),a=Jc(fd,r);return ae.jsx(Rl.h2,Y(G({id:a.titleId},n),{ref:t}))});gd.displayName=fd;var xd="DialogDescription",vd=wt.forwardRef((e,t)=>{const s=e,{__scopeDialog:r}=s,n=Q(s,["__scopeDialog"]),a=Jc(xd,r);return ae.jsx(Rl.p,Y(G({id:a.descriptionId},n),{ref:t}))});vd.displayName=xd;var yd="DialogClose",bd=wt.forwardRef((e,t)=>{const s=e,{__scopeDialog:r}=s,n=Q(s,["__scopeDialog"]),a=Jc(yd,r);return ae.jsx(Rl.button,Y(G({type:"button"},n),{ref:t,onClick:gl(e.onClick,()=>a.onOpenChange(!1))}))});function wd(e){return e?"open":"closed"}bd.displayName=yd;var jd="DialogTitleWarning",[Nd,kd]=function(e,t){const s=wt.createContext(t),r=e=>{const t=e,{children:r}=t,n=Q(t,["children"]),a=wt.useMemo(()=>n,Object.values(n));return ae.jsx(s.Provider,{value:a,children:r})};return r.displayName=e+"Provider",[r,function(r){const n=wt.useContext(s);if(n)return n;if(void 0!==t)return t;throw new Error(`\`${r}\` must be used within \`${e}\``)}]}(jd,{contentName:dd,titleName:fd,docsSlug:"dialog"}),_d=({titleId:e})=>{const t=kd(jd),s=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return wt.useEffect(()=>{if(e){document.getElementById(e)}},[s,e]),null},Cd=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${kd("DialogDescriptionWarning").contentName}}.`;return wt.useEffect(()=>{var s;const r=null==(s=e.current)?void 0:s.getAttribute("aria-describedby");if(t&&r){document.getElementById(t)}},[s,e,t]),null},Sd=od,Ed=ud,Td=gd,Pd=vd,Rd=bd;const Dd=ed,Ad=ad,Id=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(Sd,G({ref:t,className:fn("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},n))});Id.displayName=Sd.displayName;const Od=wt.forwardRef((e,t)=>{var s=e,{className:r,children:n}=s,a=Q(s,["className","children"]);return ae.jsxs(Ad,{children:[ae.jsx(Id,{}),ae.jsxs(Ed,Y(G({ref:t,className:fn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r)},a),{children:[n,ae.jsxs(Rd,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[ae.jsx(ie,{className:"h-4 w-4"}),ae.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});Od.displayName=Ed.displayName;const Md=e=>{var t=e,{className:s}=t,r=Q(t,["className"]);return ae.jsx("div",G({className:fn("flex flex-col space-y-1.5 text-center sm:text-left",s)},r))};Md.displayName="DialogHeader";const Fd=e=>{var t=e,{className:s}=t,r=Q(t,["className"]);return ae.jsx("div",G({className:fn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},r))};Fd.displayName="DialogFooter";const Ld=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(Td,G({ref:t,className:fn("text-lg font-semibold leading-none tracking-tight",r)},n))});Ld.displayName=Td.displayName;const $d=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(Pd,G({ref:t,className:fn("text-sm text-muted-foreground",r)},n))});$d.displayName=Pd.displayName;const zd=({isOpen:e,onClose:t,onLocationGranted:s})=>{const[r,n]=wt.useState(!1),[a,i]=wt.useState("prompt");wt.useEffect(()=>{navigator.permissions&&navigator.permissions.query({name:"geolocation"}).then(e=>{i(e.state)})},[]);return ae.jsx(Dd,{open:e,onOpenChange:t,children:ae.jsxs(Od,{className:"max-w-md",children:[ae.jsxs(Md,{children:[ae.jsxs(Ld,{className:"flex items-center gap-2",children:[ae.jsx(oe,{className:"h-5 w-5 text-blue-600"}),"Enable Location Access"]}),ae.jsx($d,{children:"Help us provide better service by allowing location access for precise issue reporting."})]}),ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[ae.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Benefits of enabling location:"}),ae.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx(le,{className:"h-4 w-4"}),"Automatic location detection when reporting issues"]}),ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx(le,{className:"h-4 w-4"}),"More accurate issue tracking and resolution"]}),ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx(le,{className:"h-4 w-4"}),"Better local community engagement"]})]})]}),"denied"===a&&ae.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[ae.jsxs("div",{className:"flex items-center gap-2 text-red-800 mb-2",children:[ae.jsx(ce,{className:"h-4 w-4"}),ae.jsx("span",{className:"text-sm font-medium",children:"Location access was denied"})]}),ae.jsxs("div",{className:"text-sm text-red-700",children:[ae.jsx("p",{className:"mb-2",children:"To enable location access:"}),ae.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[ae.jsx("li",{children:"Look for the location icon () in your browser's address bar"}),ae.jsx("li",{children:'Click on it and select "Allow" or "Always allow"'}),ae.jsx("li",{children:"Refresh the page and try again"}),ae.jsx("li",{children:"Or go to browser Settings  Privacy  Location  Allow this site"})]})]})]}),"granted"===a&&ae.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:ae.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[ae.jsx(le,{className:"h-4 w-4"}),ae.jsx("span",{className:"text-sm",children:"Location access granted! Your location will be used for better service."})]})}),ae.jsxs("div",{className:"flex gap-3",children:[ae.jsx(fl,{variant:"outline",onClick:()=>{localStorage.setItem("locationPermissionAsked","true"),localStorage.setItem("locationPermissionSkipped","true"),t()},className:"flex-1",disabled:r,children:"Skip for Now"}),ae.jsx(fl,{onClick:()=>ne(void 0,null,function*(){if(navigator.geolocation){if(n(!0),"https:"!==location.protocol&&"localhost"!==location.hostname)return Qt({title:"HTTPS Required",description:"Location access requires a secure connection (HTTPS).",variant:"destructive"}),void n(!1);try{if(navigator.permissions){if("denied"===(yield navigator.permissions.query({name:"geolocation"})).state)return Qt({title:"Location Permission Denied",description:"Please enable location access in your browser settings and refresh the page.",variant:"destructive"}),n(!1),void i("denied")}navigator.geolocation.getCurrentPosition(e=>ne(void 0,null,function*(){const r={lat:e.coords.latitude,lng:e.coords.longitude};try{const e=yield(e=>ne(void 0,null,function*(){try{const t="AIzaSyD7nJAmr4M4-qfzUQtubXAgWpc1P4ATh9E",s=yield fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e.lat},${e.lng}&key=${t}`);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const r=yield s.json();return"OK"===r.status&&r.results&&r.results.length>0?r.results[0].formatted_address:`${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`}catch(t){return`${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`}}))(r);localStorage.setItem("userLocation",JSON.stringify(Y(G({},r),{address:e,timestamp:Date.now()}))),s(Y(G({},r),{address:e})),i("granted"),Qt({title:"Location Access Granted",description:"Your location has been detected successfully!"}),setTimeout(()=>{t()},1500)}catch(a){Qt({title:"Location Processing Error",description:"Could not process your location. Please try again.",variant:"destructive"})}finally{n(!1)}}),e=>{n(!1),i("denied");let t="Unable to detect your location.",s="";switch(e.code){case e.PERMISSION_DENIED:t="Location access was denied.",s="Please click the location icon in your browser's address bar and allow location access, then try again.";break;case e.POSITION_UNAVAILABLE:t="Location information is unavailable.",s="Please check your internet connection and try again.";break;case e.TIMEOUT:t="Location request timed out.",s="Please try again or enter location manually."}Qt({title:"Location Access Failed",description:`${t} ${s}`,variant:"destructive"})},{enableHighAccuracy:!0,timeout:2e4,maximumAge:0})}catch(e){n(!1),Qt({title:"Permission Check Failed",description:"Could not check location permissions. Please try again.",variant:"destructive"})}}else Qt({title:"Geolocation Not Supported",description:"Your browser doesn't support location detection.",variant:"destructive"})}),disabled:r||"granted"===a,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:r?ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Detecting..."]}):"granted"===a?ae.jsxs(ae.Fragment,{children:[ae.jsx(le,{className:"h-4 w-4 mr-2"}),"Granted"]}):ae.jsxs(ae.Fragment,{children:[ae.jsx(de,{className:"h-4 w-4 mr-2"}),"Enable Location"]})})]}),"denied"===a&&ae.jsx("div",{className:"mt-4",children:ae.jsx(fl,{variant:"outline",onClick:()=>{const e=navigator.userAgent;let t="";e.includes("Chrome")?t="chrome://settings/content/location":e.includes("Firefox")?t="about:preferences#privacy":e.includes("Safari")&&(t="x-apple.systempreferences:com.apple.preference.security?Privacy_LocationServices"),t?window.open(t,"_blank"):Qt({title:"Browser Settings",description:"Please check your browser's location settings and allow access for this site."})},className:"w-full text-sm",children:"Open Browser Location Settings"})}),ae.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Your location data is only used for issue reporting and is not stored permanently."})]})]})})},Ud=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx("div",G({ref:t,className:fn("rounded-lg border bg-card text-card-foreground shadow-sm",r)},n))});Ud.displayName="Card";const Vd=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx("div",G({ref:t,className:fn("flex flex-col space-y-1.5 p-6",r)},n))});Vd.displayName="CardHeader";const Bd=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx("h3",G({ref:t,className:fn("text-2xl font-semibold leading-none tracking-tight",r)},n))});Bd.displayName="CardTitle";wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx("p",G({ref:t,className:fn("text-sm text-muted-foreground",r)},n))}).displayName="CardDescription";const Wd=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx("div",G({ref:t,className:fn("p-6 pt-0",r)},n))});Wd.displayName="CardContent";wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx("div",G({ref:t,className:fn("flex items-center p-6 pt-0",r)},n))}).displayName="CardFooter";const qd=jt.forwardRef((e,t)=>{var s=e,{className:r,children:n,variant:a="primary",size:i="md",isLoading:o=!1,leftIcon:l,rightIcon:c,fullWidth:d=!1,disabled:u}=s,m=Q(s,["className","children","variant","size","isLoading","leftIcon","rightIcon","fullWidth","disabled"]);const h=["inline-flex items-center justify-center font-medium","transition-all duration-200 ease-in-out","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-50 disabled:pointer-events-none disabled:cursor-not-allowed","rounded-lg border","select-none"].join(" "),p={primary:["bg-blue-600 text-white border-blue-600","hover:bg-blue-700 hover:border-blue-700","focus:ring-blue-500","active:bg-blue-800"].join(" "),secondary:["bg-gray-100 text-gray-900 border-gray-300","hover:bg-gray-200 hover:border-gray-400","focus:ring-gray-500","active:bg-gray-300"].join(" "),ghost:["bg-transparent text-gray-700 border-transparent","hover:bg-gray-100 hover:text-gray-900","focus:ring-gray-500","active:bg-gray-200"].join(" "),outline:["bg-transparent text-gray-700 border-gray-300","hover:bg-gray-50 hover:text-gray-900 hover:border-gray-400","focus:ring-gray-500","active:bg-gray-100"].join(" "),destructive:["bg-red-600 text-white border-red-600","hover:bg-red-700 hover:border-red-700","focus:ring-red-500","active:bg-red-800"].join(" ")},f={xs:"h-3 w-3",sm:"h-3.5 w-3.5",md:"h-4 w-4",lg:"h-4 w-4",xl:"h-5 w-5"}[i];return ae.jsxs("button",Y(G({className:fn(h,p[a],{xs:"text-xs h-7 px-2 gap-1",sm:"text-sm h-8 px-3 gap-1.5",md:"text-sm h-10 px-4 gap-2",lg:"text-base h-11 px-6 gap-2",xl:"text-lg h-12 px-8 gap-2.5"}[i],d&&"w-full",o&&"cursor-wait",r),disabled:o||u,ref:t},m),{children:[o?ae.jsx("div",{className:fn("animate-spin rounded-full border-2 border-current border-t-transparent",f)}):l?ae.jsx("span",{className:f,children:l}):null,n&&ae.jsx("span",{className:o?"opacity-70":"",children:n}),!o&&c&&ae.jsx("span",{className:f,children:c})]}))});qd.displayName="Button";const Kd=({isOpen:e,onClose:t,redirectTo:s,userType:r="citizen"})=>{const n=_t(),[a,i]=wt.useState(!0),[o,l]=wt.useState(""),[c,d]=wt.useState(""),[u,m]=wt.useState(""),[h,p]=wt.useState(""),[f,g]=wt.useState(""),[x,v]=wt.useState(""),[y,b]=wt.useState(!1),[w,j]=wt.useState(!1),[N,k]=wt.useState(!1),{toast:_}=Xt(),{signIn:C,signUp:S,signInWithGoogle:E}=ol();if(!e)return null;const T=()=>{l(""),d(""),m(""),p(""),g(""),v(""),b(!1),j(!1),k(!1),t()};return ae.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[ae.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:T}),ae.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full mx-auto overflow-hidden border border-gray-200",children:[ae.jsx("button",{onClick:T,className:"absolute top-4 right-4 p-1 rounded-full hover:bg-gray-100 transition-colors text-gray-500 hover:text-gray-700",children:ae.jsx(ie,{className:"h-5 w-5"})}),ae.jsxs("div",{className:"p-6 sm:p-8",children:[ae.jsx("h2",{className:"text-2xl font-semibold mb-1 text-gray-900",children:a?"Welcome back":`Create ${"authority"===r?"Authority":"Citizen"} Account`}),ae.jsx("p",{className:"text-gray-600 mb-6",children:"/issues/report"===s?"Please sign in to report an issue and help improve your community":a?`Sign in to your ${r} account to continue`:"authority"===r?"Join as an authority to manage and resolve community issues":"Join our community to help improve your neighborhood"}),ae.jsxs("form",{onSubmit:e=>ne(void 0,null,function*(){e.preventDefault(),b(!0);try{if(a)yield C(o,c),_({title:"Signed in successfully",description:"Welcome back!"}),t(),s&&n(s);else{if("authority"===r){if(!x.trim())return void _({title:"Authority access code required",description:"Please enter your authority access code to create an authority account.",variant:"destructive"});k(!0);const e=al(x),t=yield nl(e);if(k(!1),!t)return _({title:"Invalid authority access code",description:"The access code you entered is incorrect. Please contact your administrator.",variant:"destructive"}),void v("")}const e="Other"===h?f:h;yield S(o,c,u,r,e),_({title:"Account created",description:"authority"===r?"Your authority account has been created successfully":"Your account has been created successfully"}),t(),s&&n(s)}}catch(i){}finally{b(!1),k(!1)}}),className:"space-y-4",children:[!a&&ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"name",className:"block text-sm font-medium mb-1.5 text-gray-700",children:"Name"}),ae.jsxs("div",{className:"relative",children:[ae.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:ae.jsx(ue,{className:"h-5 w-5 text-gray-400"})}),ae.jsx("input",{id:"name",type:"text",value:u,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Your name",required:!a,disabled:y||w})]})]}),"authority"===r&&ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"department",className:"block text-sm font-medium mb-1.5 text-gray-700",children:"Department"}),ae.jsxs("select",{id:"department",value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!a&&"authority"===r,disabled:y||w||N,children:[ae.jsx("option",{value:"",children:"Select Department"}),["Public Works","Transportation","Water & Sewerage","Electricity","Health Department","Environmental Services","Parks & Recreation","Building & Planning","Police Department","Fire Department","Other"].map(e=>ae.jsx("option",{value:e,children:e},e))]}),"Other"===h&&ae.jsx("div",{className:"mt-2",children:ae.jsx("input",{type:"text",value:f,onChange:e=>g(e.target.value),className:"w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your department",required:"Other"===h,disabled:y||w||N})})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"authorityAccessCode",className:"block text-sm font-medium mb-1.5 text-gray-700",children:"Authority Access Code"}),ae.jsxs("div",{className:"relative",children:[ae.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:ae.jsx(me,{className:"h-5 w-5 text-gray-400"})}),ae.jsx("input",{id:"authorityAccessCode",type:"password",value:x,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter authority access code",required:!a&&"authority"===r,disabled:y||w||N})]}),ae.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Contact your administrator if you don't have an access code"})]})]})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"email",className:"block text-sm font-medium mb-1.5 text-gray-700",children:"Email"}),ae.jsxs("div",{className:"relative",children:[ae.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:ae.jsx(he,{className:"h-5 w-5 text-gray-400"})}),ae.jsx("input",{id:"email",type:"email",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Your email",required:!0,disabled:y||w})]})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1.5 text-gray-700",children:"Password"}),ae.jsxs("div",{className:"relative",children:[ae.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:ae.jsx(pe,{className:"h-5 w-5 text-gray-400"})}),ae.jsx("input",{id:"password",type:"password",value:c,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg border border-gray-300 bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Your password",required:!0,disabled:y||w,minLength:6})]})]}),a&&ae.jsx("div",{className:"text-right",children:ae.jsx("a",{href:"#",className:"text-sm text-blue-600 hover:underline",children:"Forgot password?"})}),ae.jsxs(qd,{className:"w-full group",size:"lg",isLoading:y||N,disabled:w,children:[ae.jsx("span",{children:N?"Validating access code...":a?"Sign in":"Create account"}),!N&&ae.jsx(fe,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]}),ae.jsxs("div",{className:"relative flex items-center justify-center mt-6",children:[ae.jsx("div",{className:"border-t border-border flex-grow"}),ae.jsx("span",{className:"mx-3 text-xs text-muted-foreground",children:"or continue with"}),ae.jsx("div",{className:"border-t border-border flex-grow"})]}),ae.jsxs("button",{type:"button",onClick:()=>ne(void 0,null,function*(){j(!0);try{yield E(s)}catch(e){j(!1)}}),disabled:y||w,className:"w-full flex items-center justify-center px-4 py-2.5 border border-gray-300 rounded-lg bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[w?ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}):ae.jsx(ge,{className:"mr-2 h-4 w-4"}),ae.jsx("span",{children:"Continue with Google"})]})]}),ae.jsxs("div",{className:"mt-6 text-center text-sm",children:[ae.jsx("span",{className:"text-gray-600",children:a?"Don't have an account? ":"Already have an account? "}),ae.jsx("button",{className:"text-blue-600 hover:underline font-medium",onClick:()=>{i(!a),l(""),d(""),m(""),p(""),g(""),v("")},disabled:y||w,children:a?"Sign up":"Sign in"})]})]})]})]})},Zd=wt.lazy(()=>Ft(()=>import("./CompactResolvedShowcase-D1I3dTh9.js"),__vite__mapDeps([0,1,2,3,4]))),Hd=()=>{const[e,t]=wt.useState({totalIssues:0,resolvedIssues:0,activeCitizens:0,loading:!0});wt.useEffect(()=>{s();const e=setInterval(s,6e4);return()=>{clearInterval(e)}},[]);const s=()=>ne(void 0,null,function*(){var e;try{const[s,r,n]=yield Promise.all([el.from("issues").select("*",{count:"exact",head:!0}),el.from("issues").select("*",{count:"exact",head:!0}).eq("status","resolved"),el.from("issues").select("created_by")]);if(s.error)throw s.error;if(r.error)throw r.error;if(n.error)throw n.error;const a=new Set((null==(e=n.data)?void 0:e.map(e=>e.created_by).filter(e=>null!=e))||[]).size;t({totalIssues:s.count||0,resolvedIssues:r.count||0,activeCitizens:a||0,loading:!1})}catch(s){t({totalIssues:0,resolvedIssues:0,activeCitizens:0,loading:!1})}}),r=e=>e>=1e3?`${(e/1e3).toFixed(1)}k+`:e.toString();return ae.jsx("section",{className:"py-16 px-6 bg-white/10 backdrop-blur-md rounded-t-3xl -mt-12 border-t border-white/20",children:ae.jsxs("div",{className:"max-w-6xl mx-auto",children:[ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[ae.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"relative",children:ae.jsx(Ud,{className:"shadow-2xl border-none bg-white/20 backdrop-blur-md border border-white/30 overflow-hidden",children:ae.jsxs(Wd,{className:"p-8 text-center relative",children:[ae.jsx("div",{className:"absolute top-4 right-4",children:ae.jsx(we,{className:"w-8 h-8 text-yellow-300 opacity-50"})}),ae.jsx("div",{className:"mb-4",children:e.loading?ae.jsx("div",{className:"animate-pulse",children:ae.jsx("div",{className:"h-16 bg-white/20 rounded w-32 mx-auto"})}):ae.jsx("h2",{className:"text-6xl font-bold text-yellow-300 drop-shadow-lg",children:0===e.totalIssues?"0":r(e.totalIssues)})}),ae.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Total Issues Reported"}),ae.jsx("p",{className:"text-white/80 text-sm",children:"Community reports submitted"})]})})}),ae.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"relative",children:ae.jsx(Ud,{className:"shadow-2xl border-none bg-white/20 backdrop-blur-md border border-white/30 overflow-hidden",children:ae.jsxs(Wd,{className:"p-8 text-center relative",children:[ae.jsx("div",{className:"absolute top-4 right-4",children:ae.jsx(le,{className:"w-8 h-8 text-green-300 opacity-50"})}),ae.jsx("div",{className:"mb-4",children:e.loading?ae.jsx("div",{className:"animate-pulse",children:ae.jsx("div",{className:"h-16 bg-white/20 rounded w-32 mx-auto"})}):ae.jsx("h2",{className:"text-6xl font-bold text-green-300 drop-shadow-lg",children:0===e.resolvedIssues?"0":r(e.resolvedIssues)})}),ae.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Issues Resolved to Date"}),ae.jsx("p",{className:"text-white/80 text-sm",children:"Successfully completed"})]})})}),ae.jsx(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"relative",children:ae.jsx(Ud,{className:"shadow-2xl border-none bg-white/20 backdrop-blur-md border border-white/30 overflow-hidden",children:ae.jsxs(Wd,{className:"p-8 text-center relative",children:[ae.jsx("div",{className:"absolute top-4 right-4",children:ae.jsx(ve,{className:"w-8 h-8 text-blue-300 opacity-50"})}),ae.jsx("div",{className:"mb-4",children:e.loading?ae.jsx("div",{className:"animate-pulse",children:ae.jsx("div",{className:"h-16 bg-white/20 rounded w-32 mx-auto"})}):ae.jsxs("h2",{className:"text-6xl font-bold text-blue-300 drop-shadow-lg",children:[0===e.activeCitizens?"0":r(e.activeCitizens),"+"]})}),ae.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Active Citizens"}),ae.jsx("p",{className:"text-white/80 text-sm",children:"Engaged community members"})]})})})]}),ae.jsx("div",{className:"mt-6 text-center",children:ae.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/10 backdrop-blur-sm px-4 py-2 rounded-full border border-white/20",children:[ae.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),ae.jsx("span",{className:"text-white/90 text-sm",children:"Live Statistics - Updates in Real-Time"})]})})]})})};function Gd(){const e=_t(),{currentUser:t}=ol(),[s,r]=wt.useState(!1),[n,a]=wt.useState(null),[i,o]=wt.useState(!1),l=()=>{var e;null==(e=document.getElementById("user-selection"))||e.scrollIntoView({behavior:"smooth"})},c=()=>{t?e("/issues"):(a("citizen"),r(!0))};return ae.jsxs("div",{className:"min-h-screen text-white font-sans relative",style:{backgroundImage:"url(/cityscape-bg.jpeg)",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"},children:[ae.jsx("div",{className:"absolute inset-0 bg-black/30"}),ae.jsxs("div",{className:"relative z-10",children:[ae.jsxs("section",{className:"text-center py-24 px-6",children:[ae.jsx(xe.h1,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:1},className:"text-5xl font-bold mb-4 text-white drop-shadow-lg",children:"Nagar Setu: Smarter Cities, Empowered Citizens"}),ae.jsx("p",{className:"text-lg text-white/90 max-w-3xl mx-auto mb-8 drop-shadow-md",children:"A next-gen civic engagement platform where citizens report issues instantly, and governments respond smarter with AI-driven prioritization and resolve them."}),ae.jsx(fl,{onClick:l,className:"bg-pink-500 hover:bg-pink-600 text-white px-8 py-3 text-lg rounded-full shadow-lg",children:"Get Started"})]}),ae.jsx(Hd,{}),ae.jsxs("section",{id:"user-selection",className:"py-20 px-6 bg-black/30 backdrop-blur-sm",children:[ae.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-white drop-shadow-lg",children:"Choose Your Access Type"}),ae.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-8 max-w-6xl mx-auto",children:[ae.jsxs(xe.div,{whileHover:{scale:1.05},className:"bg-white/20 p-8 rounded-2xl text-center shadow-xl w-full md:w-1/3 backdrop-blur-md border border-white/20",children:[ae.jsx(ve,{className:"w-16 h-16 text-pink-400 mx-auto mb-4"}),ae.jsx("h3",{className:"text-2xl font-semibold mb-4 text-pink-400",children:"Citizen Access"}),ae.jsx("p",{className:"text-white/90 text-sm mb-6",children:"Report civic issues, track progress, and help build a better community. Join thousands of citizens making a difference."}),ae.jsx(fl,{onClick:c,className:"bg-pink-500 hover:bg-pink-600 text-white px-6 py-3 rounded-full w-full",children:"Access as Citizen"})]}),ae.jsxs(xe.div,{whileHover:{scale:1.05},className:"bg-white/20 p-8 rounded-2xl text-center shadow-xl w-full md:w-1/3 backdrop-blur-md border border-white/20",children:[ae.jsx(me,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}),ae.jsx("h3",{className:"text-2xl font-semibold mb-4 text-blue-400",children:"Authority Access"}),ae.jsx("p",{className:"text-white/90 text-sm mb-6",children:"Manage reported issues, coordinate responses, and track resolution progress with advanced analytics and AI insights."}),ae.jsx(fl,{onClick:()=>{t?e("/authority-dashboard"):(a("authority"),r(!0))},className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-full w-full",children:"Access as Authority"})]}),ae.jsxs(xe.div,{whileHover:{scale:1.05},className:"bg-white/20 p-8 rounded-2xl text-center shadow-xl w-full md:w-1/3 backdrop-blur-md border border-white/20 relative",children:[ae.jsx(ye,{className:"w-16 h-16 text-orange-400 mx-auto mb-4"}),ae.jsx("h3",{className:"text-2xl font-semibold mb-4 text-orange-400",children:"Worker Access"}),ae.jsx("p",{className:"text-white/90 text-sm mb-6",children:"Field workers can view assigned tasks, update progress, and complete civic maintenance work efficiently."}),ae.jsx(fl,{onClick:()=>{e("/official/login")},className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-full w-full",children:"Access as Worker"})]})]})]}),ae.jsx(wt.Suspense,{fallback:ae.jsx("div",{className:"py-16 px-6 bg-black/20 backdrop-blur-sm",children:ae.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),ae.jsx("p",{className:"text-white/80",children:"Loading success stories..."})]})}),children:ae.jsx(Zd,{})}),ae.jsxs("section",{className:"text-center py-20 bg-white/15 backdrop-blur-md border-t border-white/20",children:[ae.jsx("h2",{className:"text-4xl font-bold mb-6 text-white drop-shadow-lg",children:"Join the Future of Smart Governance"}),ae.jsx("p",{className:"text-lg text-white/90 mb-8 max-w-2xl mx-auto drop-shadow-md",children:"Be part of the change. Report civic issues, monitor progress, and help build cleaner, more connected cities."}),ae.jsx(fl,{onClick:l,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-10 py-4 text-lg rounded-full shadow-xl",children:"Get Started Now"})]}),ae.jsx("footer",{className:"py-6 text-center text-gray-400 bg-gray-950 border-t border-gray-800",children:" 2025 Nagar Setu | Empowering Citizens for Smarter Cities"}),ae.jsx(Kd,{isOpen:s,onClose:()=>{r(!1),a(null)},redirectTo:"citizen"===n?"/issues":"/authority-dashboard",userType:n||"citizen"}),ae.jsx(Dd,{open:i,onOpenChange:o,children:ae.jsxs(Od,{className:"max-w-md",children:[ae.jsx(Md,{children:ae.jsxs(Ld,{className:"flex items-center gap-2 text-2xl",children:[ae.jsx(be,{className:"h-6 w-6 text-orange-500"}),"Under Development"]})}),ae.jsxs("div",{className:"space-y-4",children:[ae.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:ae.jsxs("div",{className:"flex items-start gap-3",children:[ae.jsx(ye,{className:"h-8 w-8 text-orange-500 flex-shrink-0 mt-1"}),ae.jsxs("div",{children:[ae.jsx("h3",{className:"font-semibold text-orange-900 mb-2",children:"Worker Portal Coming Soon!"}),ae.jsx("p",{className:"text-sm text-orange-800",children:"We're currently building an advanced portal for field workers to manage and complete assigned tasks efficiently."})]})]})}),ae.jsxs("div",{className:"space-y-2",children:[ae.jsx("h4",{className:"font-semibold text-gray-900",children:"Upcoming Features:"}),ae.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),ae.jsx("span",{children:"View assigned tasks with GPS navigation"})]}),ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),ae.jsx("span",{children:"Upload before/after photos of completed work"})]}),ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),ae.jsx("span",{children:"Real-time task updates and notifications"})]}),ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),ae.jsx("span",{children:"Performance tracking and achievements"})]})]})]}),ae.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:ae.jsxs("p",{className:"text-sm text-blue-800",children:[ae.jsx("strong",{children:"Stay tuned!"})," The worker portal will be available soon with powerful tools for municipal field workers."]})}),ae.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[ae.jsx(fl,{variant:"outline",onClick:()=>o(!1),children:"Close"}),ae.jsx(fl,{onClick:()=>{o(!1),c()},className:"bg-pink-500 hover:bg-pink-600",children:"Try Citizen Access"})]})]})]})})]})]})}var Yd="Avatar",[Qd,Xd]=ls(Yd),[Jd,eu]=Qd(Yd),tu=wt.forwardRef((e,t)=>{const s=e,{__scopeAvatar:r}=s,n=Q(s,["__scopeAvatar"]),[a,i]=wt.useState("idle");return ae.jsx(Jd,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:ae.jsx(ds.span,Y(G({},n),{ref:t}))})});tu.displayName=Yd;var su="AvatarImage",ru=wt.forwardRef((e,t)=>{const s=e,{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{}}=s,i=Q(s,["__scopeAvatar","src","onLoadingStatusChange"]),o=eu(su,r),l=function(e,t){const[s,r]=wt.useState("idle");return ks(()=>{if(!e)return void r("error");let s=!0;const n=new window.Image,a=e=>()=>{s&&r(e)};return r("loading"),n.onload=a("loaded"),n.onerror=a("error"),n.src=e,t&&(n.referrerPolicy=t),()=>{s=!1}},[e,t]),s}(n,i.referrerPolicy),c=ms(e=>{a(e),o.onImageLoadingStatusChange(e)});return ks(()=>{"idle"!==l&&c(l)},[l,c]),"loaded"===l?ae.jsx(ds.img,Y(G({},i),{ref:t,src:n})):null});ru.displayName=su;var nu="AvatarFallback",au=wt.forwardRef((e,t)=>{const s=e,{__scopeAvatar:r,delayMs:n}=s,a=Q(s,["__scopeAvatar","delayMs"]),i=eu(nu,r),[o,l]=wt.useState(void 0===n);return wt.useEffect(()=>{if(void 0!==n){const e=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(e)}},[n]),o&&"loaded"!==i.imageLoadingStatus?ae.jsx(ds.span,Y(G({},a),{ref:t})):null});au.displayName=nu;var iu=tu,ou=ru,lu=au;const cu=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(iu,G({ref:t,className:fn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r)},n))});cu.displayName=iu.displayName;const du=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(ou,G({ref:t,className:fn("aspect-square h-full w-full",r)},n))});du.displayName=ou.displayName;const uu=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(lu,G({ref:t,className:fn("flex h-full w-full items-center justify-center rounded-full bg-muted",r)},n))});uu.displayName=lu.displayName;var mu=wt.createContext(void 0);function hu(e){const t=wt.useContext(mu);return e||t||"ltr"}var pu=0;function fu(){wt.useEffect(()=>{var e,t;const s=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!=(e=s[0])?e:gu()),document.body.insertAdjacentElement("beforeend",null!=(t=s[1])?t:gu()),pu++,()=>{1===pu&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),pu--}},[])}function gu(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var xu="focusScope.autoFocusOnMount",vu="focusScope.autoFocusOnUnmount",yu={bubbles:!1,cancelable:!0},bu=wt.forwardRef((e,t)=>{const s=e,{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i}=s,o=Q(s,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]),[l,c]=wt.useState(null),d=ms(a),u=ms(i),m=wt.useRef(null),h=ts(t,e=>c(e)),p=wt.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;wt.useEffect(()=>{if(n){let e=function(e){if(p.paused||!l)return;const t=e.target;l.contains(t)?m.current=t:ku(m.current,{select:!0})},t=function(e){if(p.paused||!l)return;const t=e.relatedTarget;null!==t&&(l.contains(t)||ku(m.current,{select:!0}))},s=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&ku(l)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(s);return l&&r.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[n,l,p.paused]),wt.useEffect(()=>{if(l){_u.add(p);const t=document.activeElement;if(!l.contains(t)){const s=new CustomEvent(xu,yu);l.addEventListener(xu,d),l.dispatchEvent(s),s.defaultPrevented||(!function(e,{select:t=!1}={}){const s=document.activeElement;for(const r of e)if(ku(r,{select:t}),document.activeElement!==s)return}((e=wu(l),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&ku(l))}return()=>{l.removeEventListener(xu,d),setTimeout(()=>{const e=new CustomEvent(vu,yu);l.addEventListener(vu,u),l.dispatchEvent(e),e.defaultPrevented||ku(null!=t?t:document.body,{select:!0}),l.removeEventListener(vu,u),_u.remove(p)},0)}}var e},[l,d,u,p]);const f=wt.useCallback(e=>{if(!r&&!n)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,s=document.activeElement;if(t&&s){const t=e.currentTarget,[n,a]=function(e){const t=wu(e),s=ju(t,e),r=ju(t.reverse(),e);return[s,r]}(t);n&&a?e.shiftKey||s!==a?e.shiftKey&&s===n&&(e.preventDefault(),r&&ku(a,{select:!0})):(e.preventDefault(),r&&ku(n,{select:!0})):s===t&&e.preventDefault()}},[r,n,p.paused]);return ae.jsx(ds.div,Y(G({tabIndex:-1},o),{ref:h,onKeyDown:f}))});function wu(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)t.push(s.currentNode);return t}function ju(e,t){for(const s of e)if(!Nu(s,{upTo:t}))return s}function Nu(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function ku(e,{select:t=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}bu.displayName="FocusScope";var _u=function(){let e=[];return{add(t){const s=e[0];t!==s&&(null==s||s.pause()),e=Cu(e,t),e.unshift(t)},remove(t){var s;e=Cu(e,t),null==(s=e[0])||s.resume()}}}();function Cu(e,t){const s=[...e],r=s.indexOf(t);return-1!==r&&s.splice(r,1),s}function Su(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:s,scopeName:r})=>{const n=s(e)[`__scope${r}`];return G(G({},t),n)},{});return wt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}var Eu="rovingFocusGroup.onEntryFocus",Tu={bubbles:!1,cancelable:!0},Pu="RovingFocusGroup",[Ru,Du,Au]=os(Pu),[Iu,Ou]=function(e,t=[]){let s=[];const r=()=>{const t=s.map(e=>wt.createContext(e));return function(s){const r=(null==s?void 0:s[e])||t;return wt.useMemo(()=>({[`__scope${e}`]:Y(G({},s),{[e]:r})}),[s,r])}};return r.scopeName=e,[function(t,r){const n=wt.createContext(r),a=s.length;function i(t){const s=t,{scope:r,children:i}=s,o=Q(s,["scope","children"]),l=(null==r?void 0:r[e][a])||n,c=wt.useMemo(()=>o,Object.values(o));return ae.jsx(l.Provider,{value:c,children:i})}return s=[...s,r],i.displayName=t+"Provider",[i,function(s,i){const o=(null==i?void 0:i[e][a])||n,l=wt.useContext(o);if(l)return l;if(void 0!==r)return r;throw new Error(`\`${s}\` must be used within \`${t}\``)}]},Su(r,...t)]}(Pu,[Au]),[Mu,Fu]=Iu(Pu),Lu=wt.forwardRef((e,t)=>ae.jsx(Ru.Provider,{scope:e.__scopeRovingFocusGroup,children:ae.jsx(Ru.Slot,{scope:e.__scopeRovingFocusGroup,children:ae.jsx($u,Y(G({},e),{ref:t}))})}));Lu.displayName=Pu;var $u=wt.forwardRef((e,t)=>{const s=e,{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1}=s,m=Q(s,["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"]),h=wt.useRef(null),p=ts(t,h),f=hu(i),[g=null,x]=Es({prop:o,defaultProp:l,onChange:c}),[v,y]=wt.useState(!1),b=ms(d),w=Du(r),j=wt.useRef(!1),[N,k]=wt.useState(0);return wt.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(Eu,b),()=>e.removeEventListener(Eu,b)},[b]),ae.jsx(Mu,{scope:r,orientation:n,dir:f,loop:a,currentTabStopId:g,onItemFocus:wt.useCallback(e=>x(e),[x]),onItemShiftTab:wt.useCallback(()=>y(!0),[]),onFocusableItemAdd:wt.useCallback(()=>k(e=>e+1),[]),onFocusableItemRemove:wt.useCallback(()=>k(e=>e-1),[]),children:ae.jsx(ds.div,Y(G({tabIndex:v||0===N?-1:0,"data-orientation":n},m),{ref:p,style:G({outline:"none"},e.style),onMouseDown:Jt(e.onMouseDown,()=>{j.current=!0}),onFocus:Jt(e.onFocus,e=>{const t=!j.current;if(e.target===e.currentTarget&&t&&!v){const t=new CustomEvent(Eu,Tu);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter(e=>e.focusable);Bu([e.find(e=>e.active),e.find(e=>e.id===g),...e].filter(Boolean).map(e=>e.ref.current),u)}}j.current=!1}),onBlur:Jt(e.onBlur,()=>y(!1))}))})}),zu="RovingFocusGroupItem",Uu=wt.forwardRef((e,t)=>{const s=e,{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i}=s,o=Q(s,["__scopeRovingFocusGroup","focusable","active","tabStopId"]),l=Hn(),c=i||l,d=Fu(zu,r),u=d.currentTabStopId===c,m=Du(r),{onFocusableItemAdd:h,onFocusableItemRemove:p}=d;return wt.useEffect(()=>{if(n)return h(),()=>p()},[n,h,p]),ae.jsx(Ru.ItemSlot,{scope:r,id:c,focusable:n,active:a,children:ae.jsx(ds.span,Y(G({tabIndex:u?0:-1,"data-orientation":d.orientation},o),{ref:t,onMouseDown:Jt(e.onMouseDown,e=>{n?d.onItemFocus(c):e.preventDefault()}),onFocus:Jt(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:Jt(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void d.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,s){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,s);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Vu[r]}(e,d.orientation,d.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=m().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const a=n.indexOf(e.currentTarget);n=d.loop?(r=a+1,(s=n).map((e,t)=>s[(r+t)%s.length])):n.slice(a+1)}setTimeout(()=>Bu(n))}var s,r})}))})});Uu.displayName=zu;var Vu={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Bu(e,t=!1){const s=document.activeElement;for(const r of e){if(r===s)return;if(r.focus({preventScroll:t}),document.activeElement!==s)return}}var Wu=Lu,qu=Uu,Ku=cc(),Zu=function(){},Hu=wt.forwardRef(function(e,t){var s=wt.useRef(null),r=wt.useState({onScrollCapture:Zu,onWheelCapture:Zu,onTouchMoveCapture:Zu}),n=r[0],a=r[1],i=e.forwardProps,o=e.children,l=e.className,c=e.removeScrollBar,d=e.enabled,u=e.shards,m=e.sideCar,h=e.noIsolation,p=e.inert,f=e.allowPinchZoom,g=e.as,x=void 0===g?"div":g,v=e.gapMode,y=Ot(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=m,w=oc([s,t]),j=It(It({},y),n);return wt.createElement(wt.Fragment,null,d&&wt.createElement(b,{sideCar:Ku,removeScrollBar:c,shards:u,noIsolation:h,inert:p,setCallbacks:a,allowPinchZoom:!!f,lockRef:s,gapMode:v}),i?wt.cloneElement(wt.Children.only(o),It(It({},j),{ref:w})):wt.createElement(x,It({},j,{className:l,ref:w}),o))});Hu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Hu.classNames={fullWidth:rc,zeroRight:sc};var Gu=!1;if("undefined"!=typeof window)try{var Yu=Object.defineProperty({},"passive",{get:function(){return Gu=!0,!0}});window.addEventListener("test",Yu,Yu),window.removeEventListener("test",Yu,Yu)}catch(Aw){Gu=!1}var Qu=!!Gu&&{passive:!1},Xu=function(e,t){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return"hidden"!==s[t]&&!(s.overflowY===s.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===s[t])},Ju=function(e,t){var s=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),em(e,r)){var n=tm(e,r);if(n[1]>n[2])return!0}r=r.parentNode}while(r&&r!==s.body);return!1},em=function(e,t){return"v"===e?function(e){return Xu(e,"overflowY")}(t):function(e){return Xu(e,"overflowX")}(t)},tm=function(e,t){return"v"===e?[(s=t).scrollTop,s.scrollHeight,s.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var s},sm=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rm=function(e){return[e.deltaX,e.deltaY]},nm=function(e){return e&&"current"in e?e.current:e},am=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},im=0,om=[];function lm(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const cm=uc(Ku,function(e){var t=wt.useRef([]),s=wt.useRef([0,0]),r=wt.useRef(),n=wt.useState(im++)[0],a=wt.useState(xc)[0],i=wt.useRef(e);wt.useEffect(function(){i.current=e},[e]),wt.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var t=Mt([e.lockRef.current],(e.shards||[]).map(nm),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var o=wt.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!i.current.allowPinchZoom;var n,a=sm(e),o=s.current,l="deltaX"in e?e.deltaX:o[0]-a[0],c="deltaY"in e?e.deltaY:o[1]-a[1],d=e.target,u=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===u&&"range"===d.type)return!1;var m=Ju(u,d);if(!m)return!0;if(m?n=u:(n="v"===u?"h":"v",m=Ju(u,d)),!m)return!1;if(!r.current&&"changedTouches"in e&&(l||c)&&(r.current=n),!n)return!0;var h=r.current||n;return function(e,t,s,r,n){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),i=a*r,o=s.target,l=t.contains(o),c=!1,d=i>0,u=0,m=0;do{var h=tm(e,o),p=h[0],f=h[1]-h[2]-a*p;(p||f)&&em(e,o)&&(u+=f,m+=p),o=o instanceof ShadowRoot?o.host:o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return d&&(Math.abs(u)<1||!n)?c=!0:d||!(Math.abs(m)<1)&&n||(c=!0),c}(h,t,e,"h"===h?l:c,!0)},[]),l=wt.useCallback(function(e){var s=e;if(om.length&&om[om.length-1]===a){var r="deltaY"in s?rm(s):sm(s),n=t.current.filter(function(e){return e.name===s.type&&(e.target===s.target||s.target===e.shadowParent)&&(t=e.delta,n=r,t[0]===n[0]&&t[1]===n[1]);var t,n})[0];if(n&&n.should)s.cancelable&&s.preventDefault();else if(!n){var l=(i.current.shards||[]).map(nm).filter(Boolean).filter(function(e){return e.contains(s.target)});(l.length>0?o(s,l[0]):!i.current.noIsolation)&&s.cancelable&&s.preventDefault()}}},[]),c=wt.useCallback(function(e,s,r,n){var a={name:e,delta:s,target:r,should:n,shadowParent:lm(r)};t.current.push(a),setTimeout(function(){t.current=t.current.filter(function(e){return e!==a})},1)},[]),d=wt.useCallback(function(e){s.current=sm(e),r.current=void 0},[]),u=wt.useCallback(function(t){c(t.type,rm(t),t.target,o(t,e.lockRef.current))},[]),m=wt.useCallback(function(t){c(t.type,sm(t),t.target,o(t,e.lockRef.current))},[]);wt.useEffect(function(){return om.push(a),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Qu),document.addEventListener("touchmove",l,Qu),document.addEventListener("touchstart",d,Qu),function(){om=om.filter(function(e){return e!==a}),document.removeEventListener("wheel",l,Qu),document.removeEventListener("touchmove",l,Qu),document.removeEventListener("touchstart",d,Qu)}},[]);var h=e.removeScrollBar,p=e.inert;return wt.createElement(wt.Fragment,null,p?wt.createElement(a,{styles:am(n)}):null,h?wt.createElement(_c,{gapMode:e.gapMode}):null)});var dm=wt.forwardRef(function(e,t){return wt.createElement(Hu,It({},e,{ref:t,sideCar:cm}))});dm.classNames=Hu.classNames;var um=["Enter"," "],mm=["ArrowUp","PageDown","End"],hm=["ArrowDown","PageUp","Home",...mm],pm={ltr:[...um,"ArrowRight"],rtl:[...um,"ArrowLeft"]},fm={ltr:["ArrowLeft"],rtl:["ArrowRight"]},gm="Menu",[xm,vm,ym]=os(gm),[bm,wm]=ls(gm,[ym,_i,Ou]),jm=_i(),Nm=Ou(),[km,_m]=bm(gm),[Cm,Sm]=bm(gm),Em=e=>{const{__scopeMenu:t,open:s=!1,children:r,dir:n,onOpenChange:a,modal:i=!0}=e,o=jm(t),[l,c]=wt.useState(null),d=wt.useRef(!1),u=ms(a),m=hu(n);return wt.useEffect(()=>{const e=()=>{d.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>d.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),ae.jsx(Ui,Y(G({},o),{children:ae.jsx(km,{scope:t,open:s,onOpenChange:u,content:l,onContentChange:c,children:ae.jsx(Cm,{scope:t,onClose:wt.useCallback(()=>u(!1),[u]),isUsingKeyboardRef:d,dir:m,modal:i,children:r})})}))};Em.displayName=gm;var Tm=wt.forwardRef((e,t)=>{const s=e,{__scopeMenu:r}=s,n=Q(s,["__scopeMenu"]),a=jm(r);return ae.jsx(Vi,Y(G(G({},a),n),{ref:t}))});Tm.displayName="MenuAnchor";var Pm="MenuPortal",[Rm,Dm]=bm(Pm,{forceMount:void 0}),Am=e=>{const{__scopeMenu:t,forceMount:s,children:r,container:n}=e,a=_m(Pm,t);return ae.jsx(Rm,{scope:t,forceMount:s,children:ae.jsx(Cs,{present:s||a.open,children:ae.jsx(_s,{asChild:!0,container:n,children:r})})})};Am.displayName=Pm;var Im="MenuContent",[Om,Mm]=bm(Im),Fm=wt.forwardRef((e,t)=>{const s=Dm(Im,e.__scopeMenu),r=e,{forceMount:n=s.forceMount}=r,a=Q(r,["forceMount"]),i=_m(Im,e.__scopeMenu),o=Sm(Im,e.__scopeMenu);return ae.jsx(xm.Provider,{scope:e.__scopeMenu,children:ae.jsx(Cs,{present:n||i.open,children:ae.jsx(xm.Slot,{scope:e.__scopeMenu,children:o.modal?ae.jsx(Lm,Y(G({},a),{ref:t})):ae.jsx($m,Y(G({},a),{ref:t}))})})})}),Lm=wt.forwardRef((e,t)=>{const s=_m(Im,e.__scopeMenu),r=wt.useRef(null),n=ts(t,r);return wt.useEffect(()=>{const e=r.current;if(e)return Hc(e)},[]),ae.jsx(zm,Y(G({},e),{ref:n,trapFocus:s.open,disableOutsidePointerEvents:s.open,disableOutsideScroll:!0,onFocusOutside:Jt(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>s.onOpenChange(!1)}))}),$m=wt.forwardRef((e,t)=>{const s=_m(Im,e.__scopeMenu);return ae.jsx(zm,Y(G({},e),{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>s.onOpenChange(!1)}))}),zm=wt.forwardRef((e,t)=>{const s=e,{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:p,disableOutsideScroll:f}=s,g=Q(s,["__scopeMenu","loop","trapFocus","onOpenAutoFocus","onCloseAutoFocus","disableOutsidePointerEvents","onEntryFocus","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","disableOutsideScroll"]),x=_m(Im,r),v=Sm(Im,r),y=jm(r),b=Nm(r),w=vm(r),[j,N]=wt.useState(null),k=wt.useRef(null),_=ts(t,k,x.onContentChange),C=wt.useRef(0),S=wt.useRef(""),E=wt.useRef(0),T=wt.useRef(null),P=wt.useRef("right"),R=wt.useRef(0),D=f?dm:wt.Fragment,A=f?{as:rs,allowPinchZoom:!0}:void 0,I=e=>{var t,s;const r=S.current+e,n=w().filter(e=>!e.disabled),a=document.activeElement,i=null==(t=n.find(e=>e.ref.current===a))?void 0:t.textValue,o=function(e,t,s){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),n=r?t[0]:t,a=s?e.indexOf(s):-1;let i=(o=e,l=Math.max(a,0),o.map((e,t)=>o[(l+t)%o.length]));var o,l;1===n.length&&(i=i.filter(e=>e!==s));const c=i.find(e=>e.toLowerCase().startsWith(n.toLowerCase()));return c!==s?c:void 0}(n.map(e=>e.textValue),r,i),l=null==(s=n.find(e=>e.textValue===o))?void 0:s.ref.current;!function e(t){S.current=t,window.clearTimeout(C.current),""!==t&&(C.current=window.setTimeout(()=>e(""),1e3))}(r),l&&setTimeout(()=>l.focus())};wt.useEffect(()=>()=>window.clearTimeout(C.current),[]),fu();const O=wt.useCallback(e=>{var t,s;return P.current===(null==(t=T.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const s={x:e.clientX,y:e.clientY};return function(e,t){const{x:s,y:r}=e;let n=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const e=t[a].x,o=t[a].y,l=t[i].x,c=t[i].y;o>r!=c>r&&s<(l-e)*(r-o)/(c-o)+e&&(n=!n)}return n}(s,t)}(e,null==(s=T.current)?void 0:s.area)},[]);return ae.jsx(Om,{scope:r,searchRef:S,onItemEnter:wt.useCallback(e=>{O(e)&&e.preventDefault()},[O]),onItemLeave:wt.useCallback(e=>{var t;O(e)||(null==(t=k.current)||t.focus(),N(null))},[O]),onTriggerLeave:wt.useCallback(e=>{O(e)&&e.preventDefault()},[O]),pointerGraceTimerRef:E,onPointerGraceIntentChange:wt.useCallback(e=>{T.current=e},[]),children:ae.jsx(D,Y(G({},A),{children:ae.jsx(bu,{asChild:!0,trapped:a,onMountAutoFocus:Jt(i,e=>{var t;e.preventDefault(),null==(t=k.current)||t.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:ae.jsx(vs,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:p,children:ae.jsx(Wu,Y(G({asChild:!0},b),{dir:v.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:N,onEntryFocus:Jt(c,e=>{v.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:ae.jsx(Bi,Y(G(G({role:"menu","aria-orientation":"vertical","data-state":mh(x.open),"data-radix-menu-content":"",dir:v.dir},y),g),{ref:_,style:G({outline:"none"},g.style),onKeyDown:Jt(g.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,s=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!s&&r&&I(e.key));const n=k.current;if(e.target!==n)return;if(!hm.includes(e.key))return;e.preventDefault();const a=w().filter(e=>!e.disabled).map(e=>e.ref.current);mm.includes(e.key)&&a.reverse(),function(e){const t=document.activeElement;for(const s of e){if(s===t)return;if(s.focus(),document.activeElement!==t)return}}(a)}),onBlur:Jt(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(C.current),S.current="")}),onPointerMove:Jt(e.onPointerMove,fh(e=>{const t=e.target,s=R.current!==e.clientX;if(e.currentTarget.contains(t)&&s){const t=e.clientX>R.current?"right":"left";P.current=t,R.current=e.clientX}}))}))}))})})}))})});Fm.displayName=Im;var Um=wt.forwardRef((e,t)=>{const s=e,{__scopeMenu:r}=s,n=Q(s,["__scopeMenu"]);return ae.jsx(ds.div,Y(G({role:"group"},n),{ref:t}))});Um.displayName="MenuGroup";var Vm=wt.forwardRef((e,t)=>{const s=e,{__scopeMenu:r}=s,n=Q(s,["__scopeMenu"]);return ae.jsx(ds.div,Y(G({},n),{ref:t}))});Vm.displayName="MenuLabel";var Bm="MenuItem",Wm="menu.itemSelect",qm=wt.forwardRef((e,t)=>{const s=e,{disabled:r=!1,onSelect:n}=s,a=Q(s,["disabled","onSelect"]),i=wt.useRef(null),o=Sm(Bm,e.__scopeMenu),l=Mm(Bm,e.__scopeMenu),c=ts(t,i),d=wt.useRef(!1);return ae.jsx(Km,Y(G({},a),{ref:c,disabled:r,onClick:Jt(e.onClick,()=>{const e=i.current;if(!r&&e){const t=new CustomEvent(Wm,{bubbles:!0,cancelable:!0});e.addEventListener(Wm,e=>null==n?void 0:n(e),{once:!0}),us(e,t),t.defaultPrevented?d.current=!1:o.onClose()}}),onPointerDown:t=>{var s;null==(s=e.onPointerDown)||s.call(e,t),d.current=!0},onPointerUp:Jt(e.onPointerUp,e=>{var t;d.current||null==(t=e.currentTarget)||t.click()}),onKeyDown:Jt(e.onKeyDown,e=>{const t=""!==l.searchRef.current;r||t&&" "===e.key||um.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})}))});qm.displayName=Bm;var Km=wt.forwardRef((e,t)=>{const s=e,{__scopeMenu:r,disabled:n=!1,textValue:a}=s,i=Q(s,["__scopeMenu","disabled","textValue"]),o=Mm(Bm,r),l=Nm(r),c=wt.useRef(null),d=ts(t,c),[u,m]=wt.useState(!1),[h,p]=wt.useState("");return wt.useEffect(()=>{var e;const t=c.current;t&&p((null!=(e=t.textContent)?e:"").trim())},[i.children]),ae.jsx(xm.ItemSlot,{scope:r,disabled:n,textValue:null!=a?a:h,children:ae.jsx(qu,Y(G({asChild:!0},l),{focusable:!n,children:ae.jsx(ds.div,Y(G({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0},i),{ref:d,onPointerMove:Jt(e.onPointerMove,fh(e=>{if(n)o.onItemLeave(e);else if(o.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:Jt(e.onPointerLeave,fh(e=>o.onItemLeave(e))),onFocus:Jt(e.onFocus,()=>m(!0)),onBlur:Jt(e.onBlur,()=>m(!1))}))}))})}),Zm=wt.forwardRef((e,t)=>{const s=e,{checked:r=!1,onCheckedChange:n}=s,a=Q(s,["checked","onCheckedChange"]);return ae.jsx(th,{scope:e.__scopeMenu,checked:r,children:ae.jsx(qm,Y(G({role:"menuitemcheckbox","aria-checked":hh(r)?"mixed":r},a),{ref:t,"data-state":ph(r),onSelect:Jt(a.onSelect,()=>null==n?void 0:n(!!hh(r)||!r),{checkForDefaultPrevented:!1})}))})});Zm.displayName="MenuCheckboxItem";var Hm="MenuRadioGroup",[Gm,Ym]=bm(Hm,{value:void 0,onValueChange:()=>{}}),Qm=wt.forwardRef((e,t)=>{const s=e,{value:r,onValueChange:n}=s,a=Q(s,["value","onValueChange"]),i=ms(n);return ae.jsx(Gm,{scope:e.__scopeMenu,value:r,onValueChange:i,children:ae.jsx(Um,Y(G({},a),{ref:t}))})});Qm.displayName=Hm;var Xm="MenuRadioItem",Jm=wt.forwardRef((e,t)=>{const s=e,{value:r}=s,n=Q(s,["value"]),a=Ym(Xm,e.__scopeMenu),i=r===a.value;return ae.jsx(th,{scope:e.__scopeMenu,checked:i,children:ae.jsx(qm,Y(G({role:"menuitemradio","aria-checked":i},n),{ref:t,"data-state":ph(i),onSelect:Jt(n.onSelect,()=>{var e;return null==(e=a.onValueChange)?void 0:e.call(a,r)},{checkForDefaultPrevented:!1})}))})});Jm.displayName=Xm;var eh="MenuItemIndicator",[th,sh]=bm(eh,{checked:!1}),rh=wt.forwardRef((e,t)=>{const s=e,{__scopeMenu:r,forceMount:n}=s,a=Q(s,["__scopeMenu","forceMount"]),i=sh(eh,r);return ae.jsx(Cs,{present:n||hh(i.checked)||!0===i.checked,children:ae.jsx(ds.span,Y(G({},a),{ref:t,"data-state":ph(i.checked)}))})});rh.displayName=eh;var nh=wt.forwardRef((e,t)=>{const s=e,{__scopeMenu:r}=s,n=Q(s,["__scopeMenu"]);return ae.jsx(ds.div,Y(G({role:"separator","aria-orientation":"horizontal"},n),{ref:t}))});nh.displayName="MenuSeparator";var ah=wt.forwardRef((e,t)=>{const s=e,{__scopeMenu:r}=s,n=Q(s,["__scopeMenu"]),a=jm(r);return ae.jsx(Wi,Y(G(G({},a),n),{ref:t}))});ah.displayName="MenuArrow";var[ih,oh]=bm("MenuSub"),lh="MenuSubTrigger",ch=wt.forwardRef((e,t)=>{const s=_m(lh,e.__scopeMenu),r=Sm(lh,e.__scopeMenu),n=oh(lh,e.__scopeMenu),a=Mm(lh,e.__scopeMenu),i=wt.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=a,c={__scopeMenu:e.__scopeMenu},d=wt.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return wt.useEffect(()=>d,[d]),wt.useEffect(()=>{const e=o.current;return()=>{window.clearTimeout(e),l(null)}},[o,l]),ae.jsx(Tm,Y(G({asChild:!0},c),{children:ae.jsx(Km,Y(G({id:n.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":n.contentId,"data-state":mh(s.open)},e),{ref:es(t,n.onTriggerChange),onClick:t=>{var r;null==(r=e.onClick)||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),s.open||s.onOpenChange(!0))},onPointerMove:Jt(e.onPointerMove,fh(t=>{a.onItemEnter(t),t.defaultPrevented||e.disabled||s.open||i.current||(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{s.onOpenChange(!0),d()},100))})),onPointerLeave:Jt(e.onPointerLeave,fh(e=>{var t,r;d();const n=null==(t=s.content)?void 0:t.getBoundingClientRect();if(n){const t=null==(r=s.content)?void 0:r.dataset.side,i="right"===t,l=i?-5:5,c=n[i?"left":"right"],d=n[i?"right":"left"];a.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:c,y:n.top},{x:d,y:n.top},{x:d,y:n.bottom},{x:c,y:n.bottom}],side:t}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(e),e.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Jt(e.onKeyDown,t=>{var n;const i=""!==a.searchRef.current;e.disabled||i&&" "===t.key||pm[r.dir].includes(t.key)&&(s.onOpenChange(!0),null==(n=s.content)||n.focus(),t.preventDefault())})}))}))});ch.displayName=lh;var dh="MenuSubContent",uh=wt.forwardRef((e,t)=>{const s=Dm(Im,e.__scopeMenu),r=e,{forceMount:n=s.forceMount}=r,a=Q(r,["forceMount"]),i=_m(Im,e.__scopeMenu),o=Sm(Im,e.__scopeMenu),l=oh(dh,e.__scopeMenu),c=wt.useRef(null),d=ts(t,c);return ae.jsx(xm.Provider,{scope:e.__scopeMenu,children:ae.jsx(Cs,{present:n||i.open,children:ae.jsx(xm.Slot,{scope:e.__scopeMenu,children:ae.jsx(zm,Y(G({id:l.contentId,"aria-labelledby":l.triggerId},a),{ref:d,align:"start",side:"rtl"===o.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;o.isUsingKeyboardRef.current&&(null==(t=c.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:Jt(e.onFocusOutside,e=>{e.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Jt(e.onEscapeKeyDown,e=>{o.onClose(),e.preventDefault()}),onKeyDown:Jt(e.onKeyDown,e=>{var t;const s=e.currentTarget.contains(e.target),r=fm[o.dir].includes(e.key);s&&r&&(i.onOpenChange(!1),null==(t=l.trigger)||t.focus(),e.preventDefault())})}))})})})});function mh(e){return e?"open":"closed"}function hh(e){return"indeterminate"===e}function ph(e){return hh(e)?"indeterminate":e?"checked":"unchecked"}function fh(e){return t=>"mouse"===t.pointerType?e(t):void 0}uh.displayName=dh;var gh=Em,xh=Tm,vh=Am,yh=Fm,bh=Um,wh=Vm,jh=qm,Nh=Zm,kh=Qm,_h=Jm,Ch=rh,Sh=nh,Eh=ah,Th=ch,Ph=uh,Rh="DropdownMenu",[Dh,Ah]=ls(Rh,[wm]),Ih=wm(),[Oh,Mh]=Dh(Rh),Fh=e=>{const{__scopeDropdownMenu:t,children:s,dir:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=Ih(t),c=wt.useRef(null),[d=!1,u]=Es({prop:n,defaultProp:a,onChange:i});return ae.jsx(Oh,{scope:t,triggerId:Hn(),triggerRef:c,contentId:Hn(),open:d,onOpenChange:u,onOpenToggle:wt.useCallback(()=>u(e=>!e),[u]),modal:o,children:ae.jsx(gh,Y(G({},l),{open:d,onOpenChange:u,dir:r,modal:o,children:s}))})};Fh.displayName=Rh;var Lh="DropdownMenuTrigger",$h=wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r,disabled:n=!1}=s,a=Q(s,["__scopeDropdownMenu","disabled"]),i=Mh(Lh,r),o=Ih(r);return ae.jsx(xh,Y(G({asChild:!0},o),{children:ae.jsx(ds.button,Y(G({type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n},a),{ref:es(t,i.triggerRef),onPointerDown:Jt(e.onPointerDown,e=>{n||0!==e.button||!1!==e.ctrlKey||(i.onOpenToggle(),i.open||e.preventDefault())}),onKeyDown:Jt(e.onKeyDown,e=>{n||(["Enter"," "].includes(e.key)&&i.onOpenToggle(),"ArrowDown"===e.key&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})}))}))});$h.displayName=Lh;var zh=e=>{const t=e,{__scopeDropdownMenu:s}=t,r=Q(t,["__scopeDropdownMenu"]),n=Ih(s);return ae.jsx(vh,G(G({},n),r))};zh.displayName="DropdownMenuPortal";var Uh="DropdownMenuContent",Vh=wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Mh(Uh,r),i=Ih(r),o=wt.useRef(!1);return ae.jsx(yh,Y(G(G({id:a.contentId,"aria-labelledby":a.triggerId},i),n),{ref:t,onCloseAutoFocus:Jt(e.onCloseAutoFocus,e=>{var t;o.current||null==(t=a.triggerRef.current)||t.focus(),o.current=!1,e.preventDefault()}),onInteractOutside:Jt(e.onInteractOutside,e=>{const t=e.detail.originalEvent,s=0===t.button&&!0===t.ctrlKey,r=2===t.button||s;a.modal&&!r||(o.current=!0)}),style:G(G({},e.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});Vh.displayName=Uh;wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(bh,Y(G(G({},a),n),{ref:t}))}).displayName="DropdownMenuGroup";var Bh=wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(wh,Y(G(G({},a),n),{ref:t}))});Bh.displayName="DropdownMenuLabel";var Wh=wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(jh,Y(G(G({},a),n),{ref:t}))});Wh.displayName="DropdownMenuItem";var qh=wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(Nh,Y(G(G({},a),n),{ref:t}))});qh.displayName="DropdownMenuCheckboxItem";wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(kh,Y(G(G({},a),n),{ref:t}))}).displayName="DropdownMenuRadioGroup";var Kh=wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(_h,Y(G(G({},a),n),{ref:t}))});Kh.displayName="DropdownMenuRadioItem";var Zh=wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(Ch,Y(G(G({},a),n),{ref:t}))});Zh.displayName="DropdownMenuItemIndicator";var Hh=wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(Sh,Y(G(G({},a),n),{ref:t}))});Hh.displayName="DropdownMenuSeparator";wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(Eh,Y(G(G({},a),n),{ref:t}))}).displayName="DropdownMenuArrow";var Gh=wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(Th,Y(G(G({},a),n),{ref:t}))});Gh.displayName="DropdownMenuSubTrigger";var Yh=wt.forwardRef((e,t)=>{const s=e,{__scopeDropdownMenu:r}=s,n=Q(s,["__scopeDropdownMenu"]),a=Ih(r);return ae.jsx(Ph,Y(G(G({},a),n),{ref:t,style:G(G({},e.style),{"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"})}))});Yh.displayName="DropdownMenuSubContent";var Qh=zh,Xh=Vh,Jh=Bh,ep=Wh,tp=qh,sp=Kh,rp=Zh,np=Hh,ap=Gh,ip=Yh;const op=Fh,lp=$h;wt.forwardRef((e,t)=>{var s=e,{className:r,inset:n,children:a}=s,i=Q(s,["className","inset","children"]);return ae.jsxs(ap,Y(G({ref:t,className:fn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",r)},i),{children:[a,ae.jsx(je,{className:"ml-auto h-4 w-4"})]}))}).displayName=ap.displayName;wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(ip,G({ref:t,className:fn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},n))}).displayName=ip.displayName;const cp=wt.forwardRef((e,t)=>{var s=e,{className:r,sideOffset:n=4}=s,a=Q(s,["className","sideOffset"]);return ae.jsx(Qh,{children:ae.jsx(Xh,G({ref:t,sideOffset:n,className:fn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},a))})});cp.displayName=Xh.displayName;const dp=wt.forwardRef((e,t)=>{var s=e,{className:r,inset:n}=s,a=Q(s,["className","inset"]);return ae.jsx(ep,G({ref:t,className:fn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",r)},a))});dp.displayName=ep.displayName;wt.forwardRef((e,t)=>{var s=e,{className:r,children:n,checked:a}=s,i=Q(s,["className","children","checked"]);return ae.jsxs(tp,Y(G({ref:t,className:fn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:a},i),{children:[ae.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:ae.jsx(rp,{children:ae.jsx(Ne,{className:"h-4 w-4"})})}),n]}))}).displayName=tp.displayName;wt.forwardRef((e,t)=>{var s=e,{className:r,children:n}=s,a=Q(s,["className","children"]);return ae.jsxs(sp,Y(G({ref:t,className:fn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},a),{children:[ae.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:ae.jsx(rp,{children:ae.jsx(ke,{className:"h-2 w-2 fill-current"})})}),n]}))}).displayName=sp.displayName;wt.forwardRef((e,t)=>{var s=e,{className:r,inset:n}=s,a=Q(s,["className","inset"]);return ae.jsx(Jh,G({ref:t,className:fn("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r)},a))}).displayName=Jh.displayName;const up=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(np,G({ref:t,className:fn("-mx-1 my-1 h-px bg-muted",r)},n))});up.displayName=np.displayName;const mp=()=>{const[e,t]=wt.useState(!1),[s,r]=wt.useState(!1),[n,a]=wt.useState(!1),i=Ct(),{currentUser:o,logOut:l}=ol();wt.useEffect(()=>{const e=()=>{window.scrollY>10?t(!0):t(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),wt.useEffect(()=>{r(!1)},[i]);const c=[{name:"Home",path:o?"/dashboard":"/"},{name:"Issues",path:"/issues"},{name:"Events",path:"/events"}],d=e=>i.pathname===e,u=()=>ne(void 0,null,function*(){try{yield l()}catch(e){}}),m=()=>{if(!o||!o.displayName)return"U";const e=o.displayName.split(" ");return 1===e.length?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase()};return ae.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 transition-all duration-300 "+(e?"glass shadow-subtle py-3":"py-5"),children:[ae.jsx("div",{className:"container mx-auto px-4 md:px-6",children:ae.jsxs("div",{className:"flex items-center justify-between",children:[ae.jsxs(St,{to:"/",className:"flex items-center",children:[ae.jsxs("div",{className:"relative h-10 w-10 rounded-full bg-primary flex items-center justify-center mr-2",children:[ae.jsx(oe,{className:"h-5 w-5 text-white absolute animate-spin-slow"}),ae.jsx(oe,{className:"h-5 w-5 text-white"})]}),ae.jsx("span",{className:"text-xl font-semibold",children:"Nagar Setu"})]}),ae.jsx("div",{className:"hidden md:flex items-center space-x-8",children:c.map(e=>ae.jsx(St,{to:e.path,className:"text-sm transition-colors duration-300 "+(d(e.path)?"font-medium text-primary":"text-foreground/80 hover:text-foreground"),children:e.name},e.path))}),ae.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[ae.jsx("button",{className:"p-2 rounded-full hover:bg-secondary/80 transition-colors duration-300",onClick:()=>{alert("Notifications feature coming soon!")},children:ae.jsx(_e,{className:"h-5 w-5 text-foreground/80"})}),o?ae.jsxs(op,{children:[ae.jsx(lp,{asChild:!0,children:ae.jsxs(qd,{variant:"ghost",size:"sm",className:"gap-2",children:[ae.jsxs(cu,{className:"h-8 w-8",children:[ae.jsx(du,{src:o.photoURL||void 0}),ae.jsx(uu,{children:m()})]}),ae.jsx("span",{className:"hidden sm:inline",children:o.displayName||o.email})]})}),ae.jsxs(cp,{align:"end",children:[ae.jsx(dp,{children:ae.jsxs(St,{to:"/profile",className:"flex items-center w-full",children:[ae.jsx(ue,{className:"mr-2 h-4 w-4"}),ae.jsx("span",{children:"Profile"})]})}),ae.jsxs(dp,{onClick:u,children:[ae.jsx(Ce,{className:"mr-2 h-4 w-4"}),ae.jsx("span",{children:"Sign out"})]})]})]}):ae.jsxs(ae.Fragment,{children:[ae.jsxs(qd,{variant:"ghost",size:"sm",className:"font-normal",onClick:()=>a(!0),children:[ae.jsx(ue,{className:"h-4 w-4 mr-2"}),"Sign In"]}),ae.jsx(qd,{onClick:()=>a(!0),children:"Get Started"})]})]}),ae.jsx("button",{className:"md:hidden p-2 rounded-full hover:bg-secondary/80 transition-colors",onClick:()=>r(!s),children:s?ae.jsx(ie,{className:"h-6 w-6"}):ae.jsx(Se,{className:"h-6 w-6"})})]})}),s&&ae.jsx("div",{className:"md:hidden glass mt-3 py-5 px-4 mx-4 rounded-xl animate-scale-in",children:ae.jsxs("div",{className:"flex flex-col space-y-4",children:[c.map(e=>ae.jsx(St,{to:e.path,className:"py-2 px-3 rounded-lg transition-colors "+(d(e.path)?"font-medium text-primary bg-secondary/50":"text-foreground/80 hover:bg-secondary/30"),children:e.name},e.path)),ae.jsx("div",{className:"border-t border-border/30 my-2"}),o?ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{className:"flex items-center p-2",children:[ae.jsxs(cu,{className:"h-8 w-8 mr-2",children:[ae.jsx(du,{src:o.photoURL||void 0}),ae.jsx(uu,{children:m()})]}),ae.jsx("span",{className:"font-medium",children:o.displayName||o.email})]}),ae.jsx(St,{to:"/profile",className:"w-full",children:ae.jsxs(qd,{className:"w-full justify-center",variant:"ghost",children:[ae.jsx(ue,{className:"h-4 w-4 mr-2"}),"Profile"]})}),ae.jsxs(qd,{className:"w-full justify-center",variant:"ghost",onClick:u,children:[ae.jsx(Ce,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}):ae.jsxs(ae.Fragment,{children:[ae.jsxs(qd,{className:"w-full justify-center",variant:"ghost",onClick:()=>a(!0),children:[ae.jsx(ue,{className:"h-4 w-4 mr-2"}),"Sign In"]}),ae.jsx(qd,{className:"w-full justify-center",onClick:()=>a(!0),children:"Get Started"})]})]})}),ae.jsx(Kd,{isOpen:n,onClose:()=>a(!1)})]})},hp=({id:e,title:t,description:s,location:r,category:n,image:a,date:i,volunteerCount:o})=>ae.jsxs("div",{className:"relative rounded-2xl overflow-hidden glass-dark h-[500px] group",children:[ae.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[ae.jsx("img",{src:a,alt:t,className:"w-full h-full object-cover transition-transform duration-2000 group-hover:scale-105"}),ae.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/50 to-transparent"})]}),ae.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end p-8 md:p-12",children:[ae.jsx("div",{className:"inline-block px-3 py-1 bg-white/20 backdrop-blur-sm text-white rounded-full text-sm font-medium mb-4",children:n}),ae.jsx("h2",{className:"text-white text-3xl md:text-4xl font-semibold mb-4 max-w-2xl text-balance",children:t}),ae.jsx("p",{className:"text-white/80 mb-6 max-w-2xl text-balance line-clamp-3 md:line-clamp-none",children:s}),ae.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-6 justify-between",children:[ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[ae.jsxs("div",{className:"flex items-center text-white/90",children:[ae.jsx(oe,{className:"h-4 w-4 mr-2"}),ae.jsx("span",{children:r})]}),ae.jsxs("div",{className:"flex items-center text-white/90",children:[ae.jsx(Ee,{className:"h-4 w-4 mr-2"}),ae.jsx("span",{children:i})]}),ae.jsxs("div",{className:"flex items-center text-white/90",children:[ae.jsx(ve,{className:"h-4 w-4 mr-2"}),ae.jsxs("span",{children:[o," volunteers"]})]})]}),ae.jsx(St,{to:`/issues/${e}`,children:ae.jsxs(qd,{className:"group",children:[ae.jsx("span",{children:"View Issue"}),ae.jsx(fe,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]})})]})]})]}),pp={Trash:"bg-amber-50 text-amber-600 border-amber-200",Water:"bg-blue-50 text-blue-600 border-blue-200",Infrastructure:"bg-purple-50 text-purple-600 border-purple-200",Electricity:"bg-yellow-50 text-yellow-600 border-yellow-200",Drainage:"bg-green-50 text-green-600 border-green-200",Other:"bg-gray-50 text-gray-600 border-gray-200"},fp=e=>pp[e]||pp.Other,gp=({id:e,title:t,description:s,location:r,category:n,image:a,images:i,date:o,commentsCount:l,volunteersCount:c,isFeatured:d=!1,className:u,onUpvoteUpdate:m})=>{const{currentUser:h}=ol(),{toast:p}=Xt(),[f,g]=wt.useState(!1),[x,v]=wt.useState(c),[y,b]=wt.useState(!1),[w,j]=wt.useState(0),[N,k]=wt.useState(null),[_,C]=wt.useState(null),S=i&&i.length>0?i:a?[a]:[],E=S.length>1;wt.useEffect(()=>{ne(void 0,null,function*(){if(h)try{const{data:t,error:s}=yield el.from("user_upvotes").select("id").eq("issue_id",e).eq("user_id",h.id).single();g(!!t)}catch(t){g(!1)}else g(!1)})},[e,h]),wt.useEffect(()=>{v(c)},[c]);return ae.jsxs("div",{className:fn("rounded-xl overflow-hidden bg-white border border-border/50 shadow-subtle hover:shadow-md transition-shadow",u),children:[ae.jsxs(St,{to:`/issues/${e}`,className:"block",children:[S.length>0&&ae.jsxs("div",{className:"relative w-full h-48 overflow-hidden group",onTouchStart:E?e=>{C(null),k(e.targetTouches[0].clientX)}:void 0,onTouchMove:E?e=>{C(e.targetTouches[0].clientX)}:void 0,onTouchEnd:E?e=>{if(e.preventDefault(),e.stopPropagation(),!N||!_)return;const t=N-_,s=t<-50;t>50?j(e=>e===S.length-1?0:e+1):s&&j(e=>0===e?S.length-1:e-1)}:void 0,children:[ae.jsx("img",{src:S[w],alt:`${t} - Image ${w+1}`,className:"w-full h-full object-cover transition-opacity duration-300",loading:"lazy"}),ae.jsx("div",{className:fn("absolute top-3 left-3 px-2 py-1 rounded-md text-xs font-medium border",fp(n)),children:n}),E&&ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{className:"absolute top-3 right-3 bg-black/70 text-white px-2 py-1 rounded-md text-xs font-medium",children:[w+1," / ",S.length]}),ae.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),j(e=>0===e?S.length-1:e-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Previous image",children:ae.jsx(Te,{className:"h-4 w-4"})}),ae.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),j(e=>e===S.length-1?0:e+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white p-2 rounded-full opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Next image",children:ae.jsx(je,{className:"h-4 w-4"})}),ae.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5",children:S.map((e,t)=>ae.jsx("button",{onClick:e=>((e,t)=>{t.preventDefault(),t.stopPropagation(),j(e)})(t,e),className:fn("w-2 h-2 rounded-full transition-all",t===w?"bg-white w-6":"bg-white/50 hover:bg-white/70"),"aria-label":`Go to image ${t+1}`},t))})]})]}),ae.jsxs("div",{className:"p-5",children:[!a&&ae.jsx("div",{className:fn("inline-flex mb-2 px-2 py-1 rounded-md text-xs font-medium border",fp(n)),children:n}),ae.jsx("h3",{className:fn("font-semibold mb-2 text-balance",d?"text-2xl":"text-lg"),children:t}),ae.jsx("p",{className:"text-muted-foreground text-sm mb-4 line-clamp-2",children:s}),ae.jsxs("div",{className:"flex items-center text-xs text-muted-foreground mb-3",children:[ae.jsx(oe,{className:"h-3 w-3 mr-1"}),ae.jsx("span",{className:"truncate",children:r})]})]})]}),ae.jsx("div",{className:"px-5 pb-4",children:ae.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/30",children:[ae.jsxs("div",{className:"flex items-center space-x-4",children:[ae.jsxs("button",{onClick:t=>ne(void 0,null,function*(){if(t.preventDefault(),t.stopPropagation(),h){if(!y){b(!0);try{const{data:t,error:s}=yield el.rpc("toggle_upvote",{p_issue_id:e,p_user_id:h.id});if(s)throw s;const r=t[0];g(r.upvoted),v(r.new_count),m&&m(e,r.new_count),p({title:r.upvoted?"Issue upvoted!":"Upvote removed",description:r.upvoted?"Thanks for supporting this issue!":"You removed your upvote"})}catch(s){p({title:"Error",description:s.message||"Failed to update upvote",variant:"destructive"})}finally{b(!1)}}}else p({title:"Authentication required",description:"Please sign in to upvote issues",variant:"destructive"})}),disabled:y,className:fn("flex items-center gap-1 px-2 py-1 rounded-md text-xs transition-colors",f?"bg-blue-100 text-blue-700 hover:bg-blue-200":"text-gray-600 hover:bg-gray-100",y&&"opacity-50 cursor-not-allowed"),children:[ae.jsx(Pe,{className:fn("h-3 w-3",f&&"fill-current")}),ae.jsx("span",{children:x})]}),ae.jsxs(St,{to:`/issues/${e}`,className:"flex items-center gap-1 text-gray-600 hover:text-gray-800 text-xs",children:[ae.jsx(Re,{className:"h-3 w-3"}),ae.jsx("span",{children:l})]})]}),ae.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[ae.jsx(Ee,{className:"h-3 w-3 mr-1"}),ae.jsx("span",{children:o})]})]})})]})},xp=()=>{const[e,t]=wt.useState([]),[s,r]=wt.useState(!0);wt.useEffect(()=>{n();const e=el.channel("homepage-success-stories").on("postgres_changes",{event:"UPDATE",schema:"public",table:"issues",filter:"status=eq.resolved"},e=>{n()}).subscribe();return()=>{e.unsubscribe()}},[]);const n=()=>ne(void 0,null,function*(){r(!0);try{const{data:e,error:s}=yield el.from("issues").select("\n          id,\n          title,\n          location,\n          image,\n          category,\n          after_image,\n          completed_at,\n          updated_at,\n          assigned_to,\n          user_profiles!issues_assigned_to_fkey(full_name, avatar_url)\n        ").eq("status","resolved").not("after_image","is",null).not("image","is",null).order("completed_at",{ascending:!1}).limit(3);if(s)throw s;if(e&&e.length>0){const s=e.filter(e=>e.image&&e.after_image).map(e=>{var t,s;return{id:e.id,title:e.title,location:e.location,beforeImage:e.image,afterImage:e.after_image,solverName:(null==(t=e.user_profiles)?void 0:t.full_name)||"Municipal Worker",solverAvatar:null==(s=e.user_profiles)?void 0:s.avatar_url,solvedDate:e.completed_at||e.updated_at,category:e.category}});t(s)}else t([])}catch(e){t([])}finally{r(!1)}});return s?ae.jsx("section",{className:"py-16 px-4 md:px-6 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950/20 dark:to-blue-950/20",children:ae.jsx("div",{className:"container mx-auto",children:ae.jsxs("div",{className:"text-center",children:[ae.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[ae.jsx("div",{className:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center",children:ae.jsx(De,{className:"h-4 w-4 text-white"})}),ae.jsx("h2",{className:"text-3xl font-semibold",children:"Success Stories"})]}),ae.jsx("p",{className:"text-muted-foreground mb-8",children:"Loading amazing transformations..."}),ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden animate-pulse",children:[ae.jsx("div",{className:"h-48 bg-gray-200 dark:bg-gray-700"}),ae.jsxs("div",{className:"p-5",children:[ae.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),ae.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded mb-4"}),ae.jsxs("div",{className:"flex items-center",children:[ae.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-700 rounded-full mr-3"}),ae.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded flex-1"})]})]})]},e))})]})})}):0===e.length?ae.jsx("section",{className:"py-16 px-4 md:px-6 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950/20 dark:to-blue-950/20",children:ae.jsxs("div",{className:"container mx-auto text-center",children:[ae.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[ae.jsx("div",{className:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center",children:ae.jsx(De,{className:"h-4 w-4 text-white"})}),ae.jsx("h2",{className:"text-3xl font-semibold",children:"Success Stories"})]}),ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-12 max-w-2xl mx-auto mt-8",children:[ae.jsx("div",{className:"text-6xl mb-4",children:""}),ae.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Success Stories Yet"}),ae.jsx("p",{className:"text-muted-foreground mb-6",children:"Success stories will appear here when issues are resolved with before/after photos by our municipal workers."}),ae.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:ae.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:[ae.jsx("strong",{children:"How it works:"})," When a worker completes an issue and uploads an 'after' photo, and an authority approves it as resolved, it becomes a success story showcasing our community's progress!"]})})]})]})}):ae.jsx("section",{className:"py-16 px-4 md:px-6 bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950/20 dark:to-blue-950/20",children:ae.jsxs("div",{className:"container mx-auto",children:[ae.jsxs("div",{className:"flex justify-between items-end mb-8",children:[ae.jsxs("div",{children:[ae.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[ae.jsx("div",{className:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center",children:ae.jsx(De,{className:"h-4 w-4 text-white"})}),ae.jsx("h2",{className:"text-3xl font-semibold",children:"Success Stories"})]}),ae.jsx("p",{className:"text-muted-foreground",children:"See how our community is making a real difference"})]}),ae.jsxs(St,{to:"/issues",className:"text-primary flex items-center hover:underline font-medium",children:[ae.jsx("span",{children:"View all stories"}),ae.jsx(fe,{className:"ml-1 h-4 w-4"})]})]}),ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,t)=>{return ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm overflow-hidden animate-scale-in",style:{animationDelay:.1*t+"s"},children:[ae.jsxs("div",{className:"grid grid-cols-2 h-48",children:[ae.jsxs("div",{className:"relative",children:[ae.jsx("img",{src:e.beforeImage,alt:"Before",className:"w-full h-full object-cover"}),ae.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded",children:"Before"})]}),ae.jsxs("div",{className:"relative",children:[ae.jsx("img",{src:e.afterImage,alt:"After",className:"w-full h-full object-cover"}),ae.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded",children:"After"})]})]}),ae.jsxs("div",{className:"p-5",children:[ae.jsx("h3",{className:"font-semibold text-lg mb-2 line-clamp-1",children:e.title}),ae.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx(oe,{className:"h-3 w-3"}),ae.jsx("span",{className:"truncate",children:e.location})]}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx(Ee,{className:"h-3 w-3"}),ae.jsxs("span",{children:["Solved ",(s=e.solvedDate,new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"}))]})]})]}),ae.jsxs("div",{className:"flex items-center gap-3 pt-3 border-t border-border",children:[ae.jsx("div",{className:"h-8 w-8 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-700 flex-shrink-0",children:e.solverAvatar?ae.jsx("img",{src:e.solverAvatar,alt:e.solverName,className:"w-full h-full object-cover"}):ae.jsx("div",{className:"w-full h-full flex items-center justify-center",children:ae.jsx(ue,{className:"h-4 w-4 text-muted-foreground"})})}),ae.jsxs("div",{className:"min-w-0 flex-1",children:[ae.jsx("p",{className:"text-sm font-medium truncate",children:e.solverName}),ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Community Hero"})]}),ae.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:e.category})]})]})]},e.id);var s})}),ae.jsxs("div",{className:"text-center mt-8",children:[ae.jsx("p",{className:"text-muted-foreground mb-4",children:"Want to be featured as a community hero? Help solve local issues!"}),ae.jsxs(St,{to:"/issues",className:"inline-flex items-center px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors font-medium",children:[ae.jsx("span",{children:"Find Issues to Solve"}),ae.jsx(fe,{className:"ml-2 h-4 w-4"})]})]})]})})},vp={id:"1",title:"Broken Park Benches in Willowbrook Park",description:"Several park benches in Willowbrook Park have been damaged and need repair. This has been an ongoing issue for several months, making it difficult for elderly visitors to enjoy the park.",location:"Willowbrook Park, Main Avenue",category:"Infrastructure",image:"https://images.unsplash.com/photo-1604357209793-fca5dca89f97?q=80&w=1200&auto=format&fit=crop",date:"2 days ago",volunteerCount:12},yp=[{id:"2",title:"Overflowing Trash Bins on Cedar Street",description:"The trash bins on Cedar Street have been overflowing for weeks now, causing litter to spread across the neighborhood.",location:"Cedar Street, Downtown",category:"Trash",image:"https://images.unsplash.com/photo-1605600659873-d808a13e4e4e?q=80&w=600&auto=format&fit=crop",date:"1 day ago",commentsCount:8,volunteersCount:5},{id:"3",title:"Water Shortage in Maple Garden Community",description:"Our community garden has been suffering from water shortage for the past week, endangering all the plants we've grown.",location:"Maple Garden, East Side",category:"Water",image:"https://images.unsplash.com/photo-1543674892-7d64d45facad?q=80&w=600&auto=format&fit=crop",date:"3 days ago",commentsCount:12,volunteersCount:7},{id:"4",title:"Drainage Blockage After Recent Rainfall",description:"The recent heavy rainfall has caused severe drainage blockage on Pine Road, creating large puddles and making it difficult to walk.",location:"Pine Road, North District",category:"Drainage",image:"https://images.unsplash.com/photo-1597435877854-a461fb2dd9f2?q=80&w=600&auto=format&fit=crop",date:"4 days ago",commentsCount:5,volunteersCount:3}],bp=()=>{const[e,t]=wt.useState(!1),s=_t(),{currentUser:r,isNewUser:n}=ol();return ae.jsxs("div",{className:"min-h-screen flex flex-col",children:[ae.jsx(mp,{}),ae.jsx("section",{className:"pt-32 pb-20 px-4 md:px-6 container mx-auto",children:ae.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[ae.jsxs("div",{className:"inline-flex items-center px-3 py-1.5 bg-secondary rounded-full text-sm mb-6 animate-slide-down",children:[ae.jsx(Ae,{className:"h-4 w-4 mr-2 text-primary"}),ae.jsx("span",{children:"Join 5,000+ residents improving their communities"})]}),ae.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-semibold mb-6 text-balance animate-slide-down",style:{animationDelay:"0.1s"},children:["Collaborate to solve ",ae.jsx("span",{className:"text-primary",children:"local issues"})," in your neighborhood"]}),ae.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto text-balance animate-slide-down",style:{animationDelay:"0.2s"},children:"Nagar Setu connects neighbors, communities, and local authorities to identify, discuss, and solve urban problems together."}),ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center animate-slide-down",style:{animationDelay:"0.3s"},children:[ae.jsxs(fl,{size:"lg",className:"group",onClick:()=>t(!0),children:[ae.jsx("span",{children:"Get Started"}),ae.jsx(fe,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]}),ae.jsxs(fl,{size:"lg",variant:"outline",onClick:()=>s("/issues"),children:[ae.jsx(Ie,{className:"mr-2 h-4 w-4"}),ae.jsx("span",{children:"Explore Issues"})]})]})]})}),ae.jsxs("section",{className:"py-16 px-4 md:px-6 container mx-auto",children:[ae.jsxs("div",{className:"flex justify-between items-end mb-8",children:[ae.jsxs("div",{children:[ae.jsx("h2",{className:"text-3xl font-semibold mb-2",children:"Featured Issue"}),ae.jsx("p",{className:"text-muted-foreground",children:"A highlighted problem that needs community attention"})]}),ae.jsxs(St,{to:"/issues",className:"text-primary flex items-center hover:underline font-medium",children:[ae.jsx("span",{children:"View all issues"}),ae.jsx(fe,{className:"ml-1 h-4 w-4"})]})]}),ae.jsx(hp,G({},vp))]}),ae.jsx(xp,{}),ae.jsxs("section",{className:"py-16 px-4 md:px-6 container mx-auto",children:[ae.jsx("div",{className:"flex justify-between items-end mb-8",children:ae.jsxs("div",{children:[ae.jsx("h2",{className:"text-3xl font-semibold mb-2",children:"Recent Issues"}),ae.jsx("p",{className:"text-muted-foreground",children:"Latest problems reported in your community"})]})}),ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[yp.map(e=>ae.jsx(gp,G({},e),e.id)),ae.jsxs("div",{onClick:()=>{r?s("/issues/report"):(t(!0),Qt({title:"Authentication required",description:"Please sign in to report an issue"}))},className:"flex flex-col items-center justify-center p-8 rounded-xl border border-dashed border-border bg-secondary/50 hover:bg-secondary transition-colors cursor-pointer",children:[ae.jsx(Oe,{className:"h-10 w-10 text-primary mb-4"}),ae.jsx("h3",{className:"text-lg font-medium mb-1",children:"Report an Issue"}),ae.jsx("p",{className:"text-muted-foreground text-sm text-center",children:"Notice a problem in your neighborhood? Report it here."})]})]})]}),ae.jsx("section",{className:"py-16 px-4 md:px-6 bg-secondary/50",children:ae.jsxs("div",{className:"container mx-auto",children:[ae.jsxs("div",{className:"text-center max-w-3xl mx-auto mb-16",children:[ae.jsx("h2",{className:"text-3xl font-semibold mb-4",children:"How Nagar Setu Works"}),ae.jsx("p",{className:"text-lg text-muted-foreground",children:"Our platform enables communities to collaboratively address local urban challenges"})]}),ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[ae.jsxs("div",{className:"bg-background p-8 rounded-xl shadow-subtle animate-scale-in",style:{animationDelay:"0.1s"},children:[ae.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center mb-6",children:ae.jsx(oe,{className:"h-6 w-6 text-primary"})}),ae.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Identify Issues"}),ae.jsx("p",{className:"text-muted-foreground",children:"Report problems in your neighborhood with photos and location details for everyone to see."})]}),ae.jsxs("div",{className:"bg-background p-8 rounded-xl shadow-subtle animate-scale-in",style:{animationDelay:"0.2s"},children:[ae.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center mb-6",children:ae.jsx(Re,{className:"h-6 w-6 text-primary"})}),ae.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Discuss Solutions"}),ae.jsx("p",{className:"text-muted-foreground",children:"Engage in conversations with neighbors and local authorities to find the best approach."})]}),ae.jsxs("div",{className:"bg-background p-8 rounded-xl shadow-subtle animate-scale-in",style:{animationDelay:"0.3s"},children:[ae.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center mb-6",children:ae.jsx(ve,{className:"h-6 w-6 text-primary"})}),ae.jsx("h3",{className:"text-xl font-semibold mb-3",children:"Take Action"}),ae.jsx("p",{className:"text-muted-foreground",children:"Coordinate with others, schedule events, and collaborate to solve problems together."})]})]})]})}),ae.jsx("section",{className:"py-20 px-4 md:px-6 container mx-auto",children:ae.jsx("div",{className:"glass p-8 md:p-12 rounded-2xl",children:ae.jsxs("div",{className:"max-w-3xl",children:[ae.jsx("h2",{className:"text-3xl md:text-4xl font-semibold mb-4",children:"Ready to improve your neighborhood?"}),ae.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"Join Nagar Setu today and be part of the solution. Together, we can make our communities better places to live."}),ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[ae.jsx(fl,{size:"lg",onClick:()=>t(!0),children:"Create an Account"}),ae.jsx(fl,{size:"lg",variant:"outline",onClick:()=>s("/issues"),children:"Explore Issues"})]})]})})}),ae.jsx("footer",{className:"bg-secondary/80 py-12 px-4 md:px-6",children:ae.jsxs("div",{className:"container mx-auto",children:[ae.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[ae.jsxs("div",{className:"mb-8 md:mb-0",children:[ae.jsxs("div",{className:"flex items-center",children:[ae.jsx("div",{className:"h-8 w-8 rounded-full bg-primary flex items-center justify-center mr-2",children:ae.jsx(oe,{className:"h-4 w-4 text-white"})}),ae.jsx("span",{className:"text-xl font-semibold",children:"Nagar Setu"})]}),ae.jsx("p",{className:"text-muted-foreground mt-4 max-w-md",children:"A platform for communities to collaboratively solve urban challenges and improve neighborhood living."})]}),ae.jsxs("div",{className:"grid grid-cols-2 gap-8 sm:grid-cols-3",children:[ae.jsxs("div",{children:[ae.jsx("h3",{className:"font-medium mb-4",children:"Platform"}),ae.jsxs("ul",{className:"space-y-3",children:[ae.jsx("li",{children:ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Home"})}),ae.jsx("li",{children:ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Issues"})}),ae.jsx("li",{children:ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Events"})})]})]}),ae.jsxs("div",{children:[ae.jsx("h3",{className:"font-medium mb-4",children:"Resources"}),ae.jsxs("ul",{className:"space-y-3",children:[ae.jsx("li",{children:ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Help Center"})}),ae.jsx("li",{children:ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Community Guidelines"})}),ae.jsx("li",{children:ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Privacy Policy"})}),ae.jsx("li",{children:ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Terms of Service"})})]})]}),ae.jsxs("div",{children:[ae.jsx("h3",{className:"font-medium mb-4",children:"Contact"}),ae.jsxs("ul",{className:"space-y-3",children:[ae.jsx("li",{children:ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Contact Us"})}),ae.jsx("li",{children:ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Feedback"})}),ae.jsx("li",{children:ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Report a Bug"})})]})]})]})]}),ae.jsxs("div",{className:"border-t border-border/50 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[ae.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",(new Date).getFullYear()," Nagar Setu. All rights reserved."]}),ae.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Twitter"}),ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Facebook"}),ae.jsx("a",{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Instagram"})]})]})]})}),ae.jsx(Kd,{isOpen:e,onClose:()=>t(!1)})]})},wp=wr("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function jp(e){var t=e,{className:s,variant:r}=t,n=Q(t,["className","variant"]);return ae.jsx("div",G({className:fn(wp({variant:r}),s)},n))}const Np=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx("textarea",G({className:fn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t},n))});function kp(e,[t,s]){return Math.min(s,Math.max(t,e))}Np.displayName="Textarea";var _p=[" ","Enter","ArrowUp","ArrowDown"],Cp=[" ","Enter"],Sp="Select",[Ep,Tp,Pp]=os(Sp),[Rp,Dp]=ls(Sp,[Pp,_i]),Ap=_i(),[Ip,Op]=Rp(Sp),[Mp,Fp]=Rp(Sp),Lp=e=>{const{__scopeSelect:t,children:s,open:r,defaultOpen:n,onOpenChange:a,value:i,defaultValue:o,onValueChange:l,dir:c,name:d,autoComplete:u,disabled:m,required:h,form:p}=e,f=Ap(t),[g,x]=wt.useState(null),[v,y]=wt.useState(null),[b,w]=wt.useState(!1),j=hu(c),[N=!1,k]=Es({prop:r,defaultProp:n,onChange:a}),[_,C]=Es({prop:i,defaultProp:o,onChange:l}),S=wt.useRef(null),E=!g||(p||!!g.closest("form")),[T,P]=wt.useState(new Set),R=Array.from(T).map(e=>e.props.value).join(";");return ae.jsx(Ui,Y(G({},f),{children:ae.jsxs(Ip,{required:h,scope:t,trigger:g,onTriggerChange:x,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:b,onValueNodeHasChildrenChange:w,contentId:Hn(),value:_,onValueChange:C,open:N,onOpenChange:k,dir:j,triggerPointerDownPosRef:S,disabled:m,children:[ae.jsx(Ep.Provider,{scope:t,children:ae.jsx(Mp,{scope:e.__scopeSelect,onNativeOptionAdd:wt.useCallback(e=>{P(t=>new Set(t).add(e))},[]),onNativeOptionRemove:wt.useCallback(e=>{P(t=>{const s=new Set(t);return s.delete(e),s})},[]),children:s})}),E?ae.jsxs(_f,{"aria-hidden":!0,required:h,tabIndex:-1,name:d,autoComplete:u,value:_,onChange:e=>C(e.target.value),disabled:m,form:p,children:[void 0===_?ae.jsx("option",{value:""}):null,Array.from(T)]},R):null]})}))};Lp.displayName=Sp;var $p="SelectTrigger",zp=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,disabled:n=!1}=s,a=Q(s,["__scopeSelect","disabled"]),i=Ap(r),o=Op($p,r),l=o.disabled||n,c=ts(t,o.onTriggerChange),d=Tp(r),u=wt.useRef("touch"),[m,h,p]=Cf(e=>{const t=d().filter(e=>!e.disabled),s=t.find(e=>e.value===o.value),r=Sf(t,e,s);void 0!==r&&o.onValueChange(r.value)}),f=e=>{l||(o.onOpenChange(!0),p()),e&&(o.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return ae.jsx(Vi,Y(G({asChild:!0},i),{children:ae.jsx(ds.button,Y(G({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":kf(o.value)?"":void 0},a),{ref:c,onClick:Jt(a.onClick,e=>{e.currentTarget.focus(),"mouse"!==u.current&&f(e)}),onPointerDown:Jt(a.onPointerDown,e=>{u.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(f(e),e.preventDefault())}),onKeyDown:Jt(a.onKeyDown,e=>{const t=""!==m.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||h(e.key),t&&" "===e.key||_p.includes(e.key)&&(f(),e.preventDefault())})}))}))});zp.displayName=$p;var Up="SelectValue",Vp=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,className:n,style:a,children:i,placeholder:o=""}=s,l=Q(s,["__scopeSelect","className","style","children","placeholder"]),c=Op(Up,r),{onValueNodeHasChildrenChange:d}=c,u=void 0!==i,m=ts(t,c.onValueNodeChange);return ks(()=>{d(u)},[d,u]),ae.jsx(ds.span,Y(G({},l),{ref:m,style:{pointerEvents:"none"},children:kf(c.value)?ae.jsx(ae.Fragment,{children:o}):i}))});Vp.displayName=Up;var Bp=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,children:n}=s,a=Q(s,["__scopeSelect","children"]);return ae.jsx(ds.span,Y(G({"aria-hidden":!0},a),{ref:t,children:n||""}))});Bp.displayName="SelectIcon";var Wp=e=>ae.jsx(_s,G({asChild:!0},e));Wp.displayName="SelectPortal";var qp="SelectContent",Kp=wt.forwardRef((e,t)=>{const s=Op(qp,e.__scopeSelect),[r,n]=wt.useState();if(ks(()=>{n(new DocumentFragment)},[]),!s.open){const t=r;return t?bt.createPortal(ae.jsx(Hp,{scope:e.__scopeSelect,children:ae.jsx(Ep.Slot,{scope:e.__scopeSelect,children:ae.jsx("div",{children:e.children})})}),t):null}return ae.jsx(Yp,Y(G({},e),{ref:t}))});Kp.displayName=qp;var Zp=10,[Hp,Gp]=Rp(qp),Yp=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:p,sticky:f,hideWhenDetached:g,avoidCollisions:x}=s,v=Q(s,["__scopeSelect","position","onCloseAutoFocus","onEscapeKeyDown","onPointerDownOutside","side","sideOffset","align","alignOffset","arrowPadding","collisionBoundary","collisionPadding","sticky","hideWhenDetached","avoidCollisions"]),y=Op(qp,r),[b,w]=wt.useState(null),[j,N]=wt.useState(null),k=ts(t,e=>w(e)),[_,C]=wt.useState(null),[S,E]=wt.useState(null),T=Tp(r),[P,R]=wt.useState(!1),D=wt.useRef(!1);wt.useEffect(()=>{if(b)return Hc(b)},[b]),fu();const A=wt.useCallback(e=>{const[t,...s]=T().map(e=>e.ref.current),[r]=s.slice(-1),n=document.activeElement;for(const a of e){if(a===n)return;if(null==a||a.scrollIntoView({block:"nearest"}),a===t&&j&&(j.scrollTop=0),a===r&&j&&(j.scrollTop=j.scrollHeight),null==a||a.focus(),document.activeElement!==n)return}},[T,j]),I=wt.useCallback(()=>A([_,b]),[A,_,b]);wt.useEffect(()=>{P&&I()},[P,I]);const{onOpenChange:O,triggerPointerDownPosRef:M}=y;wt.useEffect(()=>{if(b){let e={x:0,y:0};const t=t=>{var s,r,n,a;e={x:Math.abs(Math.round(t.pageX)-(null!=(r=null==(s=M.current)?void 0:s.x)?r:0)),y:Math.abs(Math.round(t.pageY)-(null!=(a=null==(n=M.current)?void 0:n.y)?a:0))}},s=s=>{e.x<=10&&e.y<=10?s.preventDefault():b.contains(s.target)||O(!1),document.removeEventListener("pointermove",t),M.current=null};return null!==M.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",s,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",s,{capture:!0})}}},[b,O,M]),wt.useEffect(()=>{const e=()=>O(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[O]);const[F,L]=Cf(e=>{const t=T().filter(e=>!e.disabled),s=t.find(e=>e.ref.current===document.activeElement),r=Sf(t,e,s);r&&setTimeout(()=>r.ref.current.focus())}),$=wt.useCallback((e,t,s)=>{const r=!D.current&&!s;(void 0!==y.value&&y.value===t||r)&&(C(e),r&&(D.current=!0))},[y.value]),z=wt.useCallback(()=>null==b?void 0:b.focus(),[b]),U=wt.useCallback((e,t,s)=>{const r=!D.current&&!s;(void 0!==y.value&&y.value===t||r)&&E(e)},[y.value]),V="popper"===n?Xp:Qp,B=V===Xp?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:p,sticky:f,hideWhenDetached:g,avoidCollisions:x}:{};return ae.jsx(Hp,{scope:r,content:b,viewport:j,onViewportChange:N,itemRefCallback:$,selectedItem:_,onItemLeave:z,itemTextRefCallback:U,focusSelectedItem:I,selectedItemText:S,position:n,isPositioned:P,searchRef:F,children:ae.jsx(dm,{as:rs,allowPinchZoom:!0,children:ae.jsx(bu,{asChild:!0,trapped:y.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:Jt(a,e=>{var t;null==(t=y.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:ae.jsx(vs,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:ae.jsx(V,Y(G(G({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:e=>e.preventDefault()},v),B),{onPlaced:()=>R(!0),ref:k,style:G({display:"flex",flexDirection:"column",outline:"none"},v.style),onKeyDown:Jt(v.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||L(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=T().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const s=e.target,r=t.indexOf(s);t=t.slice(r+1)}setTimeout(()=>A(t)),e.preventDefault()}})}))})})})})});Yp.displayName="SelectContentImpl";var Qp=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,onPlaced:n}=s,a=Q(s,["__scopeSelect","onPlaced"]),i=Op(qp,r),o=Gp(qp,r),[l,c]=wt.useState(null),[d,u]=wt.useState(null),m=ts(t,e=>u(e)),h=Tp(r),p=wt.useRef(!1),f=wt.useRef(!0),{viewport:g,selectedItem:x,selectedItemText:v,focusSelectedItem:y}=o,b=wt.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&g&&x&&v){const e=i.trigger.getBoundingClientRect(),t=d.getBoundingClientRect(),s=i.valueNode.getBoundingClientRect(),r=v.getBoundingClientRect();if("rtl"!==i.dir){const n=r.left-t.left,a=s.left-n,i=e.left-a,o=e.width+i,c=Math.max(o,t.width),d=window.innerWidth-Zp,u=kp(a,[Zp,Math.max(Zp,d-c)]);l.style.minWidth=o+"px",l.style.left=u+"px"}else{const n=t.right-r.right,a=window.innerWidth-s.right-n,i=window.innerWidth-e.right-a,o=e.width+i,c=Math.max(o,t.width),d=window.innerWidth-Zp,u=kp(a,[Zp,Math.max(Zp,d-c)]);l.style.minWidth=o+"px",l.style.right=u+"px"}const a=h(),o=window.innerHeight-2*Zp,c=g.scrollHeight,u=window.getComputedStyle(d),m=parseInt(u.borderTopWidth,10),f=parseInt(u.paddingTop,10),y=parseInt(u.borderBottomWidth,10),b=m+f+c+parseInt(u.paddingBottom,10)+y,w=Math.min(5*x.offsetHeight,b),j=window.getComputedStyle(g),N=parseInt(j.paddingTop,10),k=parseInt(j.paddingBottom,10),_=e.top+e.height/2-Zp,C=o-_,S=x.offsetHeight/2,E=m+f+(x.offsetTop+S),T=b-E;if(E<=_){const e=a.length>0&&x===a[a.length-1].ref.current;l.style.bottom="0px";const t=d.clientHeight-g.offsetTop-g.offsetHeight,s=E+Math.max(C,S+(e?k:0)+t+y);l.style.height=s+"px"}else{const e=a.length>0&&x===a[0].ref.current;l.style.top="0px";const t=Math.max(_,m+g.offsetTop+(e?N:0)+S)+T;l.style.height=t+"px",g.scrollTop=E-_+g.offsetTop}l.style.margin=`${Zp}px 0`,l.style.minHeight=w+"px",l.style.maxHeight=o+"px",null==n||n(),requestAnimationFrame(()=>p.current=!0)}},[h,i.trigger,i.valueNode,l,d,g,x,v,i.dir,n]);ks(()=>b(),[b]);const[w,j]=wt.useState();ks(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const N=wt.useCallback(e=>{e&&!0===f.current&&(b(),null==y||y(),f.current=!1)},[b,y]);return ae.jsx(Jp,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:ae.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:ae.jsx(ds.div,Y(G({},a),{ref:m,style:G({boxSizing:"border-box",maxHeight:"100%"},a.style)}))})})});Qp.displayName="SelectItemAlignedPosition";var Xp=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,align:n="start",collisionPadding:a=Zp}=s,i=Q(s,["__scopeSelect","align","collisionPadding"]),o=Ap(r);return ae.jsx(Bi,Y(G(G({},o),i),{ref:t,align:n,collisionPadding:a,style:G(G({boxSizing:"border-box"},i.style),{"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"})}))});Xp.displayName="SelectPopperPosition";var[Jp,ef]=Rp(qp,{}),tf="SelectViewport",sf=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,nonce:n}=s,a=Q(s,["__scopeSelect","nonce"]),i=Gp(tf,r),o=ef(tf,r),l=ts(t,i.onViewportChange),c=wt.useRef(0);return ae.jsxs(ae.Fragment,{children:[ae.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),ae.jsx(Ep.Slot,{scope:r,children:ae.jsx(ds.div,Y(G({"data-radix-select-viewport":"",role:"presentation"},a),{ref:l,style:G({position:"relative",flex:1,overflow:"hidden auto"},a.style),onScroll:Jt(a.onScroll,e=>{const t=e.currentTarget,{contentWrapper:s,shouldExpandOnScrollRef:r}=o;if((null==r?void 0:r.current)&&s){const e=Math.abs(c.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*Zp,n=parseFloat(s.style.minHeight),a=parseFloat(s.style.height),i=Math.max(n,a);if(i<r){const n=i+e,a=Math.min(r,n),o=n-a;s.style.height=a+"px","0px"===s.style.bottom&&(t.scrollTop=o>0?o:0,s.style.justifyContent="flex-end")}}}c.current=t.scrollTop})}))})]})});sf.displayName=tf;var rf="SelectGroup",[nf,af]=Rp(rf);wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,n=Q(s,["__scopeSelect"]),a=Hn();return ae.jsx(nf,{scope:r,id:a,children:ae.jsx(ds.div,Y(G({role:"group","aria-labelledby":a},n),{ref:t}))})}).displayName=rf;var of="SelectLabel",lf=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,n=Q(s,["__scopeSelect"]),a=af(of,r);return ae.jsx(ds.div,Y(G({id:a.id},n),{ref:t}))});lf.displayName=of;var cf="SelectItem",[df,uf]=Rp(cf),mf=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,value:n,disabled:a=!1,textValue:i}=s,o=Q(s,["__scopeSelect","value","disabled","textValue"]),l=Op(cf,r),c=Gp(cf,r),d=l.value===n,[u,m]=wt.useState(null!=i?i:""),[h,p]=wt.useState(!1),f=ts(t,e=>{var t;return null==(t=c.itemRefCallback)?void 0:t.call(c,e,n,a)}),g=Hn(),x=wt.useRef("touch"),v=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(""===n)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return ae.jsx(df,{scope:r,value:n,disabled:a,textId:g,isSelected:d,onItemTextChange:wt.useCallback(e=>{m(t=>{var s;return t||(null!=(s=null==e?void 0:e.textContent)?s:"").trim()})},[]),children:ae.jsx(Ep.ItemSlot,{scope:r,value:n,disabled:a,textValue:u,children:ae.jsx(ds.div,Y(G({role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1},o),{ref:f,onFocus:Jt(o.onFocus,()=>p(!0)),onBlur:Jt(o.onBlur,()=>p(!1)),onClick:Jt(o.onClick,()=>{"mouse"!==x.current&&v()}),onPointerUp:Jt(o.onPointerUp,()=>{"mouse"===x.current&&v()}),onPointerDown:Jt(o.onPointerDown,e=>{x.current=e.pointerType}),onPointerMove:Jt(o.onPointerMove,e=>{var t;x.current=e.pointerType,a?null==(t=c.onItemLeave)||t.call(c):"mouse"===x.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Jt(o.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=c.onItemLeave)||t.call(c))}),onKeyDown:Jt(o.onKeyDown,e=>{var t;""!==(null==(t=c.searchRef)?void 0:t.current)&&" "===e.key||(Cp.includes(e.key)&&v()," "===e.key&&e.preventDefault())})}))})})});mf.displayName=cf;var hf="SelectItemText",pf=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,className:n,style:a}=s,i=Q(s,["__scopeSelect","className","style"]),o=Op(hf,r),l=Gp(hf,r),c=uf(hf,r),d=Fp(hf,r),[u,m]=wt.useState(null),h=ts(t,e=>m(e),c.onItemTextChange,e=>{var t;return null==(t=l.itemTextRefCallback)?void 0:t.call(l,e,c.value,c.disabled)}),p=null==u?void 0:u.textContent,f=wt.useMemo(()=>ae.jsx("option",{value:c.value,disabled:c.disabled,children:p},c.value),[c.disabled,c.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:x}=d;return ks(()=>(g(f),()=>x(f)),[g,x,f]),ae.jsxs(ae.Fragment,{children:[ae.jsx(ds.span,Y(G({id:c.textId},i),{ref:h})),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?bt.createPortal(i.children,o.valueNode):null]})});pf.displayName=hf;var ff="SelectItemIndicator",gf=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,n=Q(s,["__scopeSelect"]);return uf(ff,r).isSelected?ae.jsx(ds.span,Y(G({"aria-hidden":!0},n),{ref:t})):null});gf.displayName=ff;var xf="SelectScrollUpButton",vf=wt.forwardRef((e,t)=>{const s=Gp(xf,e.__scopeSelect),r=ef(xf,e.__scopeSelect),[n,a]=wt.useState(!1),i=ts(t,r.onScrollButtonChange);return ks(()=>{if(s.viewport&&s.isPositioned){let e=function(){const e=t.scrollTop>0;a(e)};const t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),n?ae.jsx(wf,Y(G({},e),{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}})):null});vf.displayName=xf;var yf="SelectScrollDownButton",bf=wt.forwardRef((e,t)=>{const s=Gp(yf,e.__scopeSelect),r=ef(yf,e.__scopeSelect),[n,a]=wt.useState(!1),i=ts(t,r.onScrollButtonChange);return ks(()=>{if(s.viewport&&s.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,s=Math.ceil(t.scrollTop)<e;a(s)};const t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),n?ae.jsx(wf,Y(G({},e),{ref:i,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}})):null});bf.displayName=yf;var wf=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r,onAutoScroll:n}=s,a=Q(s,["__scopeSelect","onAutoScroll"]),i=Gp("SelectScrollButton",r),o=wt.useRef(null),l=Tp(r),c=wt.useCallback(()=>{null!==o.current&&(window.clearInterval(o.current),o.current=null)},[]);return wt.useEffect(()=>()=>c(),[c]),ks(()=>{var e;const t=l().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[l]),ae.jsx(ds.div,Y(G({"aria-hidden":!0},a),{ref:t,style:G({flexShrink:0},a.style),onPointerDown:Jt(a.onPointerDown,()=>{null===o.current&&(o.current=window.setInterval(n,50))}),onPointerMove:Jt(a.onPointerMove,()=>{var e;null==(e=i.onItemLeave)||e.call(i),null===o.current&&(o.current=window.setInterval(n,50))}),onPointerLeave:Jt(a.onPointerLeave,()=>{c()})}))}),jf=wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,n=Q(s,["__scopeSelect"]);return ae.jsx(ds.div,Y(G({"aria-hidden":!0},n),{ref:t}))});jf.displayName="SelectSeparator";var Nf="SelectArrow";function kf(e){return""===e||void 0===e}wt.forwardRef((e,t)=>{const s=e,{__scopeSelect:r}=s,n=Q(s,["__scopeSelect"]),a=Ap(r),i=Op(Nf,r),o=Gp(Nf,r);return i.open&&"popper"===o.position?ae.jsx(Wi,Y(G(G({},a),n),{ref:t})):null}).displayName=Nf;var _f=wt.forwardRef((e,t)=>{const s=e,{value:r}=s,n=Q(s,["value"]),a=wt.useRef(null),i=ts(t,a),o=function(e){const t=wt.useRef({value:e,previous:e});return wt.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(r);return wt.useEffect(()=>{const e=a.current,t=window.HTMLSelectElement.prototype,s=Object.getOwnPropertyDescriptor(t,"value").set;if(o!==r&&s){const t=new Event("change",{bubbles:!0});s.call(e,r),e.dispatchEvent(t)}},[o,r]),ae.jsx(Ts,{asChild:!0,children:ae.jsx("select",Y(G({},n),{ref:i,defaultValue:r}))})});function Cf(e){const t=ms(e),s=wt.useRef(""),r=wt.useRef(0),n=wt.useCallback(e=>{const n=s.current+e;t(n),function e(t){s.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(n)},[t]),a=wt.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return wt.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,n,a]}function Sf(e,t,s){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,n=s?e.indexOf(s):-1;let a=(i=e,o=Math.max(n,0),i.map((e,t)=>i[(o+t)%i.length]));var i,o;1===r.length&&(a=a.filter(e=>e!==s));const l=a.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==s?l:void 0}_f.displayName="BubbleSelect";var Ef=zp,Tf=Bp,Pf=Wp,Rf=Kp,Df=sf,Af=lf,If=mf,Of=pf,Mf=gf,Ff=vf,Lf=bf,$f=jf;const zf=Lp,Uf=Vp,Vf=wt.forwardRef((e,t)=>{var s=e,{className:r,children:n}=s,a=Q(s,["className","children"]);return ae.jsxs(Ef,Y(G({ref:t,className:fn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r)},a),{children:[n,ae.jsx(Tf,{asChild:!0,children:ae.jsx(Me,{className:"h-4 w-4 opacity-50"})})]}))});Vf.displayName=Ef.displayName;const Bf=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(Ff,Y(G({ref:t,className:fn("flex cursor-default items-center justify-center py-1",r)},n),{children:ae.jsx(Fe,{className:"h-4 w-4"})}))});Bf.displayName=Ff.displayName;const Wf=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(Lf,Y(G({ref:t,className:fn("flex cursor-default items-center justify-center py-1",r)},n),{children:ae.jsx(Me,{className:"h-4 w-4"})}))});Wf.displayName=Lf.displayName;const qf=wt.forwardRef((e,t)=>{var s=e,{className:r,children:n,position:a="popper"}=s,i=Q(s,["className","children","position"]);return ae.jsx(Pf,{children:ae.jsxs(Rf,Y(G({ref:t,className:fn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:a},i),{children:[ae.jsx(Bf,{}),ae.jsx(Df,{className:fn("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),ae.jsx(Wf,{})]}))})});qf.displayName=Rf.displayName;wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(Af,G({ref:t,className:fn("py-1.5 pl-8 pr-2 text-sm font-semibold",r)},n))}).displayName=Af.displayName;const Kf=wt.forwardRef((e,t)=>{var s=e,{className:r,children:n}=s,a=Q(s,["className","children"]);return ae.jsxs(If,Y(G({ref:t,className:fn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r)},a),{children:[ae.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:ae.jsx(Mf,{children:ae.jsx(Ne,{className:"h-4 w-4"})})}),ae.jsx(Of,{children:n})]}))});Kf.displayName=If.displayName;wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx($f,G({ref:t,className:fn("-mx-1 my-1 h-px bg-muted",r)},n))}).displayName=$f.displayName;const Zf=e=>{const t=["pothole","crack","damage","broken","leak","trash","garbage","streetlight","road","sidewalk","water","drain","hole"],s=e.filter(e=>t.some(t=>e.toLowerCase().includes(t)));return s.length>0?`Issue detected: ${s.join(", ").toLowerCase()}. Please review and add more details if needed.`:e.some(e=>e.toLowerCase().includes("road")||e.toLowerCase().includes("street"))?"Road or street issue detected. Please specify the exact problem (pothole, crack, damage, etc.).":e.some(e=>e.toLowerCase().includes("water")||e.toLowerCase().includes("liquid"))?"Water-related issue detected. Please specify if it's a leak, flooding, or drainage problem.":e.some(e=>e.toLowerCase().includes("light")||e.toLowerCase().includes("lamp"))?"Street lighting issue detected. Please specify if the light is broken, flickering, or not working.":e.some(e=>e.toLowerCase().includes("trash")||e.toLowerCase().includes("waste"))?"Waste management issue detected. Please specify if bins are overflowing, litter, or collection problem.":"Issue detected in uploaded image. Please provide specific details about the problem."},Hf=e=>{const t=e.map(e=>e.toLowerCase());return t.some(e=>e.includes("road")||e.includes("street")||e.includes("pothole")||e.includes("asphalt")||e.includes("pavement")||e.includes("sidewalk"))?"infrastructure":t.some(e=>e.includes("water")||e.includes("leak")||e.includes("drain")||e.includes("flooding")||e.includes("pipe"))?"water":t.some(e=>e.includes("light")||e.includes("lamp")||e.includes("electric")||e.includes("wire")||e.includes("pole"))?"streetlight":t.some(e=>e.includes("trash")||e.includes("garbage")||e.includes("waste")||e.includes("litter")||e.includes("bin"))?"waste":"others"},Gf=e=>ne(void 0,null,function*(){try{const t=yield(e=>new Promise((t,s)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const e=r.result.split(",")[1];t(e)},r.onerror=e=>s(e)}))(e),s={requests:[{image:{content:t},features:[{type:"LABEL_DETECTION",maxResults:10}]}]},r=yield fetch("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyD7nJAmr4M4-qfzUQtubXAgWpc1P4ATh9E",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error(`Vision API error: ${r.status} - ${r.statusText}`);const n=yield r.json();if(n.error)throw new Error(`API Error: ${n.error.message}`);const a=n.responses[0];if(!a||!a.labelAnnotations)throw new Error("No labels detected in image");const i=a.labelAnnotations.map(e=>e.description);return{description:Zf(i),category:Hf(i)}}catch(t){throw new Error(`Failed to analyze image: ${t.message}`)}}),Yf=wt.forwardRef((e,t)=>{var s=e,{className:r,type:n}=s,a=Q(s,["className","type"]);return ae.jsx("input",G({type:n,className:fn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t},a))});Yf.displayName="Input";const Qf="AIzaSyD7nJAmr4M4-qfzUQtubXAgWpc1P4ATh9E",Xf=({value:e,onChange:t,placeholder:s})=>{const[r,n]=wt.useState(!1),[a,i]=wt.useState(!1),[o,l]=wt.useState(null),[c,d]=wt.useState(""),u=wt.useRef(null),m=wt.useRef(null),h=wt.useRef(null),{userLocation:p,isLocationAvailable:f,requestLocationUpdate:g}=dl();wt.useEffect(()=>{f&&p&&!e&&t(p.address,{lat:p.lat,lng:p.lng})},[f,p,e,t]);const x=()=>{if(u.current&&(m.current&&(m.current=null),window.google&&window.google.maps))try{const e={lat:20.5937,lng:78.9629},t=new window.google.maps.Map(u.current,{center:e,zoom:6,mapTypeControl:!0,streetViewControl:!1,fullscreenControl:!1,zoomControl:!0,gestureHandling:"cooperative"});m.current=t,t.addListener("click",e=>{if(!e.latLng)return;const s={lat:e.latLng.lat(),lng:e.latLng.lng()};l(s),h.current&&h.current.setMap(null);const r=new window.google.maps.Marker({position:s,map:t,title:"Selected Location",animation:window.google.maps.Animation.DROP});h.current=r,v(s),Qt({title:"Location Selected",description:"Scroll down to save this location."})}),setTimeout(()=>{const e=document.getElementById("map-search-input");if(e&&window.google.maps.places){const s=new window.google.maps.places.SearchBox(e);t.addListener("bounds_changed",()=>{s.setBounds(t.getBounds())}),s.addListener("places_changed",()=>{const r=s.getPlaces();if(!r||0===r.length)return;const n=r[0];if(!n.geometry||!n.geometry.location)return void Qt({title:"Location Error",description:"Could not find coordinates for this location. Try another search.",variant:"destructive"});const a={lat:n.geometry.location.lat(),lng:n.geometry.location.lng()};l(a),h.current&&h.current.setMap(null);const i=new window.google.maps.Marker({position:a,map:t,title:n.name||"Selected Location",animation:window.google.maps.Animation.BOUNCE});setTimeout(()=>{i.setAnimation(null)},2e3),h.current=i;const o=n.formatted_address||n.name||`${a.lat.toFixed(6)}, ${a.lng.toFixed(6)}`;d(o),n.geometry.viewport?t.fitBounds(n.geometry.viewport):(t.setCenter(a),t.setZoom(17)),e.value="",Qt({title:"Location Found",description:`Selected: ${n.name||o}. Scroll down to save.`})})}},500),f&&p&&(t.setCenter({lat:p.lat,lng:p.lng}),t.setZoom(15))}catch(e){Qt({title:"Map Error",description:"Failed to create map. Please refresh and try again.",variant:"destructive"})}},v=e=>ne(void 0,null,function*(){try{const t=yield fetch(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${e.lat},${e.lng}&key=${Qf}`),s=yield t.json();if(s.results&&s.results.length>0){const e=s.results[0].formatted_address;d(e)}else d(`${e.lat}, ${e.lng}`)}catch(t){d(`${e.lat}, ${e.lng}`)}});wt.useEffect(()=>{if(!r)return;if(window.google&&window.google.maps&&window.google.maps.places)return void setTimeout(x,100);const e=document.createElement("script");return e.src=`https://maps.googleapis.com/maps/api/js?key=${Qf}&libraries=places&callback=initMap`,e.async=!0,e.defer=!0,window.initMap=()=>{setTimeout(x,100)},e.onerror=e=>{Qt({title:"Map Loading Error",description:"Failed to load Google Maps. Please check your internet connection.",variant:"destructive"})},document.head.appendChild(e),()=>{window.initMap&&delete window.initMap}},[r]);return ae.jsxs("div",{className:"space-y-2",children:[f&&p&&e===p.address&&ae.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600 bg-green-50 px-3 py-1 rounded",children:[ae.jsx(oe,{className:"h-4 w-4"}),ae.jsx("span",{children:"Using your current location"})]}),ae.jsxs("div",{className:"flex gap-2",children:[ae.jsx("div",{className:"flex-1",children:ae.jsx(Yf,{value:e,onChange:e=>t(e.target.value),placeholder:s||(f?"Auto-detected location or enter manually":"Enter location or use GPS/Map"),className:"pr-20"})}),ae.jsx(fl,{type:"button",variant:"outline",size:"sm",onClick:()=>ne(void 0,null,function*(){i(!0);try{if(f&&p){if(Date.now()-p.timestamp<3e5)return t(p.address,{lat:p.lat,lng:p.lng}),Qt({title:"Location Retrieved",description:"Using your saved location."}),void i(!1)}const e=yield g();e?(t(e.address,{lat:e.lat,lng:e.lng}),Qt({title:"Location Updated",description:"Your current location has been detected successfully!"})):Qt({title:"Location Error",description:"Unable to detect your location. Please enter manually or use the map.",variant:"destructive"})}catch(e){Qt({title:"Location Error",description:"Unable to detect your location. Please enter manually or use the map.",variant:"destructive"})}finally{i(!1)}}),disabled:a,className:"flex-shrink-0",title:"Get current location",children:a?ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):ae.jsx(de,{className:"h-4 w-4"})}),ae.jsx(fl,{type:"button",variant:"outline",size:"sm",onClick:()=>n(!0),className:"flex-shrink-0",title:"Select on map",children:ae.jsx(oe,{className:"h-4 w-4"})})]}),ae.jsx(Dd,{open:r,onOpenChange:e=>{e&&n(e)},children:ae.jsxs(Od,{className:"max-w-5xl w-[95vw] h-[85vh] p-0 overflow-hidden",onInteractOutside:e=>{e.preventDefault()},onEscapeKeyDown:e=>{if(o){window.confirm("Close without saving? Your selected location will be lost.")||e.preventDefault()}},children:[ae.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-white",children:[ae.jsxs("div",{children:[ae.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[ae.jsx(oe,{className:"h-5 w-5"}),"Select Issue Location"]}),ae.jsx("p",{className:"text-sm text-gray-600",children:"Search for a location or click on the map to select"})]}),ae.jsx(fl,{variant:"ghost",size:"sm",onClick:()=>{(!o||window.confirm("Close without saving? Your selected location will be lost."))&&(n(!1),l(null),d(""))},title:"Close map",children:ae.jsx(ie,{className:"h-4 w-4"})})]}),ae.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[ae.jsxs("div",{className:"relative",children:[ae.jsx("div",{ref:u,className:"w-full h-[400px] bg-gray-100",style:{minHeight:"400px"}}),ae.jsx("div",{className:"absolute top-3 left-1/2 transform -translate-x-1/2 z-10 w-full max-w-md px-4",children:ae.jsxs("div",{className:"relative",children:[ae.jsx("input",{type:"text",placeholder:" Search for a location (e.g., Mumbai, India Gate, etc.)",className:"w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-lg shadow-xl text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",id:"map-search-input",autoComplete:"off"}),ae.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs",children:"Press Enter"})]})})]}),ae.jsx("div",{className:"p-4 bg-gray-50",children:o?ae.jsxs("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:[ae.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ae.jsx(oe,{className:"h-5 w-5 text-green-600"}),ae.jsx("p",{className:"font-medium text-green-800",children:"Location Selected!"})]}),ae.jsx("p",{className:"text-green-700 mb-1",children:c||"Getting address..."}),ae.jsxs("p",{className:"text-sm text-green-600",children:["Coordinates: ",o.lat.toFixed(6),", ",o.lng.toFixed(6)]}),ae.jsx("p",{className:"text-sm text-green-500 mt-2",children:" Scroll down to save this location"})]}):ae.jsxs("div",{className:"bg-white border border-gray-200 p-4 rounded-lg",children:[ae.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ae.jsx(oe,{className:"h-5 w-5 text-gray-400"}),ae.jsx("p",{className:"font-medium text-gray-600",children:"No Location Selected"})]}),ae.jsx("p",{className:"text-gray-500",children:"Search for a location above or click anywhere on the map to select it"})]})}),ae.jsxs("div",{className:"p-4 bg-blue-50 border-t",children:[ae.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"How to select a location:"}),ae.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[ae.jsxs("li",{children:[" ",ae.jsx("strong",{children:"Search:"})," Type a location name in the search box above the map"]}),ae.jsxs("li",{children:[" ",ae.jsx("strong",{children:"Click:"})," Click anywhere on the map to place a marker"]}),ae.jsxs("li",{children:[" ",ae.jsx("strong",{children:"Navigate:"})," Use zoom controls to find the exact spot"]})]})]}),ae.jsx("div",{className:"p-4 bg-white border-t sticky bottom-0",children:ae.jsxs("div",{className:"flex justify-between items-center gap-4",children:[ae.jsx(fl,{variant:"outline",onClick:()=>{n(!1),l(null),d("")},className:"px-8",children:"Cancel"}),ae.jsxs("div",{className:"flex items-center gap-3",children:[o&&ae.jsxs("div",{className:"text-sm text-green-600 flex items-center gap-2",children:[ae.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),"Ready to save"]}),ae.jsx(fl,{onClick:()=>{if(o&&c)t(c,o),Qt({title:"Location Saved",description:"Selected location has been saved successfully!"}),n(!1),l(null),d("");else if(o&&!c){const e=`${o.lat.toFixed(6)}, ${o.lng.toFixed(6)}`;t(e,o),Qt({title:"Location Saved",description:"Selected coordinates have been saved successfully!"}),n(!1),l(null),d("")}else Qt({title:"No Location Selected",description:"Please click on the map or search for a location first.",variant:"destructive"})},disabled:!o,className:"px-8 "+(o?"bg-green-600 hover:bg-green-700 shadow-lg":"bg-gray-400 cursor-not-allowed"),children:o?ae.jsxs(ae.Fragment,{children:[ae.jsx(oe,{className:"h-4 w-4 mr-2"}),"Save Location"]}):"Select Location First"})]})]})})]})]})})]})},Jf=()=>{const{currentUser:e}=ol(),t=_t(),[s,r]=wt.useState([]),[n,a]=wt.useState(!0),[i,o]=wt.useState(!1),[l,c]=wt.useState([]),[d,u]=wt.useState([]),[m,h]=wt.useState(""),[p,f]=wt.useState(""),[g,x]=wt.useState(""),[v,y]=wt.useState(null),[b,w]=wt.useState(!1),[j,N]=wt.useState(!1),[k,_]=wt.useState(!1),[C,S]=wt.useState(null);wt.useEffect(()=>{var e;i&&(null==(e=navigator.geolocation)||e.getCurrentPosition(e=>x(`${e.coords.latitude}, ${e.coords.longitude}`),()=>x("Unable to detect location")))},[i]),wt.useEffect(()=>{ne(void 0,null,function*(){if(e)try{const{data:t,error:s}=yield el.from("issues").select("*").eq("created_by",e.id).order("created_at",{ascending:!1});if(s)throw s;r(t||[])}catch(t){Qt({title:"Error loading issues",description:"Failed to load your reported issues",variant:"destructive"})}finally{a(!1)}})},[e]);const E=(e,t="file")=>ne(void 0,null,function*(){const t=Array.from(e.target.files||[]);if(0===t.length)return;const s=5-l.length,r=t.slice(0,s);t.length>s&&Qt({title:"Photo limit reached",description:`You can only upload ${s} more photo(s). Maximum 5 photos allowed.`,variant:"destructive"});const n=r.map(e=>URL.createObjectURL(e));c(e=>[...e,...n]),u(e=>[...e,...r]),e.target.value=""}),T=e=>ne(void 0,null,function*(){if(0!==e.length){_(!0);try{const t=yield(e=>ne(void 0,null,function*(){if(0===e.length)throw new Error("No images to analyze");try{const t=yield Gf(e[0]);return e.length>1&&(t.description=`Multiple images uploaded. ${t.description}`),t}catch(t){throw t}}))(e);S(t),Qt({title:" AI Analysis Complete",description:"Smart description and category suggestions generated!"})}catch(t){Qt({title:"AI Analysis Failed",description:t.message||"Unable to analyze images. Please add description manually.",variant:"destructive"})}finally{_(!1)}}else Qt({title:"No Photos",description:"Please upload photos first to generate description.",variant:"destructive"})}),P=()=>{l.forEach(e=>URL.revokeObjectURL(e)),c([]),u([]),S(null)},R=e=>{switch(e){case"resolved":return ae.jsx(le,{className:"h-4 w-4 text-green-500"});case"in_progress":return ae.jsx(qe,{className:"h-4 w-4 text-yellow-500"});default:return ae.jsx(ce,{className:"h-4 w-4 text-red-500"})}},D=e=>{switch(e){case"resolved":return"Resolved";case"in_progress":return"In Progress";case"assigned":return"Assigned";default:return"Pending"}},A=e=>{switch(e){case"resolved":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"assigned":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-red-100 text-red-800 border-red-200"}};return n?ae.jsxs("div",{className:"min-h-screen flex flex-col",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"flex-1 flex items-center justify-center",children:ae.jsx(Le,{className:"h-8 w-8 animate-spin"})})]}):ae.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[ae.jsx(mp,{}),ae.jsxs("div",{className:"flex-1 pt-20",children:[ae.jsx("div",{className:"bg-white shadow-sm border-b",children:ae.jsx("div",{className:"container mx-auto px-4 py-6",children:ae.jsxs("div",{className:"flex justify-between items-center",children:[ae.jsxs("div",{children:[ae.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Reported Issues"}),ae.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage your community reports"})]}),ae.jsxs(fl,{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700",children:[ae.jsx($e,{className:"h-4 w-4 mr-2"}),"Report Issue"]})]})})}),ae.jsx("div",{className:"container mx-auto px-4 py-8",children:0===s.length?ae.jsxs("div",{className:"text-center py-12",children:[ae.jsx(ce,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),ae.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No issues reported yet"}),ae.jsx("p",{className:"text-gray-600 mb-6",children:"Start by reporting your first community issue"}),ae.jsxs(fl,{onClick:()=>o(!0),children:[ae.jsx($e,{className:"h-4 w-4 mr-2"}),"Report Your First Issue"]})]}):ae.jsx("div",{className:"grid gap-6",children:s.map(e=>ae.jsx(Ud,{className:"overflow-hidden hover:shadow-md transition-shadow",children:ae.jsx(Wd,{className:"p-6",children:ae.jsxs("div",{className:"flex gap-6",children:[ae.jsx("div",{className:"flex-shrink-0",children:e.image?ae.jsx("img",{src:e.image,alt:e.title,className:"w-24 h-24 rounded-lg object-cover"}):ae.jsx("div",{className:"w-24 h-24 rounded-lg bg-gray-200 flex items-center justify-center",children:ae.jsx(ce,{className:"h-8 w-8 text-gray-400"})})}),ae.jsxs("div",{className:"flex-1 min-w-0",children:[ae.jsxs("div",{className:"flex items-start justify-between mb-2",children:[ae.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate pr-4",children:e.title}),ae.jsxs("div",{className:"flex items-center gap-2",children:[R(e.status),ae.jsx(jp,{className:`${A(e.status)} border`,children:D(e.status)})]})]}),ae.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:e.description}),ae.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[ae.jsxs("div",{className:"flex items-center gap-1",children:[ae.jsx(oe,{className:"h-4 w-4"}),ae.jsx("span",{className:"truncate",children:e.location})]}),ae.jsxs("div",{className:"flex items-center gap-1",children:[ae.jsx(Ee,{className:"h-4 w-4"}),ae.jsx("span",{children:new Date(e.created_at).toLocaleDateString()})]}),ae.jsx(jp,{variant:"outline",className:"text-xs",children:e.category})]}),ae.jsxs("div",{className:"flex items-center justify-between",children:[ae.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[ae.jsxs("div",{className:"flex items-center gap-1",children:[ae.jsx(Pe,{className:"h-4 w-4"}),ae.jsxs("span",{children:[e.volunteers_count||0," upvotes"]})]}),ae.jsxs("div",{className:"flex items-center gap-1",children:[ae.jsx(Re,{className:"h-4 w-4"}),ae.jsxs("span",{children:[e.comments_count||0," comments"]})]})]}),ae.jsxs(fl,{variant:"outline",size:"sm",onClick:()=>t(`/issues/${e.id}`),children:[ae.jsx(ze,{className:"h-4 w-4 mr-1"}),"View Issue"]})]})]})]})})},e.id))})})]}),ae.jsx(Dd,{open:i,onOpenChange:o,children:ae.jsxs(Od,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[ae.jsx(Md,{children:ae.jsx(Ld,{className:"text-2xl font-bold text-center",children:"Report a Civic Issue"})}),ae.jsxs("div",{className:"space-y-6",children:[ae.jsxs("div",{children:[ae.jsxs("label",{className:"block mb-3 text-gray-700 font-medium",children:["Add Photos (",l.length,"/5)"]}),ae.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:[ae.jsxs("label",{className:"cursor-pointer flex flex-col items-center gap-2 bg-blue-600 hover:bg-blue-700 p-4 rounded-lg text-white text-sm transition-colors",children:[ae.jsx(Ue,{className:"w-6 h-6"}),ae.jsx("span",{className:"text-center",children:"Live Capture"}),ae.jsx("input",{type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:e=>E(e,"camera"),className:"hidden",disabled:l.length>=5})]}),ae.jsxs("label",{className:"cursor-pointer flex flex-col items-center gap-2 bg-green-600 hover:bg-green-700 p-4 rounded-lg text-white text-sm transition-colors",children:[ae.jsx(we,{className:"w-6 h-6"}),ae.jsx("span",{className:"text-center",children:"Upload Files"}),ae.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>E(e,"file"),className:"hidden",disabled:l.length>=5})]}),ae.jsxs("label",{className:"cursor-pointer flex flex-col items-center gap-2 bg-purple-600 hover:bg-purple-700 p-4 rounded-lg text-white text-sm transition-colors",children:[ae.jsx(Ve,{className:"w-6 h-6"}),ae.jsx("span",{className:"text-center",children:"From Gallery"}),ae.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>E(e,"gallery"),className:"hidden",disabled:l.length>=5})]})]}),l.length>0&&ae.jsxs("div",{className:"space-y-3",children:[ae.jsxs("div",{className:"flex items-center justify-between",children:[ae.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Uploaded Photos (",l.length,")"]}),ae.jsx(fl,{type:"button",variant:"outline",size:"sm",onClick:P,className:"text-red-600 hover:text-red-700",children:"Clear All"})]}),ae.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:l.map((e,t)=>ae.jsxs("div",{className:"relative group",children:[ae.jsx("img",{src:e,alt:`Preview ${t+1}`,className:"w-full h-24 sm:h-32 rounded-lg object-cover border-2 border-gray-200 hover:border-blue-400 transition-colors"}),ae.jsx("button",{type:"button",onClick:()=>(e=>{URL.revokeObjectURL(l[e]),c(t=>t.filter((t,s)=>s!==e)),u(t=>t.filter((t,s)=>s!==e))})(t),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:ae.jsx(ie,{className:"w-4 h-4"})}),ae.jsx("div",{className:"absolute bottom-1 left-1 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:t+1})]},t))}),ae.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Click on photos to view larger. Use the X button to remove individual photos."})]}),0===l.length&&ae.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[ae.jsx(Ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),ae.jsx("p",{className:"text-gray-500 text-sm",children:"No photos added yet. Choose from the options above to add up to 5 photos."})]})]}),C&&ae.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4",children:[ae.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[ae.jsx(Be,{className:"h-5 w-5 text-blue-600"}),ae.jsx("span",{className:"font-medium text-blue-800",children:"AI Smart Suggestions"}),k&&ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})]}),ae.jsxs("div",{className:"space-y-2 mb-3",children:[ae.jsxs("div",{children:[ae.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Suggested Description:"}),ae.jsx("p",{className:"text-sm text-gray-600 bg-white p-2 rounded border",children:C.description})]}),ae.jsxs("div",{children:[ae.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Suggested Category:"}),ae.jsx("span",{className:"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded",children:C.category})]})]}),ae.jsxs("div",{className:"flex gap-2",children:[ae.jsxs(fl,{type:"button",size:"sm",onClick:()=>{C&&(h(C.description),f(C.category),S(null),Qt({title:"AI Suggestions Applied",description:"Description and category have been updated with AI suggestions."}))},className:"bg-blue-600 hover:bg-blue-700",children:[ae.jsx(We,{className:"h-4 w-4 mr-1"}),"Apply Suggestions"]}),ae.jsx(fl,{type:"button",variant:"outline",size:"sm",onClick:()=>S(null),children:"Dismiss"})]})]}),ae.jsxs("div",{children:[ae.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ae.jsx("label",{className:"text-gray-700 font-medium",children:"Description"}),l.length>0&&ae.jsx(fl,{type:"button",variant:"outline",size:"sm",onClick:()=>T(d),disabled:k,className:"text-blue-600 hover:text-blue-700",children:k?ae.jsxs(ae.Fragment,{children:[ae.jsx(Le,{className:"h-4 w-4 mr-1 animate-spin"}),"Analyzing..."]}):ae.jsxs(ae.Fragment,{children:[ae.jsx(Be,{className:"h-4 w-4 mr-1"}),"Generate Description"]})})]}),ae.jsx(Np,{placeholder:"Describe the issue briefly or use AI to generate from photos",value:m,onChange:e=>h(e.target.value),className:"min-h-[100px]"})]}),ae.jsxs("div",{children:[ae.jsx("label",{className:"block mb-2 text-gray-700 font-medium",children:"Category"}),ae.jsxs(zf,{onValueChange:e=>f(e),children:[ae.jsx(Vf,{children:ae.jsx(Uf,{placeholder:"Select issue category"})}),ae.jsxs(qf,{children:[ae.jsx(Kf,{value:"infrastructure",children:" Infrastructure & Roads"}),ae.jsx(Kf,{value:"streetlight",children:" Street Lighting"}),ae.jsx(Kf,{value:"waste",children:" Waste Management"}),ae.jsx(Kf,{value:"water",children:" Water & Drainage"}),ae.jsx(Kf,{value:"transportation",children:" Transportation"}),ae.jsx(Kf,{value:"parks",children:" Parks & Recreation"}),ae.jsx(Kf,{value:"building",children:" Building & Construction"}),ae.jsx(Kf,{value:"safety",children:" Safety & Security"}),ae.jsx(Kf,{value:"noise",children:" Noise Pollution"}),ae.jsx(Kf,{value:"environment",children:" Environmental"}),ae.jsx(Kf,{value:"utilities",children:" Utilities"}),ae.jsx(Kf,{value:"others",children:" Others"})]})]})]}),ae.jsxs("div",{children:[ae.jsxs("label",{className:"block mb-2 text-gray-700 font-medium flex items-center gap-2",children:[ae.jsx(oe,{className:"w-4 h-4"})," Location"]}),ae.jsx(Xf,{value:g,onChange:(e,t)=>{x(e),t&&y(t)},placeholder:"Enter location or use GPS/Map"})]}),ae.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[ae.jsx(fl,{variant:"outline",onClick:()=>o(!1),disabled:j,children:"Cancel"}),ae.jsx(fl,{onClick:()=>ne(void 0,null,function*(){if(e)if(m.trim())if(p)if(g.trim()){N(!0);try{const s=m.length>50?m.substring(0,47)+"...":m,n={pothole:"Infrastructure",streetlight:"Electricity",waste:"Trash",water:"Water",others:"Other"};let a=[];d.length>0&&(Qt({title:"Processing images...",description:"Please wait while we process your photos."}),a=yield(t=d,ne(void 0,null,function*(){const e=[];for(let s=0;s<t.length&&s<1;s++){const r=t[s];try{const t=yield new Promise((e,t)=>{const s=new FileReader;s.onload=()=>e(s.result),s.onerror=t,s.readAsDataURL(r)});e.push(t)}catch(l){}}return e})));const{data:i,error:l}=yield el.from("issues").insert([{title:s,description:m,location:g,category:n[p]||"Other",image:a.length>0?a[0]:null,created_by:e.id,status:"reported",comments_count:0,volunteers_count:0,created_at:(new Date).toISOString()}]).select();if(l)throw l;w(!0),Qt({title:"Issue reported successfully!",description:"Your report has been submitted and will be reviewed."}),i&&i[0]&&r(e=>[i[0],...e]),setTimeout(()=>{o(!1),w(!1),h(""),f(""),x(""),y(null),S(null),P()},2e3)}catch(s){Qt({title:"Failed to submit report",description:"An error occurred while submitting your report. Please try again.",variant:"destructive"})}finally{N(!1)}var t}else Qt({title:"Location required",description:"Please provide a location for the issue",variant:"destructive"});else Qt({title:"Category required",description:"Please select a category for the issue",variant:"destructive"});else Qt({title:"Description required",description:"Please provide a description of the issue",variant:"destructive"});else Qt({title:"Authentication required",description:"Please sign in to report an issue",variant:"destructive"})}),disabled:j,className:"bg-pink-600 hover:bg-pink-700",children:j?ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx(Le,{className:"h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Report"})]}),b&&ae.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center flex flex-col items-center p-4 bg-green-50 rounded-lg",children:[ae.jsx(le,{className:"w-10 h-10 text-green-500 mb-2"}),ae.jsx("p",{className:"text-green-700 font-medium",children:"Report submitted successfully! You'll receive updates shortly."})]})]})]})})]})},eg=()=>{const[e,t]=wt.useState([]),[s,r]=wt.useState(0),[n,a]=wt.useState(!0);wt.useEffect(()=>{i();const e=el.channel("success-stories-updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"issues",filter:"status=eq.resolved"},e=>{i()}).subscribe();return()=>{e.unsubscribe()}},[]);const i=()=>ne(void 0,null,function*(){a(!0);try{const{data:e,error:s}=yield el.from("issues").select("\n          id,\n          title,\n          location,\n          image,\n          category,\n          after_image,\n          completed_at,\n          updated_at,\n          assigned_to,\n          user_profiles!issues_assigned_to_fkey(full_name, avatar_url)\n        ").eq("status","resolved").not("after_image","is",null).not("image","is",null).order("completed_at",{ascending:!1}).limit(10);if(s)throw s;if(e&&e.length>0){const s=e.filter(e=>e.image&&e.after_image).map(e=>{var t,s;return{id:e.id,title:e.title,location:e.location,beforeImage:e.image,afterImage:e.after_image,solverName:(null==(t=e.user_profiles)?void 0:t.full_name)||"Municipal Worker",solverAvatar:null==(s=e.user_profiles)?void 0:s.avatar_url,solvedDate:e.completed_at||e.updated_at,category:e.category}});s.length>0?t(s):t([])}else t([])}catch(e){t([])}finally{a(!1)}});if(n||0===e.length)return null;const o=e[s];return ae.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-950/20 dark:to-blue-950/20 py-8 mb-8",children:ae.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[ae.jsxs("div",{className:"flex items-center justify-between mb-6",children:[ae.jsxs("div",{className:"flex items-center gap-3",children:[ae.jsx("div",{className:"h-8 w-8 rounded-full bg-green-500 flex items-center justify-center",children:ae.jsx(De,{className:"h-4 w-4 text-white"})}),ae.jsxs("div",{children:[ae.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Success Stories"}),ae.jsx("p",{className:"text-sm text-muted-foreground",children:"See how our community is making a difference"})]})]}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("button",{onClick:()=>{r(t=>(t-1+e.length)%e.length)},className:"p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow",disabled:e.length<=1,children:ae.jsx(Te,{className:"h-4 w-4"})}),ae.jsxs("span",{className:"text-sm text-muted-foreground px-2",children:[s+1," of ",e.length]}),ae.jsx("button",{onClick:()=>{r(t=>(t+1)%e.length)},className:"p-2 rounded-full bg-white dark:bg-gray-800 shadow-sm hover:shadow-md transition-shadow",disabled:e.length<=1,children:ae.jsx(je,{className:"h-4 w-4"})})]})]}),ae.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6",children:ae.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[ae.jsxs("div",{className:"space-y-3",children:[ae.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"Before"}),ae.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700",children:ae.jsx("img",{src:o.beforeImage,alt:"Before solving the issue",className:"w-full h-full object-cover"})})]}),ae.jsxs("div",{className:"space-y-3",children:[ae.jsx("h3",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wide",children:"After"}),ae.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700",children:ae.jsx("img",{src:o.afterImage,alt:"After solving the issue",className:"w-full h-full object-cover"})})]}),ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{children:[ae.jsx("h3",{className:"text-lg font-semibold mb-2",children:o.title}),ae.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx(oe,{className:"h-4 w-4"}),ae.jsx("span",{children:o.location})]}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx(Ee,{className:"h-4 w-4"}),ae.jsxs("span",{children:["Solved on ",(l=o.solvedDate,new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}))]})]})]})]}),ae.jsxs("div",{className:"pt-4 border-t border-border",children:[ae.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Solved by:"}),ae.jsxs("div",{className:"flex items-center gap-3",children:[ae.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden bg-gray-100 dark:bg-gray-700",children:o.solverAvatar?ae.jsx("img",{src:o.solverAvatar,alt:o.solverName,className:"w-full h-full object-cover"}):ae.jsx("div",{className:"w-full h-full flex items-center justify-center",children:ae.jsx(ue,{className:"h-5 w-5 text-muted-foreground"})})}),ae.jsxs("div",{children:[ae.jsx("p",{className:"font-medium",children:o.solverName}),ae.jsx("p",{className:"text-sm text-muted-foreground",children:"Community Hero"})]})]})]}),ae.jsx("div",{className:"pt-2",children:ae.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",children:o.category})})]})]})})]})});var l},tg=[{id:"1",title:"Broken Park Benches in Willowbrook Park",description:"Several park benches in Willowbrook Park have been damaged and need repair. This has been an ongoing issue for several months, making it difficult for elderly visitors to enjoy the park.",location:"Willowbrook Park, Main Avenue",category:"Infrastructure",image:"https://images.unsplash.com/photo-1604357209793-fca5dca89f97?q=80&w=800&auto=format&fit=crop",date:"2 days ago",commentsCount:15,volunteersCount:12},{id:"2",title:"Overflowing Trash Bins on Cedar Street",description:"The trash bins on Cedar Street have been overflowing for weeks now, causing litter to spread across the neighborhood.",location:"Cedar Street, Downtown",category:"Trash",image:"https://images.unsplash.com/photo-1605600659873-d808a13e4e4e?q=80&w=800&auto=format&fit=crop",date:"1 day ago",commentsCount:8,volunteersCount:5},{id:"3",title:"Water Shortage in Maple Garden Community",description:"Our community garden has been suffering from water shortage for the past week, endangering all the plants we've grown.",location:"Maple Garden, East Side",category:"Water",image:"https://images.unsplash.com/photo-1543674892-7d64d45facad?q=80&w=800&auto=format&fit=crop",date:"3 days ago",commentsCount:12,volunteersCount:7},{id:"4",title:"Drainage Blockage After Recent Rainfall",description:"The recent heavy rainfall has caused severe drainage blockage on Pine Road, creating large puddles and making it difficult to walk.",location:"Pine Road, North District",category:"Drainage",image:"https://images.unsplash.com/photo-1597435877854-a461fb2dd9f2?q=80&w=800&auto=format&fit=crop",date:"4 days ago",commentsCount:5,volunteersCount:3},{id:"5",title:"Faulty Street Lights on Maple Avenue",description:"Several street lights on Maple Avenue have stopped working, creating safety concerns for residents walking at night.",location:"Maple Avenue, West District",category:"Infrastructure",image:"https://images.unsplash.com/photo-1621556712457-1ec8a586daa7?q=80&w=800&auto=format&fit=crop",date:"5 days ago",commentsCount:9,volunteersCount:4},{id:"6",title:"Graffiti on Community Center Wall",description:"The wall of our community center has been vandalized with graffiti. We need to clean it up and perhaps install better security.",location:"Community Center, Central Park",category:"Other",image:"https://images.unsplash.com/photo-1601325979086-d54da2c7419c?q=80&w=800&auto=format&fit=crop",date:"1 week ago",commentsCount:7,volunteersCount:8}],sg=["All","Infrastructure","Electricity","Trash","Water","Other"],rg=["Newest","Most Comments","Most Volunteers","Oldest"],ng=()=>{const e=_t(),{currentUser:t}=ol(),[s,r]=wt.useState(""),[n,a]=wt.useState("All"),[i,o]=wt.useState("Newest"),[l,c]=wt.useState(!1),[d,u]=wt.useState(!1),[m,h]=wt.useState([]),[p,f]=wt.useState(!0),g=(e,t)=>{h(s=>s.map(s=>s.id===e?Y(G({},s),{volunteersCount:t}):s))},x=()=>ne(void 0,null,function*(){f(!0);try{const{data:e,error:t}=yield el.from("issues").select("*").not("status","in",'("resolved","closed","pending_approval")').order("created_at",{ascending:!1});if(t)throw t;const s=e.map(e=>({id:e.id,title:e.title,description:e.description,location:e.location,category:e.category,image:e.image||"https://images.unsplash.com/photo-1604357209793-fca5dca89f97?q=80&w=800&auto=format&fit=crop",images:e.images||(e.image?[e.image]:[]),date:v(e.created_at),commentsCount:e.comments_count||0,volunteersCount:e.volunteers_count||0,status:e.status}));h(s)}catch(e){Qt({title:"Error loading issues",description:"Failed to load community issues. Please try again.",variant:"destructive"}),h(tg)}finally{f(!1)}});wt.useEffect(()=>{x()},[]),wt.useEffect(()=>{const e=()=>{document.hidden||x()};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]),wt.useEffect(()=>{const e=el.channel("issues-updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"issues"},e=>{if(e.new){const t=e.new.status;"resolved"===t||"closed"===t||"pending_approval"===t?(h(t=>t.filter(t=>t.id!==e.new.id)),Qt({title:"Issue Updated",description:`An issue has been marked as ${t.replace("_"," ")} and removed from active issues`})):h(t=>t.map(t=>t.id===e.new.id?Y(G({},t),{volunteersCount:e.new.volunteers_count||0,commentsCount:e.new.comments_count||0,status:e.new.status}):t))}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"issues"},e=>{if(e.new){const t=e.new;if("resolved"!==t.status&&"closed"!==t.status&&"pending_approval"!==t.status){const e={id:t.id,title:t.title,description:t.description,location:t.location,category:t.category,image:t.image||"https://images.unsplash.com/photo-1604357209793-fca5dca89f97?q=80&w=800&auto=format&fit=crop",images:t.images||(t.image?[t.image]:[]),date:v(t.created_at),commentsCount:t.comments_count||0,volunteersCount:t.volunteers_count||0,status:t.status};h(t=>[e,...t]),Qt({title:"New Issue Reported",description:"A new issue has been added to the community"})}}}).subscribe();return()=>{e.unsubscribe()}},[]);const v=e=>{const t=new Date(e),s=new Date,r=Math.abs(s.getTime()-t.getTime()),n=Math.ceil(r/864e5);return 1===n?"1 day ago":n<7?`${n} days ago`:n<30?`${Math.ceil(n/7)} week${Math.ceil(n/7)>1?"s":""} ago`:t.toLocaleDateString()},y=()=>{t?e("/issues/report"):u(!0)},b=m.filter(e=>{const t=e.title.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase())||e.location.toLowerCase().includes(s.toLowerCase()),r="All"===n||e.category===n;return t&&r}).sort((e,t)=>{switch(i){case"Most Comments":return t.commentsCount-e.commentsCount;case"Most Volunteers":return t.volunteersCount-e.volunteersCount;case"Oldest":return new Date(e.date).getTime()-new Date(t.date).getTime();default:return new Date(t.date).getTime()-new Date(e.date).getTime()}});return ae.jsxs("div",{className:"min-h-screen flex flex-col",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"pt-28 pb-20 flex-1",children:ae.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[ae.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:[ae.jsxs("div",{children:[ae.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"Community Issues"}),ae.jsx("p",{className:"text-muted-foreground",children:"Browse and discover issues in your neighborhood"})]}),ae.jsxs("div",{className:"flex gap-3",children:[ae.jsxs(qd,{variant:"outline",className:"flex-shrink-0",onClick:()=>c(!l),children:[ae.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Filters"]}),ae.jsxs(qd,{onClick:y,title:t?"Report a new issue":"Sign in to report an issue",className:t?"":"opacity-90",children:[ae.jsx($e,{className:"h-4 w-4 mr-2"}),t?"Report Issue":"Sign in to Report"]})]})]}),ae.jsxs("div",{className:"bg-card rounded-xl shadow-subtle p-5 mb-8",children:[ae.jsxs("div",{className:"relative",children:[ae.jsx(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground"}),ae.jsx("input",{type:"text",placeholder:"Search issues by title, description or location...",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-input bg-background focus:outline-none focus:ring-2 focus:ring-primary/20",value:s,onChange:e=>r(e.target.value)})]}),l&&ae.jsxs("div",{className:"mt-4 pt-4 border-t border-border/30 grid grid-cols-1 md:grid-cols-2 gap-4 animate-slide-down",children:[ae.jsxs("div",{children:[ae.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),ae.jsx("div",{className:"flex flex-wrap gap-2",children:sg.map(e=>ae.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm transition-colors "+(n===e?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),onClick:()=>a(e),children:e},e))})]}),ae.jsxs("div",{children:[ae.jsx("label",{className:"block text-sm font-medium mb-2",children:"Sort By"}),ae.jsx("div",{className:"flex flex-wrap gap-2",children:rg.map(e=>ae.jsx("button",{className:"px-3 py-1.5 rounded-lg text-sm transition-colors "+(i===e?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),onClick:()=>o(e),children:e},e))})]})]})]}),ae.jsx(eg,{}),p?ae.jsx("div",{className:"flex items-center justify-center py-16",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx(Le,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),ae.jsx("p",{className:"text-muted-foreground",children:"Loading community issues..."})]})}):ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.length>0?b.map(e=>ae.jsx(gp,Y(G({},e),{onUpvoteUpdate:g}),e.id)):ae.jsx("div",{className:"col-span-full py-16 text-center",children:ae.jsxs("div",{className:"max-w-md mx-auto",children:[ae.jsx(Ze,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),ae.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No issues found"}),ae.jsx("p",{className:"text-muted-foreground mb-6",children:0===m.length?"No issues have been reported yet. Be the first to report a community issue!":"We couldn't find any issues matching your search criteria. Try adjusting your filters or search query."}),ae.jsxs("div",{className:"flex gap-3 justify-center",children:[m.length>0&&ae.jsx(qd,{variant:"outline",onClick:()=>{r(""),a("All")},children:"Clear Filters"}),ae.jsxs(qd,{onClick:y,children:[ae.jsx($e,{className:"h-4 w-4 mr-2"}),"Report Issue"]})]})]})})})]})}),ae.jsx("div",{className:"fixed bottom-6 right-6 z-40 md:hidden",children:ae.jsx(qd,{onClick:y,className:"h-14 w-14 rounded-full shadow-lg hover:shadow-xl transition-shadow",size:"sm",title:t?"Report a new issue":"Sign in to report an issue",children:ae.jsx($e,{className:"h-6 w-6"})})}),ae.jsx("footer",{className:"bg-secondary/80 py-8 px-4 md:px-6",children:ae.jsx("div",{className:"container mx-auto",children:ae.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[ae.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[ae.jsx("div",{className:"h-6 w-6 rounded-full bg-primary flex items-center justify-center mr-2",children:ae.jsx(oe,{className:"h-3 w-3 text-white"})}),ae.jsx("span",{className:"text-lg font-semibold",children:"Nagar Setu"})]}),ae.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",(new Date).getFullYear()," Nagar Setu. All rights reserved."]})]})})}),ae.jsx(Kd,{isOpen:d,onClose:()=>u(!1),redirectTo:"/issues/report"})]})},ag=({isOpen:e,onClose:t,issueId:s,issueTitle:r,onFeedbackSubmitted:n})=>{const[a,i]=wt.useState(null),[o,l]=wt.useState(""),[c,d]=wt.useState(!1);return e?ae.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden",children:[ae.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[ae.jsxs("div",{children:[ae.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Rate This Resolution"}),ae.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:r})]}),ae.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:ae.jsx(ie,{className:"w-6 h-6 text-gray-500"})})]}),ae.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[ae.jsxs("div",{className:"mb-6",children:[ae.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Are you satisfied with how this issue was resolved?"}),ae.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Your feedback helps us improve our service quality."})]}),ae.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[ae.jsxs("button",{onClick:()=>i("satisfied"),className:"p-6 border-2 rounded-xl transition-all "+("satisfied"===a?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-700 hover:border-green-300"),children:[ae.jsx(Pe,{className:"w-12 h-12 mx-auto mb-3 "+("satisfied"===a?"text-green-600":"text-gray-400")}),ae.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Satisfied"}),ae.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Issue is properly resolved"})]}),ae.jsxs("button",{onClick:()=>i("not_satisfied"),className:"p-6 border-2 rounded-xl transition-all "+("not_satisfied"===a?"border-red-500 bg-red-50 dark:bg-red-900/20":"border-gray-200 dark:border-gray-700 hover:border-red-300"),children:[ae.jsx(He,{className:"w-12 h-12 mx-auto mb-3 "+("not_satisfied"===a?"text-red-600":"text-gray-400")}),ae.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:"Not Satisfied"}),ae.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Issue needs more work"})]})]}),a&&ae.jsxs("div",{className:"space-y-3",children:[ae.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[ae.jsx(Re,{className:"w-4 h-4 inline mr-2"}),"satisfied"===a?"Additional Comments (Optional)":"Please explain what needs to be fixed (Required)"]}),ae.jsx("textarea",{value:o,onChange:e=>l(e.target.value),placeholder:"satisfied"===a?"Share your experience or appreciation...":"Describe what is still wrong or needs improvement...",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-none",rows:4,required:"not_satisfied"===a}),"not_satisfied"===a&&!o.trim()&&ae.jsx("p",{className:"text-xs text-red-600 dark:text-red-400",children:"* Please provide details so we can fix the issue properly"})]}),"satisfied"===a&&ae.jsx("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:ae.jsxs("p",{className:"text-sm text-green-800 dark:text-green-300",children:[" ",ae.jsx("strong",{children:"This will permanently close the issue."})," The issue will be marked as successfully resolved."]})}),"not_satisfied"===a&&ae.jsx("div",{className:"mt-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:ae.jsxs("p",{className:"text-sm text-red-800 dark:text-red-300",children:[" ",ae.jsx("strong",{children:"This will reopen the issue."})," Your feedback will be sent to the worker and admin for review."]})})]}),ae.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700",children:[ae.jsx("button",{onClick:t,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),ae.jsx("button",{onClick:()=>ne(void 0,null,function*(){if(a){d(!0);try{const{data:{user:i}}=yield el.auth.getUser();if(!i)throw new Error("Not authenticated");if("satisfied"===a){const{error:t}=yield el.from("issues").update({status:"closed",citizen_feedback:"satisfied",citizen_feedback_comment:o.trim()||null,citizen_feedback_at:(new Date).toISOString()}).eq("id",s);if(t)throw t;o.trim()&&(yield el.from("comments").insert({issue_id:s,user_id:i.id,content:` Citizen Feedback: SATISFIED\n\n${o.trim()}`}));try{const{data:e}=yield el.from("user_profiles").select("id").eq("user_type","authority");if(e&&e.length>0){const t=e.map(e=>({user_id:e.id,title:" Issue Resolved Successfully",message:`Issue "${r}" has been marked as SATISFIED by the citizen and is now permanently closed.`,type:"success",issue_id:s,created_at:(new Date).toISOString()}));yield el.from("notifications").insert(t)}}catch(e){}alert(" Thank you for your feedback! This issue is now permanently closed.")}else{const{error:t}=yield el.from("issues").update({status:"reported",citizen_feedback:"not_satisfied",citizen_feedback_comment:o.trim()||"Citizen is not satisfied with the resolution.",citizen_feedback_at:(new Date).toISOString()}).eq("id",s);if(t)throw t;yield el.from("comments").insert({issue_id:s,user_id:i.id,content:` Citizen Feedback: NOT SATISFIED\n\n${o.trim()||"The issue is not properly resolved. Please review and fix."}`});try{const{data:e}=yield el.from("user_profiles").select("id").eq("user_type","authority"),{data:t}=yield el.from("issues").select("assigned_to").eq("id",s).single(),n=new Set;if(e&&e.forEach(e=>n.add(e.id)),(null==t?void 0:t.assigned_to)&&n.add(t.assigned_to),n.size>0){const e=Array.from(n).map(e=>({user_id:e,title:" Issue Reopened - Citizen Not Satisfied",message:`Issue "${r}" has been marked as NOT SATISFIED by the citizen and needs rework. Feedback: "${o.trim()||"Not properly resolved"}"`,type:"warning",issue_id:s,created_at:(new Date).toISOString()}));yield el.from("notifications").insert(e)}}catch(e){}alert(" Your feedback has been recorded. The issue has been reopened for further action.")}n(),t()}catch(i){alert("Failed to submit feedback: "+i.message)}finally{d(!1)}}else alert("Please select if you are satisfied or not satisfied")}),disabled:!a||"not_satisfied"===a&&!o.trim()||c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:c?ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Submitting..."]}):ae.jsxs(ae.Fragment,{children:[ae.jsx(Ge,{className:"w-4 h-4"}),"Submit Feedback"]})})]})]})}):null},ig=e=>{switch(e){case"resolved":return ae.jsx(le,{className:"h-5 w-5 text-green-500"});case"in_progress":return ae.jsx(qe,{className:"h-5 w-5 text-yellow-500"});default:return ae.jsx(ce,{className:"h-5 w-5 text-red-500"})}},og=e=>{switch(e){case"resolved":return"Resolved";case"in_progress":return"In Progress";case"assigned":return"Assigned";default:return"Pending"}},lg=e=>{switch(e){case"resolved":return"bg-green-100 text-green-800 border-green-200";case"in_progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"assigned":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-red-100 text-red-800 border-red-200"}},cg=()=>{const{id:e}=Et(),t=_t(),{currentUser:s}=ol(),{toast:r}=Xt(),[n,a]=wt.useState(""),[i,o]=wt.useState([]),[l,c]=wt.useState(null),[d,u]=wt.useState(!0),[m,h]=wt.useState(!1),[p,f]=wt.useState(0),[g,x]=wt.useState(0),[v,y]=wt.useState(!1),[b,w]=wt.useState(!1),[j,N]=wt.useState(!1),[k,_]=wt.useState(!1),[C,S]=wt.useState(!1),E=()=>ne(void 0,null,function*(){if(e)try{const{data:t,error:r}=yield el.from("issues").select("*").eq("id",e).single();if(r)throw r;if(c(t),f(t.upvotes_count||t.volunteers_count||0),x(t.view_count||0),d&&(yield T()),s){const{data:t}=yield el.from("user_upvotes").select("id").eq("issue_id",e).eq("user_id",s.id).single();h(!!t)}}catch(t){r({title:"Error loading issue",description:"Failed to load issue details",variant:"destructive"})}finally{u(!1)}});wt.useEffect(()=>{E()},[e,r]);const T=()=>ne(void 0,null,function*(){try{const{error:t}=yield el.rpc("increment_view_count",{issue_id:e});if(t){const{data:t}=yield el.from("issues").select("view_count").eq("id",e).single();if(t){const s=(t.view_count||0)+1;yield el.from("issues").update({view_count:s}).eq("id",e),x(s)}}}catch(t){}});wt.useEffect(()=>{if(!e)return;const t=el.channel(`issue-${e}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"issues",filter:`id=eq.${e}`},e=>{e.new&&(f(e.new.upvotes_count||e.new.volunteers_count||0),x(e.new.view_count||0))}).subscribe();return()=>{t.unsubscribe()}},[e]);const P=t=>ne(void 0,null,function*(){var l;if(t.preventDefault(),s){if(n.trim()){w(!0);try{const t={id:`c${Date.now()}`,user:{name:s.displayName||(null==(l=s.email)?void 0:l.split("@")[0])||"Anonymous User",avatar:s.photoURL||""},content:n.trim(),timestamp:"Just now",created_at:(new Date).toISOString()};o(e=>[...e,t]);const c=i.length+1;yield el.from("issues").update({comments_count:c}).eq("id",e),a(""),y(!1),r({title:"Comment Posted",description:"Your comment has been added to the discussion."})}catch(c){r({title:"Error",description:"Failed to post comment. Please try again.",variant:"destructive"})}finally{w(!1)}}}else r({title:"Authentication required",description:"Please sign in to comment",variant:"destructive"})});return d?ae.jsxs("div",{className:"min-h-screen",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"pt-32 flex items-center justify-center",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),ae.jsx("p",{children:"Loading issue details..."})]})})]}):l?ae.jsxs("div",{className:"min-h-screen",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"pt-32 pb-20 px-4 md:px-6 container mx-auto",children:ae.jsxs("div",{className:"max-w-4xl mx-auto",children:[ae.jsxs("div",{className:"flex items-center justify-between mb-6",children:[ae.jsxs("button",{onClick:()=>t("/issues"),className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground",children:[ae.jsx(Ye,{className:"h-4 w-4 mr-1"}),ae.jsx("span",{children:"Back to Issues"})]}),s&&l&&l.created_by===s.id&&ae.jsxs(fl,{variant:"destructive",size:"sm",onClick:()=>N(!0),className:"flex items-center gap-2",children:[ae.jsx(Qe,{className:"h-4 w-4"}),"Delete Issue"]})]}),ae.jsx("div",{className:"rounded-xl overflow-hidden mb-6",children:ae.jsx("div",{className:"h-64 md:h-80 bg-secondary flex items-center justify-center overflow-hidden",children:l.image?ae.jsx("img",{src:l.image,alt:l.title,className:"w-full h-full object-cover"}):ae.jsxs("div",{className:"text-center",children:[ae.jsx(ce,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),ae.jsx("p",{className:"text-gray-500",children:"No image available"})]})})}),ae.jsxs("div",{className:"flex items-start justify-between mb-4",children:[ae.jsx("h1",{className:"text-3xl md:text-4xl font-semibold flex-1 pr-4",children:l.title}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ig(l.status),ae.jsx(jp,{className:`${lg(l.status)} border`,children:og(l.status)})]})]}),"resolved"===l.status&&s&&l.created_by===s.id&&!l.citizen_feedback&&ae.jsx("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 dark:from-green-900/20 dark:to-blue-900/20 border-2 border-green-200 dark:border-green-800 rounded-xl p-6 mb-6",children:ae.jsx("div",{className:"flex items-start justify-between",children:ae.jsxs("div",{className:"flex-1",children:[ae.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:" This issue has been marked as resolved!"}),ae.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Please let us know if you're satisfied with the resolution. Your feedback helps us improve our service."}),ae.jsx("button",{onClick:()=>S(!0),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Rate This Resolution"})]})})}),l.citizen_feedback&&ae.jsx("div",{className:"border-2 rounded-xl p-6 mb-6 "+("satisfied"===l.citizen_feedback?"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"),children:ae.jsxs("div",{className:"flex items-start gap-3",children:["satisfied"===l.citizen_feedback?ae.jsx(le,{className:"w-6 h-6 text-green-600 flex-shrink-0 mt-1"}):ae.jsx(ce,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-1"}),ae.jsxs("div",{className:"flex-1",children:[ae.jsx("h3",{className:"text-lg font-semibold mb-2",children:"satisfied"===l.citizen_feedback?" Citizen Satisfied":" Citizen Not Satisfied"}),l.citizen_feedback_comment&&ae.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-2",children:['"',l.citizen_feedback_comment,'"']}),ae.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Feedback provided on ",new Date(l.citizen_feedback_at).toLocaleDateString()]})]})]})}),ae.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[ae.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[ae.jsx(Ee,{className:"h-4 w-4 mr-1.5"}),ae.jsxs("span",{children:["Reported ",new Date(l.created_at).toLocaleDateString()]})]}),ae.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[ae.jsx(oe,{className:"h-4 w-4 mr-1.5"}),ae.jsx("span",{children:l.location})]}),ae.jsx(jp,{variant:"outline",className:"text-xs",children:l.category})]}),ae.jsx("div",{className:"bg-card border rounded-xl p-6 mb-8",children:ae.jsx("div",{className:"prose prose-sm max-w-none",children:l.description.split("\n\n").map((e,t)=>ae.jsx("p",{className:"mb-4 text-foreground/90 leading-relaxed",children:e},t))})}),ae.jsx("div",{className:"bg-card border rounded-xl p-6 mb-8",children:ae.jsxs("div",{className:"flex items-center justify-between",children:[ae.jsxs("div",{className:"flex items-center gap-4",children:[ae.jsxs("button",{onClick:()=>ne(void 0,null,function*(){if(s)try{const{data:t,error:n}=yield el.rpc("toggle_upvote",{p_issue_id:e,p_user_id:s.id});if(n)throw n;const a=t[0];h(a.upvoted),f(a.new_count),r({title:a.upvoted?"Issue upvoted!":"Upvote removed",description:a.upvoted?"Thanks for supporting this issue!":"You removed your upvote"})}catch(t){r({title:"Error",description:"Failed to update upvote",variant:"destructive"})}else r({title:"Authentication required",description:"Please sign in to upvote issues",variant:"destructive"})}),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors "+(m?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:[ae.jsx(Pe,{className:"h-4 w-4 "+(m?"fill-current":"")}),ae.jsxs("span",{children:[p," upvotes"]})]}),ae.jsxs("button",{onClick:()=>{s?y(!0):r({title:"Authentication required",description:"Please sign in to comment",variant:"destructive"})},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 transition-colors",children:[ae.jsx(Re,{className:"h-4 w-4"}),ae.jsxs("span",{children:[i.length," comments"]})]}),ae.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[ae.jsx(ze,{className:"h-4 w-4"}),ae.jsxs("span",{children:[g," views"]})]})]}),ae.jsxs("div",{className:"text-sm text-muted-foreground",children:["Status: ",ae.jsx("span",{className:"font-medium",children:og(l.status)})]})]})}),ae.jsxs("div",{children:[ae.jsxs("h2",{className:"text-2xl font-semibold mb-4",children:["Discussion (",i.length,")"]}),i.length>0?ae.jsx("div",{className:"space-y-6 mb-8",children:i.map(e=>ae.jsx("div",{className:"bg-card border rounded-lg p-4",children:ae.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[ae.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:ae.jsx("div",{className:"font-semibold text-xs text-primary",children:e.user.name.charAt(0)})}),ae.jsxs("div",{children:[ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("span",{className:"font-medium",children:e.user.name}),ae.jsx("span",{className:"text-xs text-muted-foreground",children:e.timestamp})]}),ae.jsx("p",{className:"text-sm mt-1",children:e.content})]})]})},e.id))}):ae.jsxs("div",{className:"text-center py-8 mb-8",children:[ae.jsx(Re,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),ae.jsx("p",{className:"text-gray-600",children:"No comments yet. Be the first to share your thoughts!"})]}),s?ae.jsxs("form",{onSubmit:P,className:"bg-card border rounded-lg p-4",children:[ae.jsx("h3",{className:"text-lg font-medium mb-3",children:"Add your comment"}),ae.jsx("div",{className:"mb-3",children:ae.jsx("textarea",{value:n,onChange:e=>a(e.target.value),className:"w-full p-3 rounded-lg border border-input bg-background resize-none",placeholder:"Share your thoughts on this issue...",rows:3,required:!0})}),ae.jsx("div",{className:"flex justify-end",children:ae.jsxs(fl,{type:"submit",className:"flex items-center",children:[ae.jsx("span",{children:"Post Comment"}),ae.jsx(Ge,{className:"ml-2 h-4 w-4"})]})})]}):ae.jsxs("div",{className:"bg-card border rounded-lg p-6 text-center",children:[ae.jsx("p",{className:"text-gray-600 mb-4",children:"Sign in to join the discussion"}),ae.jsx(fl,{onClick:()=>t("/"),children:"Sign In"})]})]})]})}),ae.jsx(Dd,{open:v,onOpenChange:y,children:ae.jsxs(Od,{className:"max-w-md",children:[ae.jsx(Md,{children:ae.jsx(Ld,{children:"Add a Comment"})}),ae.jsxs("form",{onSubmit:P,className:"space-y-4",children:[ae.jsx("div",{children:ae.jsx("textarea",{value:n,onChange:e=>a(e.target.value),className:"w-full p-3 rounded-lg border border-gray-300 bg-white text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"Share your thoughts on this issue...",rows:4,required:!0,disabled:b})}),ae.jsxs("div",{className:"flex justify-end gap-3",children:[ae.jsx(fl,{type:"button",variant:"outline",onClick:()=>y(!1),disabled:b,children:"Cancel"}),ae.jsx(fl,{type:"submit",disabled:b||!n.trim(),className:"bg-blue-600 hover:bg-blue-700",children:b?ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Posting..."]}):ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx(Ge,{className:"h-4 w-4"}),"Post Comment"]})})]})]})]})}),ae.jsx(Dd,{open:j,onOpenChange:N,children:ae.jsxs(Od,{className:"max-w-md",children:[ae.jsx(Md,{children:ae.jsxs(Ld,{className:"flex items-center gap-2 text-red-600",children:[ae.jsx(Qe,{className:"h-5 w-5"}),"Delete Issue"]})}),ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[ae.jsxs("p",{className:"text-sm text-red-800",children:[ae.jsx("strong",{children:"Warning:"})," This action cannot be undone. Deleting this issue will permanently remove it from:"]}),ae.jsxs("ul",{className:"mt-2 space-y-1 text-sm text-red-700",children:[ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),ae.jsx("span",{children:"All issues pages"})]}),ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),ae.jsx("span",{children:"Your profile and homepage"})]}),ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),ae.jsx("span",{children:"Authority dashboard"})]}),ae.jsxs("li",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),ae.jsx("span",{children:"All comments and upvotes"})]})]})]}),ae.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[ae.jsxs("p",{className:"text-sm text-gray-700",children:[ae.jsx("strong",{children:"Issue:"})," ",null==l?void 0:l.title]}),ae.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Reported on ",l&&new Date(l.created_at).toLocaleDateString()]})]}),ae.jsx("p",{className:"text-sm text-gray-600",children:"Are you sure you want to permanently delete this issue?"}),ae.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[ae.jsx(fl,{type:"button",variant:"outline",onClick:()=>N(!1),disabled:k,children:"Cancel"}),ae.jsx(fl,{variant:"destructive",onClick:()=>ne(void 0,null,function*(){if(s&&l)if(l.created_by===s.id){_(!0);try{const{error:n}=yield el.from("issues").delete().eq("id",e).eq("created_by",s.id);if(n)throw n;r({title:"Issue Deleted",description:"Your issue has been successfully deleted"}),t("/issues")}catch(n){r({title:"Delete Failed",description:"Failed to delete the issue. Please try again.",variant:"destructive"})}finally{_(!1),N(!1)}}else r({title:"Permission denied",description:"You can only delete issues you created",variant:"destructive"})}),disabled:k,className:"bg-red-600 hover:bg-red-700",children:k?ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Deleting..."]}):ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx(Qe,{className:"h-4 w-4"}),"Yes, Delete Issue"]})})]})]})]})}),l&&ae.jsx(ag,{isOpen:C,onClose:()=>S(!1),issueId:l.id,issueTitle:l.title,onFeedbackSubmitted:()=>{E()}})]}):ae.jsxs("div",{className:"min-h-screen",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"pt-32 flex items-center justify-center",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx(ce,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),ae.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Issue not found"}),ae.jsx("p",{className:"text-gray-600 mb-4",children:"The issue you're looking for doesn't exist."}),ae.jsx(fl,{onClick:()=>t("/issues"),children:"Back to Issues"})]})})]})};var dg=e=>"checkbox"===e.type,ug=e=>e instanceof Date,mg=e=>null==e;const hg=e=>"object"==typeof e;var pg=e=>!mg(e)&&!Array.isArray(e)&&hg(e)&&!ug(e),fg=e=>pg(e)&&e.target?dg(e.target)?e.target.checked:e.target.value:e,gg=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),xg="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function vg(e){let t;const s=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(xg&&(e instanceof Blob||e instanceof FileList)||!s&&!pg(e))return e;if(t=s?[]:{},s||(e=>{const t=e.constructor&&e.constructor.prototype;return pg(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const s in e)e.hasOwnProperty(s)&&(t[s]=vg(e[s]));else t=e}return t}var yg=e=>Array.isArray(e)?e.filter(Boolean):[],bg=e=>void 0===e,wg=(e,t,s)=>{if(!t||!pg(e))return s;const r=yg(t.split(/[,[\].]+?/)).reduce((e,t)=>mg(e)?e:e[t],e);return bg(r)||r===e?bg(e[t])?s:e[t]:r},jg=e=>"boolean"==typeof e,Ng=e=>/^\w*$/.test(e),kg=e=>yg(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_g=(e,t,s)=>{let r=-1;const n=Ng(t)?[t]:kg(t),a=n.length,i=a-1;for(;++r<a;){const t=n[r];let a=s;if(r!==i){const s=e[t];a=pg(s)||Array.isArray(s)?s:isNaN(+n[r+1])?{}:[]}if("__proto__"===t)return;e[t]=a,e=e[t]}return e};const Cg="blur",Sg="focusout",Eg="change",Tg="onBlur",Pg="onChange",Rg="onSubmit",Dg="onTouched",Ag="all",Ig="max",Og="min",Mg="maxLength",Fg="minLength",Lg="pattern",$g="required",zg="validate",Ug=jt.createContext(null),Vg=()=>jt.useContext(Ug);var Bg=(e,t,s,r=!0)=>{const n={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(n,a,{get:()=>{const n=a;return t._proxyFormState[n]!==Ag&&(t._proxyFormState[n]=!r||Ag),s&&(s[n]=!0),e[n]}});return n},Wg=e=>pg(e)&&!Object.keys(e).length,qg=(e,t,s,r)=>{s(e);const n=e,{name:a}=n,i=Q(n,["name"]);return Wg(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(e=>t[e]===(!r||Ag))},Kg=e=>Array.isArray(e)?e:[e],Zg=(e,t,s)=>!e||!t||e===t||Kg(e).some(e=>e&&(s?e===t:e.startsWith(t)||t.startsWith(e)));function Hg(e){const t=jt.useRef(e);t.current=e,jt.useEffect(()=>{const s=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{s&&s.unsubscribe()}},[e.disabled])}var Gg=e=>"string"==typeof e,Yg=(e,t,s,r,n)=>Gg(e)?(r&&t.watch.add(e),wg(s,e,n)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),wg(s,e))):(r&&(t.watchAll=!0),s);function Qg(e){const t=Vg(),{name:s,disabled:r,control:n=t.control,shouldUnregister:a}=e,i=gg(n._names.array,s),o=function(e){const t=Vg(),{control:s=t.control,name:r,defaultValue:n,disabled:a,exact:i}=e||{},o=jt.useRef(r);o.current=r,Hg({disabled:a,subject:s._subjects.values,next:e=>{Zg(o.current,e.name,i)&&c(vg(Yg(o.current,s._names,e.values||s._formValues,!1,n)))}});const[l,c]=jt.useState(s._getWatch(r,n));return jt.useEffect(()=>s._removeUnmounted()),l}({control:n,name:s,defaultValue:wg(n._formValues,s,wg(n._defaultValues,s,e.defaultValue)),exact:!0}),l=function(e){const t=Vg(),{control:s=t.control,disabled:r,name:n,exact:a}=e||{},[i,o]=jt.useState(s._formState),l=jt.useRef(!0),c=jt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=jt.useRef(n);return d.current=n,Hg({disabled:r,next:e=>l.current&&Zg(d.current,e.name,a)&&qg(e,c.current,s._updateFormState)&&o(G(G({},s._formState),e)),subject:s._subjects.state}),jt.useEffect(()=>(l.current=!0,c.current.isValid&&s._updateValid(!0),()=>{l.current=!1}),[s]),Bg(i,s,c.current,!1)}({control:n,name:s,exact:!0}),c=jt.useRef(n.register(s,G(Y(G({},e.rules),{value:o}),jg(e.disabled)?{disabled:e.disabled}:{})));return jt.useEffect(()=>{const e=n._options.shouldUnregister||a,t=(e,t)=>{const s=wg(n._fields,e);s&&s._f&&(s._f.mount=t)};if(t(s,!0),e){const e=vg(wg(n._options.defaultValues,s));_g(n._defaultValues,s,e),bg(wg(n._formValues,s))&&_g(n._formValues,s,e)}return()=>{(i?e&&!n._state.action:e)?n.unregister(s):t(s,!1)}},[s,n,i,a]),jt.useEffect(()=>{wg(n._fields,s)&&n._updateDisabledField({disabled:r,fields:n._fields,name:s,value:wg(n._fields,s)._f.value})},[r,s,n]),{field:Y(G({name:s,value:o},jg(r)||l.disabled?{disabled:l.disabled||r}:{}),{onChange:jt.useCallback(e=>c.current.onChange({target:{value:fg(e),name:s},type:Eg}),[s]),onBlur:jt.useCallback(()=>c.current.onBlur({target:{value:wg(n._formValues,s),name:s},type:Cg}),[s,n]),ref:jt.useCallback(e=>{const t=wg(n._fields,s);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[n._fields,s])}),formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!wg(l.errors,s)},isDirty:{enumerable:!0,get:()=>!!wg(l.dirtyFields,s)},isTouched:{enumerable:!0,get:()=>!!wg(l.touchedFields,s)},isValidating:{enumerable:!0,get:()=>!!wg(l.validatingFields,s)},error:{enumerable:!0,get:()=>wg(l.errors,s)}})}}const Xg=e=>e.render(Qg(e));var Jg=(e,t,s,r,n)=>t?Y(G({},s[e]),{types:Y(G({},s[e]&&s[e].types?s[e].types:{}),{[r]:n||!0})}):{},ex=e=>({isOnSubmit:!e||e===Rg,isOnBlur:e===Tg,isOnChange:e===Pg,isOnAll:e===Ag,isOnTouch:e===Dg}),tx=(e,t,s)=>!s&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const sx=(e,t,s,r)=>{for(const n of s||Object.keys(e)){const s=wg(e,n);if(s){const e=s,{_f:a}=e,i=Q(e,["_f"]);if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],n)&&!r)return!0;if(a.ref&&t(a.ref,a.name)&&!r)return!0;if(sx(i,t))break}else if(pg(i)&&sx(i,t))break}}};var rx=(e,t,s)=>{const r=Kg(wg(e,s));return _g(r,"root",t[s]),_g(e,s,r),e},nx=e=>"file"===e.type,ax=e=>"function"==typeof e,ix=e=>{if(!xg)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ox=e=>Gg(e),lx=e=>"radio"===e.type,cx=e=>e instanceof RegExp;const dx={value:!1,isValid:!1},ux={value:!0,isValid:!0};var mx=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!bg(e[0].attributes.value)?bg(e[0].value)||""===e[0].value?ux:{value:e[0].value,isValid:!0}:ux:dx}return dx};const hx={isValid:!1,value:null};var px=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,hx):hx;function fx(e,t,s="validate"){if(ox(e)||Array.isArray(e)&&e.every(ox)||jg(e)&&!e)return{type:s,message:ox(e)?e:"",ref:t}}var gx=e=>pg(e)&&!cx(e)?e:{value:e,message:""},xx=(e,t,s,r,n)=>ne(void 0,null,function*(){const{ref:a,refs:i,required:o,maxLength:l,minLength:c,min:d,max:u,pattern:m,validate:h,name:p,valueAsNumber:f,mount:g,disabled:x}=e._f,v=wg(t,p);if(!g||x)return{};const y=i?i[0]:a,b=e=>{r&&y.reportValidity&&(y.setCustomValidity(jg(e)?"":e||""),y.reportValidity())},w={},j=lx(a),N=dg(a),k=j||N,_=(f||nx(a))&&bg(a.value)&&bg(v)||ix(a)&&""===a.value||""===v||Array.isArray(v)&&!v.length,C=Jg.bind(null,p,s,w),S=(e,t,s,r=Mg,n=Fg)=>{const i=e?t:s;w[p]=G({type:e?r:n,message:i,ref:a},C(e?r:n,i))};if(n?!Array.isArray(v)||!v.length:o&&(!k&&(_||mg(v))||jg(v)&&!v||N&&!mx(i).isValid||j&&!px(i).isValid)){const{value:e,message:t}=ox(o)?{value:!!o,message:o}:gx(o);if(e&&(w[p]=G({type:$g,message:t,ref:y},C($g,t)),!s))return b(t),w}if(!(_||mg(d)&&mg(u))){let e,t;const r=gx(u),n=gx(d);if(mg(v)||isNaN(v)){const s=a.valueAsDate||new Date(v),i=e=>new Date((new Date).toDateString()+" "+e),o="time"==a.type,l="week"==a.type;Gg(r.value)&&v&&(e=o?i(v)>i(r.value):l?v>r.value:s>new Date(r.value)),Gg(n.value)&&v&&(t=o?i(v)<i(n.value):l?v<n.value:s<new Date(n.value))}else{const s=a.valueAsNumber||(v?+v:v);mg(r.value)||(e=s>r.value),mg(n.value)||(t=s<n.value)}if((e||t)&&(S(!!e,r.message,n.message,Ig,Og),!s))return b(w[p].message),w}if((l||c)&&!_&&(Gg(v)||n&&Array.isArray(v))){const e=gx(l),t=gx(c),r=!mg(e.value)&&v.length>+e.value,n=!mg(t.value)&&v.length<+t.value;if((r||n)&&(S(r,e.message,t.message),!s))return b(w[p].message),w}if(m&&!_&&Gg(v)){const{value:e,message:t}=gx(m);if(cx(e)&&!v.match(e)&&(w[p]=G({type:Lg,message:t,ref:a},C(Lg,t)),!s))return b(t),w}if(h)if(ax(h)){const e=fx(yield h(v,t),y);if(e&&(w[p]=G(G({},e),C(zg,e.message)),!s))return b(e.message),w}else if(pg(h)){let e={};for(const r in h){if(!Wg(e)&&!s)break;const n=fx(yield h[r](v,t),y,r);n&&(e=G(G({},n),C(r,n.message)),b(n.message),s&&(w[p]=e))}if(!Wg(e)&&(w[p]=G({ref:y},e),!s))return w}return b(!0),w});function vx(e,t){const s=Array.isArray(t)?t:Ng(t)?[t]:kg(t),r=1===s.length?e:function(e,t){const s=t.slice(0,-1).length;let r=0;for(;r<s;)e=bg(e)?r++:e[t[r++]];return e}(e,s),n=s.length-1,a=s[n];return r&&delete r[a],0!==n&&(pg(r)&&Wg(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!bg(e[t]))return!1;return!0}(r))&&vx(e,s.slice(0,-1)),e}var yx=()=>{let e=[];return{get observers(){return e},next:t=>{for(const s of e)s.next&&s.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},bx=e=>mg(e)||!hg(e);function wx(e,t){if(bx(e)||bx(t))return e===t;if(ug(e)&&ug(t))return e.getTime()===t.getTime();const s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(const n of s){const s=e[n];if(!r.includes(n))return!1;if("ref"!==n){const e=t[n];if(ug(s)&&ug(e)||pg(s)&&pg(e)||Array.isArray(s)&&Array.isArray(e)?!wx(s,e):s!==e)return!1}}return!0}var jx=e=>"select-multiple"===e.type,Nx=e=>ix(e)&&e.isConnected,kx=e=>{for(const t in e)if(ax(e[t]))return!0;return!1};function _x(e,t={}){const s=Array.isArray(e);if(pg(e)||s)for(const r in e)Array.isArray(e[r])||pg(e[r])&&!kx(e[r])?(t[r]=Array.isArray(e[r])?[]:{},_x(e[r],t[r])):mg(e[r])||(t[r]=!0);return t}function Cx(e,t,s){const r=Array.isArray(e);if(pg(e)||r)for(const n in e)Array.isArray(e[n])||pg(e[n])&&!kx(e[n])?bg(t)||bx(s[n])?s[n]=Array.isArray(e[n])?_x(e[n],[]):G({},_x(e[n])):Cx(e[n],mg(t)?{}:t[n],s[n]):s[n]=!wx(e[n],t[n]);return s}var Sx=(e,t)=>Cx(e,t,_x(t)),Ex=(e,{valueAsNumber:t,valueAsDate:s,setValueAs:r})=>bg(e)?e:t?""===e?NaN:e?+e:e:s&&Gg(e)?new Date(e):r?r(e):e;function Tx(e){const t=e.ref;if(!(e.refs?e.refs.every(e=>e.disabled):t.disabled))return nx(t)?t.files:lx(t)?px(e.refs).value:jx(t)?[...t.selectedOptions].map(({value:e})=>e):dg(t)?mx(e.refs).value:Ex(bg(t.value)?e.ref.value:t.value,e)}var Px=e=>bg(e)?e:cx(e)?e.source:pg(e)?cx(e.value)?e.value.source:e.value:e;const Rx="AsyncFunction";var Dx=e=>!(e&&e.validate||!(ax(e.validate)&&e.validate.constructor.name===Rx||pg(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Rx)));function Ax(e,t,s){const r=wg(e,s);if(r||Ng(s))return{error:r,name:s};const n=s.split(".");for(;n.length;){const r=n.join("."),a=wg(t,r),i=wg(e,r);if(a&&!Array.isArray(a)&&s!==r)return{name:s};if(i&&i.type)return{name:r,error:i};n.pop()}return{name:s}}const Ix={mode:Rg,reValidateMode:Pg,shouldFocusError:!0};function Ox(e={}){let t,s=G(G({},Ix),e),r={submitCount:0,isDirty:!1,isLoading:ax(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},n={},a=(pg(s.defaultValues)||pg(s.values))&&vg(s.defaultValues||s.values)||{},i=s.shouldUnregister?{}:vg(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},u={values:yx(),array:yx(),state:yx()},m=ex(s.mode),h=ex(s.reValidateMode),p=s.criteriaMode===Ag,f=t=>ne(this,null,function*(){if(!e.disabled&&(d.isValid||t)){const e=s.resolver?Wg((yield b()).errors):yield j(n,!0);e!==r.isValid&&u.state.next({isValid:e})}}),g=(t,s)=>{e.disabled||!d.isValidating&&!d.validatingFields||((t||Array.from(l.mount)).forEach(e=>{e&&(s?_g(r.validatingFields,e,s):vx(r.validatingFields,e))}),u.state.next({validatingFields:r.validatingFields,isValidating:!Wg(r.validatingFields)}))},x=(e,t,s,r)=>{const l=wg(n,e);if(l){const n=wg(i,e,bg(s)?wg(a,e):s);bg(n)||r&&r.defaultChecked||t?_g(i,e,t?n:Tx(l._f)):_(e,n),o.mount&&f()}},v=(t,s,i,o,l)=>{let c=!1,m=!1;const h={name:t};if(!e.disabled){const e=!!(wg(n,t)&&wg(n,t)._f&&wg(n,t)._f.disabled);if(!i||o){d.isDirty&&(m=r.isDirty,r.isDirty=h.isDirty=N(),c=m!==h.isDirty);const n=e||wx(wg(a,t),s);m=!(e||!wg(r.dirtyFields,t)),n||e?vx(r.dirtyFields,t):_g(r.dirtyFields,t,!0),h.dirtyFields=r.dirtyFields,c=c||d.dirtyFields&&m!==!n}if(i){const e=wg(r.touchedFields,t);e||(_g(r.touchedFields,t,i),h.touchedFields=r.touchedFields,c=c||d.touchedFields&&e!==i)}c&&l&&u.state.next(h)}return c?h:{}},y=(s,n,a,i)=>{const o=wg(r.errors,s),l=d.isValid&&jg(n)&&r.isValid!==n;var m;if(e.delayError&&a?(m=()=>((e,t)=>{_g(r.errors,e,t),u.state.next({errors:r.errors})})(s,a),t=e=>{clearTimeout(c),c=setTimeout(m,e)},t(e.delayError)):(clearTimeout(c),t=null,a?_g(r.errors,s,a):vx(r.errors,s)),(a?!wx(o,a):o)||!Wg(i)||l){const e=Y(G(G({},i),l&&jg(n)?{isValid:n}:{}),{errors:r.errors,name:s});r=G(G({},r),e),u.state.next(e)}},b=e=>ne(this,null,function*(){g(e,!0);const t=yield s.resolver(i,s.context,((e,t,s,r)=>{const n={};for(const a of e){const e=wg(t,a);e&&_g(n,a,e._f)}return{criteriaMode:s,names:[...e],fields:n,shouldUseNativeValidation:r}})(e||l.mount,n,s.criteriaMode,s.shouldUseNativeValidation));return g(e),t}),w=e=>ne(this,null,function*(){const{errors:t}=yield b(e);if(e)for(const s of e){const e=wg(t,s);e?_g(r.errors,s,e):vx(r.errors,s)}else r.errors=t;return t}),j=(e,t,...n)=>ne(this,[e,t,...n],function*(e,t,n={valid:!0}){for(const a in e){const o=e[a];if(o){const e=o,{_f:c}=e,u=Q(e,["_f"]);if(c){const e=l.array.has(c.name),u=o._f&&Dx(o._f);u&&d.validatingFields&&g([a],!0);const m=yield xx(o,i,p,s.shouldUseNativeValidation&&!t,e);if(u&&d.validatingFields&&g([a]),m[c.name]&&(n.valid=!1,t))break;!t&&(wg(m,c.name)?e?rx(r.errors,m,c.name):_g(r.errors,c.name,m[c.name]):vx(r.errors,c.name))}!Wg(u)&&(yield j(u,t,n))}}return n.valid}),N=(t,s)=>!e.disabled&&(t&&s&&_g(i,t,s),!wx(R(),a)),k=(e,t,s)=>Yg(e,l,G({},o.mount?i:bg(t)?a:Gg(e)?{[e]:t}:t),s,t),_=(e,t,s={})=>{const r=wg(n,e);let a=t;if(r){const s=r._f;s&&(!s.disabled&&_g(i,e,Ex(t,s)),a=ix(s.ref)&&mg(t)?"":t,jx(s.ref)?[...s.ref.options].forEach(e=>e.selected=a.includes(e.value)):s.refs?dg(s.ref)?s.refs.length>1?s.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(a)?!!a.find(t=>t===e.value):a===e.value)):s.refs[0]&&(s.refs[0].checked=!!a):s.refs.forEach(e=>e.checked=e.value===a):nx(s.ref)?s.ref.value="":(s.ref.value=a,s.ref.type||u.values.next({name:e,values:G({},i)})))}(s.shouldDirty||s.shouldTouch)&&v(e,a,s.shouldTouch,s.shouldDirty,!0),s.shouldValidate&&P(e)},C=(e,t,s)=>{for(const r in t){const a=t[r],i=`${e}.${r}`,o=wg(n,i);(l.array.has(e)||pg(a)||o&&!o._f)&&!ug(a)?C(i,a,s):_(i,a,s)}},S=(e,t,s={})=>{const c=wg(n,e),m=l.array.has(e),h=vg(t);_g(i,e,h),m?(u.array.next({name:e,values:G({},i)}),(d.isDirty||d.dirtyFields)&&s.shouldDirty&&u.state.next({name:e,dirtyFields:Sx(a,i),isDirty:N(e,h)})):!c||c._f||mg(h)?_(e,h,s):C(e,h,s),tx(e,l)&&u.state.next(G({},r)),u.values.next({name:o.mount?e:void 0,values:G({},i)})},E=a=>ne(this,null,function*(){o.mount=!0;const c=a.target;let x=c.name,w=!0;const N=wg(n,x),k=e=>{w=Number.isNaN(e)||ug(e)&&isNaN(e.getTime())||wx(e,wg(i,x,e))};if(N){let o,_;const C=c.type?Tx(N._f):fg(a),S=a.type===Cg||a.type===Sg,E=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(N._f)&&!s.resolver&&!wg(r.errors,x)&&!N._f.deps||((e,t,s,r,n)=>!n.isOnAll&&(!s&&n.isOnTouch?!(t||e):(s?r.isOnBlur:n.isOnBlur)?!e:!(s?r.isOnChange:n.isOnChange)||e))(S,wg(r.touchedFields,x),r.isSubmitted,h,m),T=tx(x,l,S);_g(i,x,C),S?(N._f.onBlur&&N._f.onBlur(a),t&&t(0)):N._f.onChange&&N._f.onChange(a);const R=v(x,C,S,!1),D=!Wg(R)||T;if(!S&&u.values.next({name:x,type:a.type,values:G({},i)}),E)return d.isValid&&("onBlur"===e.mode?S&&f():f()),D&&u.state.next(G({name:x},T?{}:R));if(!S&&T&&u.state.next(G({},r)),s.resolver){const{errors:e}=yield b([x]);if(k(C),w){const t=Ax(r.errors,n,x),s=Ax(e,n,t.name||x);o=s.error,x=s.name,_=Wg(e)}}else g([x],!0),o=(yield xx(N,i,p,s.shouldUseNativeValidation))[x],g([x]),k(C),w&&(o?_=!1:d.isValid&&(_=yield j(n,!0)));w&&(N._f.deps&&P(N._f.deps),y(x,_,o,R))}}),T=(e,t)=>{if(wg(r.errors,t)&&e.focus)return e.focus(),1},P=(e,...t)=>ne(this,[e,...t],function*(e,t={}){let a,i;const o=Kg(e);if(s.resolver){const t=yield w(bg(e)?e:o);a=Wg(t),i=e?!o.some(e=>wg(t,e)):a}else e?(i=(yield Promise.all(o.map(e=>ne(this,null,function*(){const t=wg(n,e);return yield j(t&&t._f?{[e]:t}:t)})))).every(Boolean),(i||r.isValid)&&f()):i=a=yield j(n);return u.state.next(Y(G(G({},!Gg(e)||d.isValid&&a!==r.isValid?{}:{name:e}),s.resolver||!e?{isValid:a}:{}),{errors:r.errors})),t.shouldFocus&&!i&&sx(n,T,e?o:l.mount),i}),R=e=>{const t=G({},o.mount?i:a);return bg(e)?t:Gg(e)?wg(t,e):e.map(e=>wg(t,e))},D=(e,t)=>({invalid:!!wg((t||r).errors,e),isDirty:!!wg((t||r).dirtyFields,e),error:wg((t||r).errors,e),isValidating:!!wg(r.validatingFields,e),isTouched:!!wg((t||r).touchedFields,e)}),A=(e,t,s)=>{const a=(wg(n,e,{_f:{}})._f||{}).ref,i=wg(r.errors,e)||{},{ref:o,message:l,type:c}=i,d=Q(i,["ref","message","type"]);_g(r.errors,e,Y(G(G({},d),t),{ref:a})),u.state.next({name:e,errors:r.errors,isValid:!1}),s&&s.shouldFocus&&a&&a.focus&&a.focus()},I=(e,t={})=>{for(const o of e?Kg(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(vx(n,o),vx(i,o)),!t.keepError&&vx(r.errors,o),!t.keepDirty&&vx(r.dirtyFields,o),!t.keepTouched&&vx(r.touchedFields,o),!t.keepIsValidating&&vx(r.validatingFields,o),!s.shouldUnregister&&!t.keepDefaultValue&&vx(a,o);u.values.next({values:G({},i)}),u.state.next(G(G({},r),t.keepDirty?{isDirty:N()}:{})),!t.keepIsValid&&f()},O=({disabled:e,name:t,field:s,fields:r,value:n})=>{if(jg(e)&&o.mount||e){const a=e?void 0:bg(n)?Tx(s?s._f:wg(r,t)._f):n;_g(i,t,a),v(t,a,!1,!1,!0)}},M=(t,r={})=>{let i=wg(n,t);const c=jg(r.disabled)||jg(e.disabled);return _g(n,t,Y(G({},i||{}),{_f:G(Y(G({},i&&i._f?i._f:{ref:{name:t}}),{name:t,mount:!0}),r)})),l.mount.add(t),i?O({field:i,disabled:jg(r.disabled)?r.disabled:e.disabled,name:t,value:r.value}):x(t,!0,r.value),Y(G(G({},c?{disabled:r.disabled||e.disabled}:{}),s.progressive?{required:!!r.required,min:Px(r.min),max:Px(r.max),minLength:Px(r.minLength),maxLength:Px(r.maxLength),pattern:Px(r.pattern)}:{}),{name:t,onChange:E,onBlur:E,ref:e=>{if(e){M(t,r),i=wg(n,t);const s=bg(e.value)&&e.querySelectorAll&&e.querySelectorAll("input,select,textarea")[0]||e,o=(e=>lx(e)||dg(e))(s),l=i._f.refs||[];if(o?l.find(e=>e===s):s===i._f.ref)return;_g(n,t,{_f:G(G({},i._f),o?{refs:[...l.filter(Nx),s,...Array.isArray(wg(a,t))?[{}]:[]],ref:{type:s.type,name:t}}:{ref:s})}),x(t,!1,void 0,s)}else i=wg(n,t,{}),i._f&&(i._f.mount=!1),(s.shouldUnregister||r.shouldUnregister)&&(!gg(l.array,t)||!o.action)&&l.unMount.add(t)}})},F=()=>s.shouldFocusError&&sx(n,T,l.mount),L=(e,t)=>a=>ne(this,null,function*(){let o;a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist());let l=vg(i);if(u.state.next({isSubmitting:!0}),s.resolver){const{errors:e,values:t}=yield b();r.errors=e,l=t}else yield j(n);if(vx(r.errors,"root"),Wg(r.errors)){u.state.next({errors:{}});try{yield e(l,a)}catch(c){o=c}}else t&&(yield t(G({},r.errors),a)),F(),setTimeout(F);if(u.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Wg(r.errors)&&!o,submitCount:r.submitCount+1,errors:r.errors}),o)throw o}),$=(t,s={})=>{const c=t?vg(t):a,m=vg(c),h=Wg(t),p=h?a:m;if(s.keepDefaultValues||(a=c),!s.keepValues){if(s.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(Sx(a,i))]);for(const t of Array.from(e))wg(r.dirtyFields,t)?_g(p,t,wg(i,t)):S(t,wg(p,t))}else{if(xg&&bg(t))for(const e of l.mount){const t=wg(n,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(ix(e)){const t=e.closest("form");if(t){t.reset();break}}}}n={}}i=e.shouldUnregister?s.keepDefaultValues?vg(a):{}:vg(p),u.array.next({values:G({},p)}),u.values.next({values:G({},p)})}l={mount:s.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!s.keepIsValid||!!s.keepDirtyValues,o.watch=!!e.shouldUnregister,u.state.next({submitCount:s.keepSubmitCount?r.submitCount:0,isDirty:!h&&(s.keepDirty?r.isDirty:!(!s.keepDefaultValues||wx(t,a))),isSubmitted:!!s.keepIsSubmitted&&r.isSubmitted,dirtyFields:h?{}:s.keepDirtyValues?s.keepDefaultValues&&i?Sx(a,i):r.dirtyFields:s.keepDefaultValues&&t?Sx(a,t):s.keepDirty?r.dirtyFields:{},touchedFields:s.keepTouched?r.touchedFields:{},errors:s.keepErrors?r.errors:{},isSubmitSuccessful:!!s.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1})},z=(e,t)=>$(ax(e)?e(i):e,t);return{control:{register:M,unregister:I,getFieldState:D,handleSubmit:L,setError:A,_executeSchema:b,_getWatch:k,_getDirty:N,_updateValid:f,_removeUnmounted:()=>{for(const e of l.unMount){const t=wg(n,e);t&&(t._f.refs?t._f.refs.every(e=>!Nx(e)):!Nx(t._f.ref))&&I(e)}l.unMount=new Set},_updateFieldArray:(t,s=[],l,c,m=!0,h=!0)=>{if(c&&l&&!e.disabled){if(o.action=!0,h&&Array.isArray(wg(n,t))){const e=l(wg(n,t),c.argA,c.argB);m&&_g(n,t,e)}if(h&&Array.isArray(wg(r.errors,t))){const e=l(wg(r.errors,t),c.argA,c.argB);m&&_g(r.errors,t,e),((e,t)=>{!yg(wg(e,t)).length&&vx(e,t)})(r.errors,t)}if(d.touchedFields&&h&&Array.isArray(wg(r.touchedFields,t))){const e=l(wg(r.touchedFields,t),c.argA,c.argB);m&&_g(r.touchedFields,t,e)}d.dirtyFields&&(r.dirtyFields=Sx(a,i)),u.state.next({name:t,isDirty:N(t,s),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else _g(i,t,s)},_updateDisabledField:O,_getFieldArray:t=>yg(wg(o.mount?i:a,t,e.shouldUnregister?wg(a,t,[]):[])),_reset:$,_resetDefaultValues:()=>ax(s.defaultValues)&&s.defaultValues().then(e=>{z(e,s.resetOptions),u.state.next({isLoading:!1})}),_updateFormState:e=>{r=G(G({},r),e)},_disableForm:e=>{jg(e)&&(u.state.next({disabled:e}),sx(n,(t,s)=>{const r=wg(n,s);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:u,_proxyFormState:d,_setErrors:e=>{r.errors=e,u.state.next({errors:r.errors,isValid:!1})},get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(e){o=e},get _defaultValues(){return a},get _names(){return l},set _names(e){l=e},get _formState(){return r},set _formState(e){r=e},get _options(){return s},set _options(e){s=G(G({},s),e)}},trigger:P,register:M,handleSubmit:L,watch:(e,t)=>ax(e)?u.values.subscribe({next:s=>e(k(void 0,t),s)}):k(e,t,!0),setValue:S,getValues:R,reset:z,resetField:(e,t={})=>{wg(n,e)&&(bg(t.defaultValue)?S(e,vg(wg(a,e))):(S(e,t.defaultValue),_g(a,e,vg(t.defaultValue))),t.keepTouched||vx(r.touchedFields,e),t.keepDirty||(vx(r.dirtyFields,e),r.isDirty=t.defaultValue?N(e,vg(wg(a,e))):N()),t.keepError||(vx(r.errors,e),d.isValid&&f()),u.state.next(G({},r)))},clearErrors:e=>{e&&Kg(e).forEach(e=>vx(r.errors,e)),u.state.next({errors:e?r.errors:{}})},unregister:I,setError:A,setFocus:(e,t={})=>{const s=wg(n,e),r=s&&s._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:D}}function Mx(e={}){const t=jt.useRef(),s=jt.useRef(),[r,n]=jt.useState({isDirty:!1,isValidating:!1,isLoading:ax(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:ax(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=Y(G({},Ox(e)),{formState:r}));const a=t.current.control;return a._options=e,Hg({subject:a._subjects.state,next:e=>{qg(e,a._proxyFormState,a._updateFormState,!0)&&n(G({},a._formState))}}),jt.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),jt.useEffect(()=>{if(a._proxyFormState.isDirty){const e=a._getDirty();e!==r.isDirty&&a._subjects.state.next({isDirty:e})}},[a,r.isDirty]),jt.useEffect(()=>{e.values&&!wx(e.values,s.current)?(a._reset(e.values,a._options.resetOptions),s.current=e.values,n(e=>G({},e))):a._resetDefaultValues()},[e.values,a]),jt.useEffect(()=>{e.errors&&a._setErrors(e.errors)},[e.errors,a]),jt.useEffect(()=>{a._state.mount||(a._updateValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next(G({},a._formState))),a._removeUnmounted()}),jt.useEffect(()=>{e.shouldUnregister&&a._subjects.values.next({values:a._getWatch()})},[e.shouldUnregister,a]),jt.useEffect(()=>{t.current&&(t.current.watch=t.current.watch.bind({}))},[r]),t.current.formState=Bg(r,a),t.current}const Fx=(e,t,s)=>{if(e&&"reportValidity"in e){const r=wg(s,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},Lx=(e,t)=>{for(const s in t.fields){const r=t.fields[s];r&&r.ref&&"reportValidity"in r.ref?Fx(r.ref,s,e):r.refs&&r.refs.forEach(t=>Fx(t,s,e))}},$x=(e,t)=>{t.shouldUseNativeValidation&&Lx(e,t);const s={};for(const r in e){const n=wg(t.fields,r),a=Object.assign(e[r]||{},{ref:n&&n.ref});if(zx(t.names||Object.keys(e),r)){const e=Object.assign({},wg(s,r));_g(e,"root",a),_g(s,r,e)}else _g(s,r,a)}return s},zx=(e,t)=>e.some(e=>e.startsWith(t+"."));var Ux,Vx,Bx,Wx=function(e,t){for(var s={};e.length;){var r=e[0],n=r.code,a=r.message,i=r.path.join(".");if(!s[i])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];s[i]={message:o.message,type:o.code}}else s[i]={message:a,type:n};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=s[i].types,c=l&&l[r.code];s[i]=Jg(i,t,s,n,c?[].concat(c,r.message):r.message)}e.shift()}return s},qx=function(e,t,s){return void 0===s&&(s={}),function(r,n,a){try{return Promise.resolve(function(n,i){try{var o=Promise.resolve(e["sync"===s.mode?"parse":"parseAsync"](r,t)).then(function(e){return a.shouldUseNativeValidation&&Lx({},a),{errors:{},values:s.raw?r:e}})}catch(l){return i(l)}return o&&o.then?o.then(void 0,i):o}(0,function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:$x(Wx(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};var t;throw e}))}catch(i){return Promise.reject(i)}}};(Vx=Ux||(Ux={})).assertEqual=e=>e,Vx.assertIs=function(e){},Vx.assertNever=function(e){throw new Error},Vx.arrayToEnum=e=>{const t={};for(const s of e)t[s]=s;return t},Vx.getValidEnumValues=e=>{const t=Vx.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),s={};for(const r of t)s[r]=e[r];return Vx.objectValues(s)},Vx.objectValues=e=>Vx.objectKeys(e).map(function(t){return e[t]}),Vx.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.push(s);return t},Vx.find=(e,t)=>{for(const s of e)if(t(s))return s},Vx.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,Vx.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},Vx.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(Bx||(Bx={})).mergeShapes=(e,t)=>G(G({},e),t);const Kx=Ux.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zx=e=>{switch(typeof e){case"undefined":return Kx.undefined;case"string":return Kx.string;case"number":return isNaN(e)?Kx.nan:Kx.number;case"boolean":return Kx.boolean;case"function":return Kx.function;case"bigint":return Kx.bigint;case"symbol":return Kx.symbol;case"object":return Array.isArray(e)?Kx.array:null===e?Kx.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?Kx.promise:"undefined"!=typeof Map&&e instanceof Map?Kx.map:"undefined"!=typeof Set&&e instanceof Set?Kx.set:"undefined"!=typeof Date&&e instanceof Date?Kx.date:Kx.object;default:return Kx.unknown}},Hx=Ux.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Gx extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},s={_errors:[]},r=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(r);else if("invalid_return_type"===n.code)r(n.returnTypeError);else if("invalid_arguments"===n.code)r(n.argumentsError);else if(0===n.path.length)s._errors.push(t(n));else{let e=s,r=0;for(;r<n.path.length;){const s=n.path[r];r===n.path.length-1?(e[s]=e[s]||{_errors:[]},e[s]._errors.push(t(n))):e[s]=e[s]||{_errors:[]},e=e[s],r++}}};return r(this),s}static assert(e){if(!(e instanceof Gx))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ux.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},s=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):s.push(e(r));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}}Gx.create=e=>new Gx(e);const Yx=(e,t)=>{let s;switch(e.code){case Hx.invalid_type:s=e.received===Kx.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Hx.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(e.expected,Ux.jsonStringifyReplacer)}`;break;case Hx.unrecognized_keys:s=`Unrecognized key(s) in object: ${Ux.joinValues(e.keys,", ")}`;break;case Hx.invalid_union:s="Invalid input";break;case Hx.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${Ux.joinValues(e.options)}`;break;case Hx.invalid_enum_value:s=`Invalid enum value. Expected ${Ux.joinValues(e.options)}, received '${e.received}'`;break;case Hx.invalid_arguments:s="Invalid function arguments";break;case Hx.invalid_return_type:s="Invalid function return type";break;case Hx.invalid_date:s="Invalid date";break;case Hx.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(s=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(s=`${s} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?s=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?s=`Invalid input: must end with "${e.validation.endsWith}"`:Ux.assertNever(e.validation):s="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Hx.too_small:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Hx.too_big:s="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Hx.custom:s="Invalid input";break;case Hx.invalid_intersection_types:s="Intersection results could not be merged";break;case Hx.not_multiple_of:s=`Number must be a multiple of ${e.multipleOf}`;break;case Hx.not_finite:s="Number must be finite";break;default:s=t.defaultError,Ux.assertNever(e)}return{message:s}};let Qx=Yx;function Xx(){return Qx}const Jx=e=>{const{data:t,path:s,errorMaps:r,issueData:n}=e,a=[...s,...n.path||[]],i=Y(G({},n),{path:a});if(void 0!==n.message)return Y(G({},n),{path:a,message:n.message});let o="";const l=r.filter(e=>!!e).slice().reverse();for(const c of l)o=c(i,{data:t,defaultError:o}).message;return Y(G({},n),{path:a,message:o})};function ev(e,t){const s=Xx(),r=Jx({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,s,s===Yx?void 0:Yx].filter(e=>!!e)});e.common.issues.push(r)}class tv{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const s=[];for(const r of t){if("aborted"===r.status)return sv;"dirty"===r.status&&e.dirty(),s.push(r.value)}return{status:e.value,value:s}}static mergeObjectAsync(e,t){return ne(this,null,function*(){const s=[];for(const e of t){const t=yield e.key,r=yield e.value;s.push({key:t,value:r})}return tv.mergeObjectSync(e,s)})}static mergeObjectSync(e,t){const s={};for(const r of t){const{key:t,value:n}=r;if("aborted"===t.status)return sv;if("aborted"===n.status)return sv;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"===t.value||void 0===n.value&&!r.alwaysSet||(s[t.value]=n.value)}return{status:e.value,value:s}}}const sv=Object.freeze({status:"aborted"}),rv=e=>({status:"dirty",value:e}),nv=e=>({status:"valid",value:e}),av=e=>"aborted"===e.status,iv=e=>"dirty"===e.status,ov=e=>"valid"===e.status,lv=e=>"undefined"!=typeof Promise&&e instanceof Promise;function cv(e,t,s,r){if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function dv(e,t,s,r,n){if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,s),s}var uv,mv,hv,pv;"function"==typeof SuppressedError&&SuppressedError,(mv=uv||(uv={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},mv.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class fv{constructor(e,t,s,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const gv=(e,t)=>{if(ov(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Gx(e.common.issues);return this._error=t,this._error}}};function xv(e){if(!e)return{};const{errorMap:t,invalid_type_error:s,required_error:r,description:n}=e;if(t&&(s||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:n};return{errorMap:(t,n)=>{var a,i;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:n.defaultError}:void 0===n.data?{message:null!==(a=null!=o?o:r)&&void 0!==a?a:n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:null!==(i=null!=o?o:s)&&void 0!==i?i:n.defaultError}},description:n}}class vv{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Zx(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Zx(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new tv,ctx:{common:e.parent.common,data:e.data,parsedType:Zx(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(lv(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;const r={common:{issues:[],async:null!==(s=null==t?void 0:t.async)&&void 0!==s&&s,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zx(e)},n=this._parseSync({data:e,path:r.path,parent:r});return gv(r,n)}parseAsync(e,t){return ne(this,null,function*(){const s=yield this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error})}safeParseAsync(e,t){return ne(this,null,function*(){const s={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Zx(e)},r=this._parse({data:e,path:s.path,parent:s}),n=yield lv(r)?r:Promise.resolve(r);return gv(s,n)})}refine(e,t){return this._refinement((s,r)=>{const n=e(s),a=()=>r.addIssue(G({code:Hx.custom},(e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t)(s)));return"undefined"!=typeof Promise&&n instanceof Promise?n.then(e=>!!e||(a(),!1)):!!n||(a(),!1)})}refinement(e,t){return this._refinement((s,r)=>!!e(s)||(r.addIssue("function"==typeof t?t(s,r):t),!1))}_refinement(e){return new dy({schema:this,typeName:yy.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return uy.create(this,this._def)}nullable(){return my.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Gv.create(this,this._def)}promise(){return cy.create(this,this._def)}or(e){return Xv.create([this,e],this._def)}and(e){return ey.create(this,e,this._def)}transform(e){return new dy(Y(G({},xv(this._def)),{schema:this,typeName:yy.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){const t="function"==typeof e?e:()=>e;return new hy(Y(G({},xv(this._def)),{innerType:this,defaultValue:t,typeName:yy.ZodDefault}))}brand(){return new gy(G({typeName:yy.ZodBranded,type:this},xv(this._def)))}catch(e){const t="function"==typeof e?e:()=>e;return new py(Y(G({},xv(this._def)),{innerType:this,catchValue:t,typeName:yy.ZodCatch}))}describe(e){return new(0,this.constructor)(Y(G({},this._def),{description:e}))}pipe(e){return xy.create(this,e)}readonly(){return vy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yv=/^c[^\s-]{8,}$/i,bv=/^[0-9a-z]+$/,wv=/^[0-9A-HJKMNP-TV-Z]{26}$/,jv=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Nv=/^[a-z0-9_-]{21}$/i,kv=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_v=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Cv;const Sv=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ev=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Tv=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Pv="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Rv=new RegExp(`^${Pv}$`);function Dv(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function Av(e){return new RegExp(`^${Dv(e)}$`)}function Iv(e){let t=`${Pv}T${Dv(e)}`;const s=[];return s.push(e.local?"Z?":"Z"),e.offset&&s.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${s.join("|")})`,new RegExp(`^${t}$`)}function Ov(e,t){return!("v4"!==t&&t||!Sv.test(e))||!("v6"!==t&&t||!Ev.test(e))}class Mv extends vv{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Kx.string){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.string,received:t.parsedType}),sv}const t=new tv;let s;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(s=this._getOrReturnCtx(e,s),ev(s,{code:Hx.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(s=this._getOrReturnCtx(e,s),ev(s,{code:Hx.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const r=e.data.length>n.value,a=e.data.length<n.value;(r||a)&&(s=this._getOrReturnCtx(e,s),r?ev(s,{code:Hx.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):a&&ev(s,{code:Hx.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)_v.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"email",code:Hx.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)Cv||(Cv=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Cv.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"emoji",code:Hx.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)jv.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"uuid",code:Hx.invalid_string,message:n.message}),t.dirty());else if("nanoid"===n.kind)Nv.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"nanoid",code:Hx.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)yv.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"cuid",code:Hx.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)bv.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"cuid2",code:Hx.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)wv.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"ulid",code:Hx.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch(r){s=this._getOrReturnCtx(e,s),ev(s,{validation:"url",code:Hx.invalid_string,message:n.message}),t.dirty()}else if("regex"===n.kind){n.regex.lastIndex=0;n.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"regex",code:Hx.invalid_string,message:n.message}),t.dirty())}else if("trim"===n.kind)e.data=e.data.trim();else if("includes"===n.kind)e.data.includes(n.value,n.position)||(s=this._getOrReturnCtx(e,s),ev(s,{code:Hx.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty());else if("toLowerCase"===n.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===n.kind)e.data=e.data.toUpperCase();else if("startsWith"===n.kind)e.data.startsWith(n.value)||(s=this._getOrReturnCtx(e,s),ev(s,{code:Hx.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty());else if("endsWith"===n.kind)e.data.endsWith(n.value)||(s=this._getOrReturnCtx(e,s),ev(s,{code:Hx.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty());else if("datetime"===n.kind){Iv(n).test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{code:Hx.invalid_string,validation:"datetime",message:n.message}),t.dirty())}else if("date"===n.kind){Rv.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{code:Hx.invalid_string,validation:"date",message:n.message}),t.dirty())}else if("time"===n.kind){Av(n).test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{code:Hx.invalid_string,validation:"time",message:n.message}),t.dirty())}else"duration"===n.kind?kv.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"duration",code:Hx.invalid_string,message:n.message}),t.dirty()):"ip"===n.kind?Ov(e.data,n.version)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"ip",code:Hx.invalid_string,message:n.message}),t.dirty()):"base64"===n.kind?Tv.test(e.data)||(s=this._getOrReturnCtx(e,s),ev(s,{validation:"base64",code:Hx.invalid_string,message:n.message}),t.dirty()):Ux.assertNever(n);return{status:t.value,value:e.data}}_regex(e,t,s){return this.refinement(t=>e.test(t),G({validation:t,code:Hx.invalid_string},uv.errToObj(s)))}_addCheck(e){return new Mv(Y(G({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck(G({kind:"email"},uv.errToObj(e)))}url(e){return this._addCheck(G({kind:"url"},uv.errToObj(e)))}emoji(e){return this._addCheck(G({kind:"emoji"},uv.errToObj(e)))}uuid(e){return this._addCheck(G({kind:"uuid"},uv.errToObj(e)))}nanoid(e){return this._addCheck(G({kind:"nanoid"},uv.errToObj(e)))}cuid(e){return this._addCheck(G({kind:"cuid"},uv.errToObj(e)))}cuid2(e){return this._addCheck(G({kind:"cuid2"},uv.errToObj(e)))}ulid(e){return this._addCheck(G({kind:"ulid"},uv.errToObj(e)))}base64(e){return this._addCheck(G({kind:"base64"},uv.errToObj(e)))}ip(e){return this._addCheck(G({kind:"ip"},uv.errToObj(e)))}datetime(e){var t,s;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck(G({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(s=null==e?void 0:e.local)&&void 0!==s&&s},uv.errToObj(null==e?void 0:e.message)))}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck(G({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision},uv.errToObj(null==e?void 0:e.message)))}duration(e){return this._addCheck(G({kind:"duration"},uv.errToObj(e)))}regex(e,t){return this._addCheck(G({kind:"regex",regex:e},uv.errToObj(t)))}includes(e,t){return this._addCheck(G({kind:"includes",value:e,position:null==t?void 0:t.position},uv.errToObj(null==t?void 0:t.message)))}startsWith(e,t){return this._addCheck(G({kind:"startsWith",value:e},uv.errToObj(t)))}endsWith(e,t){return this._addCheck(G({kind:"endsWith",value:e},uv.errToObj(t)))}min(e,t){return this._addCheck(G({kind:"min",value:e},uv.errToObj(t)))}max(e,t){return this._addCheck(G({kind:"max",value:e},uv.errToObj(t)))}length(e,t){return this._addCheck(G({kind:"length",value:e},uv.errToObj(t)))}nonempty(e){return this.min(1,uv.errToObj(e))}trim(){return new Mv(Y(G({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new Mv(Y(G({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new Mv(Y(G({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Fv(e,t){const s=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,n=s>r?s:r;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}Mv.create=e=>{var t;return new Mv(G({checks:[],typeName:yy.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t},xv(e)))};class Lv extends vv{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Kx.number){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.number,received:t.parsedType}),sv}let t;const s=new tv;for(const r of this._def.checks)if("int"===r.kind)Ux.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ev(t,{code:Hx.invalid_type,expected:"integer",received:"float",message:r.message}),s.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),ev(t,{code:Hx.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),ev(t,{code:Hx.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),s.dirty())}else"multipleOf"===r.kind?0!==Fv(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),ev(t,{code:Hx.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ev(t,{code:Hx.not_finite,message:r.message}),s.dirty()):Ux.assertNever(r);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,uv.toString(t))}gt(e,t){return this.setLimit("min",e,!1,uv.toString(t))}lte(e,t){return this.setLimit("max",e,!0,uv.toString(t))}lt(e,t){return this.setLimit("max",e,!1,uv.toString(t))}setLimit(e,t,s,r){return new Lv(Y(G({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:uv.toString(r)}]}))}_addCheck(e){return new Lv(Y(G({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:uv.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:uv.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:uv.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:uv.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:uv.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:uv.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:uv.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:uv.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:uv.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&Ux.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const s of this._def.checks){if("finite"===s.kind||"int"===s.kind||"multipleOf"===s.kind)return!0;"min"===s.kind?(null===t||s.value>t)&&(t=s.value):"max"===s.kind&&(null===e||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Lv.create=e=>new Lv(G({checks:[],typeName:yy.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1},xv(e)));class $v extends vv{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==Kx.bigint){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.bigint,received:t.parsedType}),sv}let t;const s=new tv;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),ev(t,{code:Hx.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),ev(t,{code:Hx.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),s.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ev(t,{code:Hx.not_multiple_of,multipleOf:r.value,message:r.message}),s.dirty()):Ux.assertNever(r);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,uv.toString(t))}gt(e,t){return this.setLimit("min",e,!1,uv.toString(t))}lte(e,t){return this.setLimit("max",e,!0,uv.toString(t))}lt(e,t){return this.setLimit("max",e,!1,uv.toString(t))}setLimit(e,t,s,r){return new $v(Y(G({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:uv.toString(r)}]}))}_addCheck(e){return new $v(Y(G({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:uv.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:uv.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:uv.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:uv.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:uv.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}$v.create=e=>{var t;return new $v(G({checks:[],typeName:yy.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t},xv(e)))};class zv extends vv{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Kx.boolean){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.boolean,received:t.parsedType}),sv}return nv(e.data)}}zv.create=e=>new zv(G({typeName:yy.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1},xv(e)));class Uv extends vv{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Kx.date){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.date,received:t.parsedType}),sv}if(isNaN(e.data.getTime())){return ev(this._getOrReturnCtx(e),{code:Hx.invalid_date}),sv}const t=new tv;let s;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(s=this._getOrReturnCtx(e,s),ev(s,{code:Hx.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(s=this._getOrReturnCtx(e,s),ev(s,{code:Hx.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):Ux.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Uv(Y(G({},this._def),{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:uv.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:uv.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Uv.create=e=>new Uv(G({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:yy.ZodDate},xv(e)));class Vv extends vv{_parse(e){if(this._getType(e)!==Kx.symbol){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.symbol,received:t.parsedType}),sv}return nv(e.data)}}Vv.create=e=>new Vv(G({typeName:yy.ZodSymbol},xv(e)));class Bv extends vv{_parse(e){if(this._getType(e)!==Kx.undefined){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.undefined,received:t.parsedType}),sv}return nv(e.data)}}Bv.create=e=>new Bv(G({typeName:yy.ZodUndefined},xv(e)));class Wv extends vv{_parse(e){if(this._getType(e)!==Kx.null){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.null,received:t.parsedType}),sv}return nv(e.data)}}Wv.create=e=>new Wv(G({typeName:yy.ZodNull},xv(e)));class qv extends vv{constructor(){super(...arguments),this._any=!0}_parse(e){return nv(e.data)}}qv.create=e=>new qv(G({typeName:yy.ZodAny},xv(e)));class Kv extends vv{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nv(e.data)}}Kv.create=e=>new Kv(G({typeName:yy.ZodUnknown},xv(e)));class Zv extends vv{_parse(e){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.never,received:t.parsedType}),sv}}Zv.create=e=>new Zv(G({typeName:yy.ZodNever},xv(e)));class Hv extends vv{_parse(e){if(this._getType(e)!==Kx.undefined){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.void,received:t.parsedType}),sv}return nv(e.data)}}Hv.create=e=>new Hv(G({typeName:yy.ZodVoid},xv(e)));class Gv extends vv{_parse(e){const{ctx:t,status:s}=this._processInputParams(e),r=this._def;if(t.parsedType!==Kx.array)return ev(t,{code:Hx.invalid_type,expected:Kx.array,received:t.parsedType}),sv;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,n=t.data.length<r.exactLength.value;(e||n)&&(ev(t,{code:e?Hx.too_big:Hx.too_small,minimum:n?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),s.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(ev(t,{code:Hx.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),s.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(ev(t,{code:Hx.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((e,s)=>r.type._parseAsync(new fv(t,e,t.path,s)))).then(e=>tv.mergeArray(s,e));const n=[...t.data].map((e,s)=>r.type._parseSync(new fv(t,e,t.path,s)));return tv.mergeArray(s,n)}get element(){return this._def.type}min(e,t){return new Gv(Y(G({},this._def),{minLength:{value:e,message:uv.toString(t)}}))}max(e,t){return new Gv(Y(G({},this._def),{maxLength:{value:e,message:uv.toString(t)}}))}length(e,t){return new Gv(Y(G({},this._def),{exactLength:{value:e,message:uv.toString(t)}}))}nonempty(e){return this.min(1,e)}}function Yv(e){if(e instanceof Qv){const t={};for(const s in e.shape){const r=e.shape[s];t[s]=uy.create(Yv(r))}return new Qv(Y(G({},e._def),{shape:()=>t}))}return e instanceof Gv?new Gv(Y(G({},e._def),{type:Yv(e.element)})):e instanceof uy?uy.create(Yv(e.unwrap())):e instanceof my?my.create(Yv(e.unwrap())):e instanceof ty?ty.create(e.items.map(e=>Yv(e))):e}Gv.create=(e,t)=>new Gv(G({type:e,minLength:null,maxLength:null,exactLength:null,typeName:yy.ZodArray},xv(t)));class Qv extends vv{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Ux.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Kx.object){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.object,received:t.parsedType}),sv}const{status:t,ctx:s}=this._processInputParams(e),{shape:r,keys:n}=this._getCached(),a=[];if(!(this._def.catchall instanceof Zv&&"strip"===this._def.unknownKeys))for(const o in s.data)n.includes(o)||a.push(o);const i=[];for(const o of n){const e=r[o],t=s.data[o];i.push({key:{status:"valid",value:o},value:e._parse(new fv(s,t,s.path,o)),alwaysSet:o in s.data})}if(this._def.catchall instanceof Zv){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of a)i.push({key:{status:"valid",value:t},value:{status:"valid",value:s.data[t]}});else if("strict"===e)a.length>0&&(ev(s,{code:Hx.unrecognized_keys,keys:a}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of a){const r=s.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new fv(s,r,s.path,t)),alwaysSet:t in s.data})}}return s.common.async?Promise.resolve().then(()=>ne(this,null,function*(){const e=[];for(const t of i){const s=yield t.key,r=yield t.value;e.push({key:s,value:r,alwaysSet:t.alwaysSet})}return e})).then(e=>tv.mergeObjectSync(t,e)):tv.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return uv.errToObj,new Qv(G(Y(G({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:(t,s)=>{var r,n,a,i;const o=null!==(a=null===(n=(r=this._def).errorMap)||void 0===n?void 0:n.call(r,t,s).message)&&void 0!==a?a:s.defaultError;return"unrecognized_keys"===t.code?{message:null!==(i=uv.errToObj(e).message)&&void 0!==i?i:o}:{message:o}}}:{}))}strip(){return new Qv(Y(G({},this._def),{unknownKeys:"strip"}))}passthrough(){return new Qv(Y(G({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new Qv(Y(G({},this._def),{shape:()=>G(G({},this._def.shape()),e)}))}merge(e){return new Qv({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>G(G({},this._def.shape()),e._def.shape()),typeName:yy.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Qv(Y(G({},this._def),{catchall:e}))}pick(e){const t={};return Ux.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new Qv(Y(G({},this._def),{shape:()=>t}))}omit(e){const t={};return Ux.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new Qv(Y(G({},this._def),{shape:()=>t}))}deepPartial(){return Yv(this)}partial(e){const t={};return Ux.objectKeys(this.shape).forEach(s=>{const r=this.shape[s];e&&!e[s]?t[s]=r:t[s]=r.optional()}),new Qv(Y(G({},this._def),{shape:()=>t}))}required(e){const t={};return Ux.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let e=this.shape[s];for(;e instanceof uy;)e=e._def.innerType;t[s]=e}}),new Qv(Y(G({},this._def),{shape:()=>t}))}keyof(){return iy(Ux.objectKeys(this.shape))}}Qv.create=(e,t)=>new Qv(G({shape:()=>e,unknownKeys:"strip",catchall:Zv.create(),typeName:yy.ZodObject},xv(t))),Qv.strictCreate=(e,t)=>new Qv(G({shape:()=>e,unknownKeys:"strict",catchall:Zv.create(),typeName:yy.ZodObject},xv(t))),Qv.lazycreate=(e,t)=>new Qv(G({shape:e,unknownKeys:"strip",catchall:Zv.create(),typeName:yy.ZodObject},xv(t)));class Xv extends vv{_parse(e){const{ctx:t}=this._processInputParams(e),s=this._def.options;if(t.common.async)return Promise.all(s.map(e=>ne(this,null,function*(){const s=Y(G({},t),{common:Y(G({},t.common),{issues:[]}),parent:null});return{result:yield e._parseAsync({data:t.data,path:t.path,parent:s}),ctx:s}}))).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const s=e.map(e=>new Gx(e.ctx.common.issues));return ev(t,{code:Hx.invalid_union,unionErrors:s}),sv});{let e;const r=[];for(const a of s){const s=Y(G({},t),{common:Y(G({},t.common),{issues:[]}),parent:null}),n=a._parseSync({data:t.data,path:t.path,parent:s});if("valid"===n.status)return n;"dirty"!==n.status||e||(e={result:n,ctx:s}),s.common.issues.length&&r.push(s.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const n=r.map(e=>new Gx(e));return ev(t,{code:Hx.invalid_union,unionErrors:n}),sv}}get options(){return this._def.options}}Xv.create=(e,t)=>new Xv(G({options:e,typeName:yy.ZodUnion},xv(t)));function Jv(e,t){const s=Zx(e),r=Zx(t);if(e===t)return{valid:!0,data:e};if(s===Kx.object&&r===Kx.object){const s=Ux.objectKeys(t),r=Ux.objectKeys(e).filter(e=>-1!==s.indexOf(e)),n=G(G({},e),t);for(const a of r){const s=Jv(e[a],t[a]);if(!s.valid)return{valid:!1};n[a]=s.data}return{valid:!0,data:n}}if(s===Kx.array&&r===Kx.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let r=0;r<e.length;r++){const n=Jv(e[r],t[r]);if(!n.valid)return{valid:!1};s.push(n.data)}return{valid:!0,data:s}}return s===Kx.date&&r===Kx.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class ey extends vv{_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=(e,r)=>{if(av(e)||av(r))return sv;const n=Jv(e.value,r.value);return n.valid?((iv(e)||iv(r))&&t.dirty(),{status:t.value,value:n.data}):(ev(s,{code:Hx.invalid_intersection_types}),sv)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}ey.create=(e,t,s)=>new ey(G({left:e,right:t,typeName:yy.ZodIntersection},xv(s)));class ty extends vv{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Kx.array)return ev(s,{code:Hx.invalid_type,expected:Kx.array,received:s.parsedType}),sv;if(s.data.length<this._def.items.length)return ev(s,{code:Hx.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),sv;!this._def.rest&&s.data.length>this._def.items.length&&(ev(s,{code:Hx.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...s.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new fv(s,e,s.path,t)):null}).filter(e=>!!e);return s.common.async?Promise.all(r).then(e=>tv.mergeArray(t,e)):tv.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new ty(Y(G({},this._def),{rest:e}))}}ty.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ty(G({items:e,typeName:yy.ZodTuple,rest:null},xv(t)))};class sy extends vv{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Kx.map)return ev(s,{code:Hx.invalid_type,expected:Kx.map,received:s.parsedType}),sv;const r=this._def.keyType,n=this._def.valueType,a=[...s.data.entries()].map(([e,t],a)=>({key:r._parse(new fv(s,e,s.path,[a,"key"])),value:n._parse(new fv(s,t,s.path,[a,"value"]))}));if(s.common.async){const e=new Map;return Promise.resolve().then(()=>ne(this,null,function*(){for(const s of a){const r=yield s.key,n=yield s.value;if("aborted"===r.status||"aborted"===n.status)return sv;"dirty"!==r.status&&"dirty"!==n.status||t.dirty(),e.set(r.value,n.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const s of a){const r=s.key,n=s.value;if("aborted"===r.status||"aborted"===n.status)return sv;"dirty"!==r.status&&"dirty"!==n.status||t.dirty(),e.set(r.value,n.value)}return{status:t.value,value:e}}}}sy.create=(e,t,s)=>new sy(G({valueType:t,keyType:e,typeName:yy.ZodMap},xv(s)));class ry extends vv{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==Kx.set)return ev(s,{code:Hx.invalid_type,expected:Kx.set,received:s.parsedType}),sv;const r=this._def;null!==r.minSize&&s.data.size<r.minSize.value&&(ev(s,{code:Hx.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&s.data.size>r.maxSize.value&&(ev(s,{code:Hx.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const n=this._def.valueType;function a(e){const s=new Set;for(const r of e){if("aborted"===r.status)return sv;"dirty"===r.status&&t.dirty(),s.add(r.value)}return{status:t.value,value:s}}const i=[...s.data.values()].map((e,t)=>n._parse(new fv(s,e,s.path,t)));return s.common.async?Promise.all(i).then(e=>a(e)):a(i)}min(e,t){return new ry(Y(G({},this._def),{minSize:{value:e,message:uv.toString(t)}}))}max(e,t){return new ry(Y(G({},this._def),{maxSize:{value:e,message:uv.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ry.create=(e,t)=>new ry(G({valueType:e,minSize:null,maxSize:null,typeName:yy.ZodSet},xv(t)));class ny extends vv{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ny.create=(e,t)=>new ny(G({getter:e,typeName:yy.ZodLazy},xv(t)));class ay extends vv{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ev(t,{received:t.data,code:Hx.invalid_literal,expected:this._def.value}),sv}return{status:"valid",value:e.data}}get value(){return this._def.value}}function iy(e,t){return new oy(G({values:e,typeName:yy.ZodEnum},xv(t)))}ay.create=(e,t)=>new ay(G({value:e,typeName:yy.ZodLiteral},xv(t)));class oy extends vv{constructor(){super(...arguments),hv.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),s=this._def.values;return ev(t,{expected:Ux.joinValues(s),received:t.parsedType,code:Hx.invalid_type}),sv}if(cv(this,hv)||dv(this,hv,new Set(this._def.values)),!cv(this,hv).has(e.data)){const t=this._getOrReturnCtx(e),s=this._def.values;return ev(t,{received:t.data,code:Hx.invalid_enum_value,options:s}),sv}return nv(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return oy.create(e,G(G({},this._def),t))}exclude(e,t=this._def){return oy.create(this.options.filter(t=>!e.includes(t)),G(G({},this._def),t))}}hv=new WeakMap,oy.create=iy;class ly extends vv{constructor(){super(...arguments),pv.set(this,void 0)}_parse(e){const t=Ux.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==Kx.string&&s.parsedType!==Kx.number){const e=Ux.objectValues(t);return ev(s,{expected:Ux.joinValues(e),received:s.parsedType,code:Hx.invalid_type}),sv}if(cv(this,pv)||dv(this,pv,new Set(Ux.getValidEnumValues(this._def.values))),!cv(this,pv).has(e.data)){const e=Ux.objectValues(t);return ev(s,{received:s.data,code:Hx.invalid_enum_value,options:e}),sv}return nv(e.data)}get enum(){return this._def.values}}pv=new WeakMap,ly.create=(e,t)=>new ly(G({values:e,typeName:yy.ZodNativeEnum},xv(t)));class cy extends vv{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Kx.promise&&!1===t.common.async)return ev(t,{code:Hx.invalid_type,expected:Kx.promise,received:t.parsedType}),sv;const s=t.parsedType===Kx.promise?t.data:Promise.resolve(t.data);return nv(s.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}cy.create=(e,t)=>new cy(G({type:e,typeName:yy.ZodPromise},xv(t)));class dy extends vv{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===yy.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:s}=this._processInputParams(e),r=this._def.effect||null,n={addIssue:e=>{ev(s,e),e.fatal?t.abort():t.dirty()},get path(){return s.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===r.type){const e=r.transform(s.data,n);if(s.common.async)return Promise.resolve(e).then(e=>ne(this,null,function*(){if("aborted"===t.value)return sv;const r=yield this._def.schema._parseAsync({data:e,path:s.path,parent:s});return"aborted"===r.status?sv:"dirty"===r.status||"dirty"===t.value?rv(r.value):r}));{if("aborted"===t.value)return sv;const r=this._def.schema._parseSync({data:e,path:s.path,parent:s});return"aborted"===r.status?sv:"dirty"===r.status||"dirty"===t.value?rv(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,n);if(s.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===s.common.async){const r=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===r.status?sv:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(s=>"aborted"===s.status?sv:("dirty"===s.status&&t.dirty(),e(s.value).then(()=>({status:t.value,value:s.value}))))}if("transform"===r.type){if(!1===s.common.async){const e=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ov(e))return e;const a=r.transform(e.value,n);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(e=>ov(e)?Promise.resolve(r.transform(e.value,n)).then(e=>({status:t.value,value:e})):e)}Ux.assertNever(r)}}dy.create=(e,t,s)=>new dy(G({schema:e,typeName:yy.ZodEffects,effect:t},xv(s))),dy.createWithPreprocess=(e,t,s)=>new dy(G({schema:t,effect:{type:"preprocess",transform:e},typeName:yy.ZodEffects},xv(s)));class uy extends vv{_parse(e){return this._getType(e)===Kx.undefined?nv(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}uy.create=(e,t)=>new uy(G({innerType:e,typeName:yy.ZodOptional},xv(t)));class my extends vv{_parse(e){return this._getType(e)===Kx.null?nv(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}my.create=(e,t)=>new my(G({innerType:e,typeName:yy.ZodNullable},xv(t)));class hy extends vv{_parse(e){const{ctx:t}=this._processInputParams(e);let s=t.data;return t.parsedType===Kx.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}hy.create=(e,t)=>new hy(G({innerType:e,typeName:yy.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default},xv(t)));class py extends vv{_parse(e){const{ctx:t}=this._processInputParams(e),s=Y(G({},t),{common:Y(G({},t.common),{issues:[]})}),r=this._def.innerType._parse({data:s.data,path:s.path,parent:G({},s)});return lv(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Gx(s.common.issues)},input:s.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new Gx(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}py.create=(e,t)=>new py(G({innerType:e,typeName:yy.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch},xv(t)));class fy extends vv{_parse(e){if(this._getType(e)!==Kx.nan){const t=this._getOrReturnCtx(e);return ev(t,{code:Hx.invalid_type,expected:Kx.nan,received:t.parsedType}),sv}return{status:"valid",value:e.data}}}fy.create=e=>new fy(G({typeName:yy.ZodNaN},xv(e)));class gy extends vv{_parse(e){const{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}}class xy extends vv{_parse(e){const{status:t,ctx:s}=this._processInputParams(e);if(s.common.async){return(()=>ne(this,null,function*(){const e=yield this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?sv:"dirty"===e.status?(t.dirty(),rv(e.value)):this._def.out._parseAsync({data:e.value,path:s.path,parent:s})}))()}{const e=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return"aborted"===e.status?sv:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:s.path,parent:s})}}static create(e,t){return new xy({in:e,out:t,typeName:yy.ZodPipeline})}}class vy extends vv{_parse(e){const t=this._def.innerType._parse(e),s=e=>(ov(e)&&(e.value=Object.freeze(e.value)),e);return lv(t)?t.then(e=>s(e)):s(t)}unwrap(){return this._def.innerType}}var yy,by;vy.create=(e,t)=>new vy(G({innerType:e,typeName:yy.ZodReadonly},xv(t))),Qv.lazycreate,(by=yy||(yy={})).ZodString="ZodString",by.ZodNumber="ZodNumber",by.ZodNaN="ZodNaN",by.ZodBigInt="ZodBigInt",by.ZodBoolean="ZodBoolean",by.ZodDate="ZodDate",by.ZodSymbol="ZodSymbol",by.ZodUndefined="ZodUndefined",by.ZodNull="ZodNull",by.ZodAny="ZodAny",by.ZodUnknown="ZodUnknown",by.ZodNever="ZodNever",by.ZodVoid="ZodVoid",by.ZodArray="ZodArray",by.ZodObject="ZodObject",by.ZodUnion="ZodUnion",by.ZodDiscriminatedUnion="ZodDiscriminatedUnion",by.ZodIntersection="ZodIntersection",by.ZodTuple="ZodTuple",by.ZodRecord="ZodRecord",by.ZodMap="ZodMap",by.ZodSet="ZodSet",by.ZodFunction="ZodFunction",by.ZodLazy="ZodLazy",by.ZodLiteral="ZodLiteral",by.ZodEnum="ZodEnum",by.ZodEffects="ZodEffects",by.ZodNativeEnum="ZodNativeEnum",by.ZodOptional="ZodOptional",by.ZodNullable="ZodNullable",by.ZodDefault="ZodDefault",by.ZodCatch="ZodCatch",by.ZodPromise="ZodPromise",by.ZodBranded="ZodBranded",by.ZodPipeline="ZodPipeline",by.ZodReadonly="ZodReadonly";const wy=Mv.create;Lv.create,fy.create,$v.create,zv.create,Uv.create,Vv.create,Bv.create,Wv.create,qv.create,Kv.create,Zv.create,Hv.create,Gv.create;const jy=Qv.create;Qv.strictCreate,Xv.create,ey.create,ty.create,sy.create,ry.create,ny.create,ay.create;const Ny=oy.create;ly.create,cy.create,dy.create,uy.create,my.create,dy.createWithPreprocess,xy.create;var ky=wt.forwardRef((e,t)=>ae.jsx(ds.label,Y(G({},e),{ref:t,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||(null==(s=e.onMouseDown)||s.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}})));ky.displayName="Label";var _y=ky;const Cy=wr("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Sy=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(_y,G({ref:t,className:fn(Cy(),r)},n))});Sy.displayName=_y.displayName;const Ey=e=>{const t=e,{children:s}=t,r=Q(t,["children"]);return jt.createElement(Ug.Provider,{value:r},s)},Ty=wt.createContext({}),Py=e=>{var t=Q(e,[]);return ae.jsx(Ty.Provider,{value:{name:t.name},children:ae.jsx(Xg,G({},t))})},Ry=()=>{const e=wt.useContext(Ty),t=wt.useContext(Dy),{getFieldState:s,formState:r}=Vg(),n=s(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return G({id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`},n)},Dy=wt.createContext({}),Ay=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);const a=wt.useId();return ae.jsx(Dy.Provider,{value:{id:a},children:ae.jsx("div",G({ref:t,className:fn("space-y-2",r)},n))})});Ay.displayName="FormItem";const Iy=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);const{error:a,formItemId:i}=Ry();return ae.jsx(Sy,G({ref:t,className:fn(a&&"text-destructive",r),htmlFor:i},n))});Iy.displayName="FormLabel";const Oy=wt.forwardRef((e,t)=>{var s=Q(e,[]);const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=Ry();return ae.jsx(rs,G({ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r},s))});Oy.displayName="FormControl";const My=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);const{formDescriptionId:a}=Ry();return ae.jsx("p",G({ref:t,id:a,className:fn("text-sm text-muted-foreground",r)},n))});My.displayName="FormDescription";const Fy=wt.forwardRef((e,t)=>{var s=e,{className:r,children:n}=s,a=Q(s,["className","children"]);const{error:i,formMessageId:o}=Ry(),l=i?String(null==i?void 0:i.message):n;return l?ae.jsx("p",Y(G({ref:t,id:o,className:fn("text-sm font-medium text-destructive",r)},a),{children:l})):null});Fy.displayName="FormMessage";const Ly=jy({fullName:wy().min(2,"Full name must be at least 2 characters"),email:wy().email("Invalid email address").optional(),phone:wy().optional(),address:wy().min(5,"Address must be at least 5 characters"),bio:wy().max(300,"Bio must be less than 300 characters").optional(),avatarUrl:wy().optional()}),$y=({isOpen:e,onClose:t})=>{const{currentUser:s}=ol(),[r,n]=wt.useState(!0),[a,i]=wt.useState(!1),[o,l]=wt.useState(null),c=Mx({resolver:qx(Ly),defaultValues:{fullName:"",email:"",phone:"",address:"",bio:"",avatarUrl:""}});wt.useEffect(()=>{ne(void 0,null,function*(){var t,r,a,i;if(s&&e){n(!0);try{const{data:e,error:n}=yield el.from("user_profiles").select("*").eq("id",s.id).single();e&&!n?(c.reset({fullName:e.full_name||(null==(t=s.user_metadata)?void 0:t.full_name)||"",email:s.email||"",phone:e.phone||"",address:e.address||"",bio:e.bio||"",avatarUrl:e.avatar_url||""}),e.avatar_url&&l(e.avatar_url)):(c.reset({fullName:(null==(r=s.user_metadata)?void 0:r.full_name)||"",email:s.email||"",phone:"",address:"",bio:"",avatarUrl:(null==(a=s.user_metadata)?void 0:a.avatar_url)||""}),(null==(i=s.user_metadata)?void 0:i.avatar_url)&&l(s.user_metadata.avatar_url))}catch(o){Qt({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{n(!1)}}})},[s,e,c]);return ae.jsx(Dd,{open:e,onOpenChange:t,children:ae.jsxs(Od,{className:"max-w-md md:max-w-xl",children:[ae.jsxs(Md,{children:[ae.jsx(Ld,{children:"Edit Profile"}),ae.jsx($d,{children:"Update your personal information and profile settings"})]}),r?ae.jsx("div",{className:"flex justify-center py-8",children:ae.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):ae.jsx(Ey,Y(G({},c),{children:ae.jsxs("form",{onSubmit:c.handleSubmit(e=>ne(void 0,null,function*(){if(s){i(!0);try{const{error:r}=yield el.from("user_profiles").upsert({id:s.id,full_name:e.fullName,phone:e.phone,address:e.address,bio:e.bio,avatar_url:e.avatarUrl,updated_at:(new Date).toISOString()});if(r)throw r;const{error:n}=yield el.auth.updateUser({data:{full_name:e.fullName,avatar_url:e.avatarUrl}});Qt({title:"Profile updated",description:"Your profile has been successfully updated!"}),t()}catch(r){Qt({title:"Failed to update profile",description:"An error occurred while updating your profile. Please try again.",variant:"destructive"})}finally{i(!1)}}else Qt({title:"Authentication required",description:"Please sign in to update your profile",variant:"destructive"})})),className:"space-y-6",children:[ae.jsx("div",{className:"flex justify-center",children:ae.jsxs("div",{className:"text-center",children:[ae.jsxs("div",{className:"relative inline-block",children:[ae.jsxs(cu,{className:"h-24 w-24 border-4 border-background",children:[ae.jsx(du,{src:o||void 0}),ae.jsx(uu,{className:"text-xl",children:c.getValues().fullName.charAt(0).toUpperCase()||"U"})]}),ae.jsxs("label",{htmlFor:"avatar-upload",className:"absolute bottom-0 right-0 p-1 rounded-full bg-primary text-white cursor-pointer",children:[ae.jsx(Ue,{className:"h-4 w-4"}),ae.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s){const e=new FileReader;e.onloadend=()=>{l(e.result),c.setValue("avatarUrl",e.result)},e.readAsDataURL(s)}}})]})]}),ae.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Click the camera icon to upload a new photo"})]})}),ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ae.jsx(Py,{control:c.control,name:"fullName",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Full Name"}),ae.jsx(Oy,{children:ae.jsx(Yf,G({placeholder:"e.g., John Doe"},e))}),ae.jsx(Fy,{})]})}),ae.jsx(Py,{control:c.control,name:"email",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Email"}),ae.jsx(Oy,{children:ae.jsx(Yf,Y(G({placeholder:"e.g., john@example.com"},e),{disabled:!0,title:"Email cannot be changed"}))}),ae.jsx(Fy,{})]})})]}),ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ae.jsx(Py,{control:c.control,name:"phone",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Phone Number"}),ae.jsx(Oy,{children:ae.jsx(Yf,G({placeholder:"e.g., (555) 123-4567"},e))}),ae.jsx(Fy,{})]})}),ae.jsx(Py,{control:c.control,name:"address",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Address"}),ae.jsx(Oy,{children:ae.jsx(Yf,G({placeholder:"e.g., 123 Main Street, San Francisco, CA"},e))}),ae.jsx(Fy,{})]})})]}),ae.jsx(Py,{control:c.control,name:"bio",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Bio"}),ae.jsx(Oy,{children:ae.jsx(Np,G({placeholder:"Tell us about yourself...",className:"min-h-[100px]"},e))}),ae.jsx(Fy,{})]})}),ae.jsxs(Fd,{children:[ae.jsxs(fl,{type:"button",variant:"outline",className:"mr-2",onClick:t,disabled:a,children:[ae.jsx(ie,{className:"h-4 w-4 mr-2"}),"Cancel"]}),ae.jsx(fl,{type:"submit",disabled:a,children:a?ae.jsxs(ae.Fragment,{children:[ae.jsx("span",{className:"h-4 w-4 mr-2 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Saving..."]}):ae.jsxs(ae.Fragment,{children:[ae.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})}))]})})},zy=()=>{const{currentUser:e,logOut:t}=ol(),s=_t(),[r,n]=wt.useState(null),[a,i]=wt.useState([]),[o,l]=wt.useState(!0),[c,d]=wt.useState(!1);wt.useEffect(()=>{if(!e)return void s("/");ne(void 0,null,function*(){var t,s,r,a;l(!0);try{const{data:o,error:l}=yield el.from("user_profiles").select("*").eq("id",e.id).single();n(o&&!l?{name:o.full_name||(null==(t=e.user_metadata)?void 0:t.full_name)||"User",avatar:null==(s=e.user_metadata)?void 0:s.avatar_url,location:`${o.city||""}, ${o.state||""}`,joinDate:new Date(o.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"}),badges:o.badges||["New Member"],email:e.email,phone:o.phone||"Not provided",address:o.address||"Not provided",bio:o.bio||"No bio provided",stats:{issuesReported:0,issuesSolved:0,eventsAttended:0}}:{name:(null==(r=e.user_metadata)?void 0:r.full_name)||"User",avatar:null==(a=e.user_metadata)?void 0:a.avatar_url,location:"Location not set",joinDate:"Recently joined",badges:["New Member"],email:e.email,phone:"Not provided",address:"Not provided",bio:"No bio provided",stats:{issuesReported:0,issuesSolved:0,eventsAttended:0}});const{data:c,error:d}=yield el.from("issues").select("*").eq("created_by",e.id).order("created_at",{ascending:!1}).limit(5);if(c&&!d){const e=c.map(e=>Y(G({id:e.id},e),{date:new Date(e.created_at).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}));i(e),n(e=>Y(G({},e),{stats:Y(G({},e.stats),{issuesReported:c.length})}))}}catch(o){Qt({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{l(!1)}})},[e,s]);return o||!r?ae.jsxs("div",{className:"min-h-screen flex flex-col",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"flex-1 flex items-center justify-center",children:ae.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent"})})]}):ae.jsxs("div",{className:"min-h-screen flex flex-col",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"pt-28 pb-20 flex-1",children:ae.jsx("div",{className:"container mx-auto px-4 md:px-6",children:ae.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[ae.jsxs("div",{className:"lg:col-span-1",children:[ae.jsxs("div",{className:"bg-card rounded-xl shadow-subtle overflow-hidden mb-6 animate-slide-up",children:[ae.jsx("div",{className:"bg-primary/10 p-6 pb-24 relative",children:ae.jsx("div",{className:"absolute top-4 right-4",children:ae.jsx(qd,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:ae.jsx(Je,{className:"h-4 w-4"})})})}),ae.jsxs("div",{className:"px-6 pb-6 relative",children:[ae.jsx("div",{className:"absolute -top-16 left-1/2 transform -translate-x-1/2",children:ae.jsx("div",{className:"h-32 w-32 rounded-full overflow-hidden border-4 border-card",children:ae.jsx("img",{src:r.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(r.name)}&background=random`,alt:r.name,className:"h-full w-full object-cover"})})}),ae.jsxs("div",{className:"mt-20 text-center",children:[ae.jsx("h2",{className:"text-2xl font-semibold mb-1",children:r.name}),ae.jsxs("div",{className:"flex items-center justify-center text-muted-foreground mb-4",children:[ae.jsx(oe,{className:"h-4 w-4 mr-1"}),ae.jsx("span",{children:r.location})]}),ae.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:r.badges.map((e,t)=>ae.jsx("div",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-xs font-medium",children:e},t))}),ae.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"text-xl font-semibold",children:r.stats.issuesReported}),ae.jsx("div",{className:"text-xs text-muted-foreground",children:"Reported"})]}),ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"text-xl font-semibold",children:r.stats.issuesSolved}),ae.jsx("div",{className:"text-xs text-muted-foreground",children:"Solved"})]}),ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"text-xl font-semibold",children:r.stats.eventsAttended}),ae.jsx("div",{className:"text-xs text-muted-foreground",children:"Events"})]})]}),ae.jsxs(qd,{className:"w-full",onClick:()=>d(!0),children:[ae.jsx(et,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})]})]})]}),ae.jsxs("div",{className:"bg-card rounded-xl shadow-subtle p-6 mb-6 animate-slide-up",style:{animationDelay:"0.1s"},children:[ae.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contact Information"}),ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{className:"flex items-start",children:[ae.jsx(he,{className:"h-5 w-5 text-muted-foreground mr-3 flex-shrink-0 mt-0.5"}),ae.jsxs("div",{children:[ae.jsx("div",{className:"text-sm text-muted-foreground",children:"Email"}),ae.jsx("div",{children:r.email})]})]}),ae.jsxs("div",{className:"flex items-start",children:[ae.jsx(tt,{className:"h-5 w-5 text-muted-foreground mr-3 flex-shrink-0 mt-0.5"}),ae.jsxs("div",{children:[ae.jsx("div",{className:"text-sm text-muted-foreground",children:"Phone"}),ae.jsx("div",{children:r.phone})]})]}),ae.jsxs("div",{className:"flex items-start",children:[ae.jsx(st,{className:"h-5 w-5 text-muted-foreground mr-3 flex-shrink-0 mt-0.5"}),ae.jsxs("div",{children:[ae.jsx("div",{className:"text-sm text-muted-foreground",children:"Address"}),ae.jsx("div",{children:r.address})]})]})]})]}),ae.jsxs("div",{className:"bg-card rounded-xl shadow-subtle p-6 animate-slide-up",style:{animationDelay:"0.2s"},children:[ae.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Account"}),ae.jsxs("div",{className:"space-y-2",children:[ae.jsx("button",{className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-secondary/80 transition-colors",children:ae.jsxs("div",{className:"flex items-center",children:[ae.jsx(Je,{className:"h-5 w-5 mr-3 text-muted-foreground"}),ae.jsx("span",{children:"Account Settings"})]})}),ae.jsx("button",{className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-secondary/80 transition-colors",children:ae.jsxs("div",{className:"flex items-center",children:[ae.jsx(De,{className:"h-5 w-5 mr-3 text-muted-foreground"}),ae.jsx("span",{children:"My Achievements"})]})}),ae.jsx("button",{className:"w-full flex items-center justify-between px-3 py-2 rounded-lg hover:bg-secondary/80 transition-colors",children:ae.jsxs("div",{className:"flex items-center",children:[ae.jsx(Ee,{className:"h-5 w-5 mr-3 text-muted-foreground"}),ae.jsx("span",{children:"My Events"})]})}),ae.jsx("button",{className:"w-full flex items-center justify-between px-3 py-2 text-destructive rounded-lg hover:bg-destructive/10 transition-colors",onClick:()=>ne(void 0,null,function*(){try{yield t(),s("/")}catch(e){Qt({title:"Error",description:"Failed to log out",variant:"destructive"})}}),children:ae.jsxs("div",{className:"flex items-center",children:[ae.jsx(Ce,{className:"h-5 w-5 mr-3"}),ae.jsx("span",{children:"Sign Out"})]})})]})]})]}),ae.jsxs("div",{className:"lg:col-span-2",children:[ae.jsxs("div",{className:"bg-card rounded-xl shadow-subtle p-6 mb-8 animate-slide-up",children:[ae.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ae.jsx("h3",{className:"text-lg font-semibold",children:"About"}),ae.jsx(qd,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>d(!0),children:ae.jsx(et,{className:"h-4 w-4"})})]}),ae.jsx("p",{className:"text-foreground/90 leading-relaxed",children:r.bio}),ae.jsxs("div",{className:"mt-4 pt-4 border-t border-border/30 flex items-center text-sm text-muted-foreground",children:[ae.jsx(ue,{className:"h-4 w-4 mr-2"}),ae.jsx("span",{children:"Member since"}),ae.jsx(qe,{className:"h-4 w-4 mx-2"}),ae.jsx("span",{children:r.joinDate})]})]}),ae.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"0.1s"},children:[ae.jsxs("div",{className:"flex items-center justify-between mb-6",children:[ae.jsx("h3",{className:"text-xl font-semibold",children:"Issues Reported"}),ae.jsx(St,{to:"/issues",className:"text-primary text-sm hover:underline",children:"View All"})]}),ae.jsx("div",{className:"space-y-6",children:a.length>0?a.map(e=>ae.jsx(gp,G({},e),e.id)):ae.jsxs("div",{className:"text-center py-12 bg-muted/30 rounded-xl",children:[ae.jsx("div",{className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:ae.jsx(oe,{className:"h-8 w-8 text-muted-foreground"})}),ae.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Issues Reported Yet"}),ae.jsx("p",{className:"text-muted-foreground max-w-md mx-auto mb-6",children:"You haven't reported any community issues yet. Start making a difference by reporting problems in your neighborhood."}),ae.jsx(St,{to:"/issues/report",children:ae.jsx(qd,{children:"Report an Issue"})})]})})]})]})]})})}),ae.jsx("footer",{className:"bg-secondary/80 py-8 px-4 md:px-6",children:ae.jsx("div",{className:"container mx-auto",children:ae.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[ae.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[ae.jsx("div",{className:"h-6 w-6 rounded-full bg-primary flex items-center justify-center mr-2",children:ae.jsx(oe,{className:"h-3 w-3 text-white"})}),ae.jsx("span",{className:"text-lg font-semibold",children:"Nagar Setu"})]}),ae.jsxs("p",{className:"text-sm text-muted-foreground",children:[" ",(new Date).getFullYear()," Nagar Setu. All rights reserved."]})]})})}),ae.jsx($y,{isOpen:c,onClose:()=>d(!1)})]})},Uy=()=>{const{toast:e}=Xt(),{currentUser:t}=ol(),[s,r]=wt.useState(!1),[n,a]=wt.useState(!1);_t();const[i,o]=wt.useState({title:"",description:"",location:"",category:"Community Cleanup",image:"",meetingDate:"",meetingTime:"",volunteersNeeded:5}),[l,c]=wt.useState([]),[d,u]=wt.useState(!0),[m,h]=wt.useState("all"),[p,f]=wt.useState({totalVolunteers:0,problemsSolved:0,activeInitiatives:0});wt.useEffect(()=>{v(),y();const e=el.channel("initiatives-changes").on("postgres_changes",{event:"*",schema:"public",table:"initiatives"},e=>{g(e)}).subscribe();return()=>{e.unsubscribe()}},[]);const g=e=>{if("INSERT"===e.eventType){const t=x(e.new);c(e=>[t,...e]),f(e=>Y(G({},e),{activeInitiatives:e.activeInitiatives+1}))}else if("UPDATE"===e.eventType){const t=x(e.new);c(e=>e.map(e=>e.id===t.id?t:e))}else"DELETE"===e.eventType&&(c(t=>t.filter(t=>t.id!==e.old.id)),f(e=>Y(G({},e),{activeInitiatives:Math.max(0,e.activeInitiatives-1)})))},x=e=>({id:e.id,title:e.title,description:e.description,location:e.location,category:e.category,image:e.image,meetingDate:e.meeting_date,meetingTime:e.meeting_time,volunteersCount:e.volunteers_count||0,volunteersNeeded:e.volunteers_needed,organizer:e.organizer,organizerAvatar:e.organizer_avatar,status:e.status,createdAt:e.created_at,volunteers:e.volunteers||[]}),v=()=>ne(void 0,null,function*(){u(!0);try{const{data:e,error:t}=yield el.from("initiatives").select("*").order("created_at",{ascending:!1});if(t)throw t;const s=e.map(x);c(s)}catch(t){e({title:"Error loading initiatives",description:"Failed to load community initiatives. Please try again.",variant:"destructive"})}finally{u(!1)}}),y=()=>ne(void 0,null,function*(){try{const{data:e,error:t}=yield el.from("initiatives").select("volunteers_count, status");if(t)throw t;const s=e.reduce((e,t)=>e+(t.volunteers_count||0),0),r=e.filter(e=>"open"===e.status).length,n=e.filter(e=>"completed"===e.status).length;f({totalVolunteers:s,problemsSolved:n,activeInitiatives:r})}catch(e){}}),b=e=>{const{name:t,value:s}=e.target;o(e=>Y(G({},e),{[t]:"volunteersNeeded"===t?parseInt(s)||0:s}))},w=l.filter(e=>"all"===m||("open"===m?"open"===e.status:"my"!==m||t&&e.volunteers.includes(t.id))),j=e=>{const[t,s]=e.split(":"),r=new Date;return r.setHours(parseInt(t),parseInt(s)),r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})};return ae.jsxs("div",{className:"min-h-screen flex flex-col",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"pt-28 pb-20 flex-1",children:ae.jsxs("div",{className:"container mx-auto px-4 md:px-6",children:[ae.jsxs("div",{className:"text-center mb-12",children:[ae.jsxs("div",{className:"inline-flex items-center px-3 py-1.5 bg-green-100 dark:bg-green-900/20 text-green-700 dark:text-green-400 rounded-full text-sm mb-6",children:[ae.jsx(rt,{className:"h-4 w-4 mr-2"}),ae.jsx("span",{children:"Community-Driven Solutions"})]}),ae.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-semibold mb-6 text-balance",children:["Join ",ae.jsx("span",{className:"text-primary",children:"Community Initiatives"})]}),ae.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-3xl mx-auto text-balance",children:"Connect with neighbors to solve local problems together. No government interference - just community members working as one to make a difference."}),ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[ae.jsxs(fl,{size:"lg",className:"group",onClick:()=>{t?r(!0):a(!0)},children:[ae.jsx($e,{className:"mr-2 h-4 w-4"}),ae.jsx("span",{children:"Start an Initiative"}),ae.jsx(fe,{className:"ml-2 h-4 w-4 transition-transform group-hover:translate-x-1"})]}),ae.jsxs(fl,{size:"lg",variant:"outline",children:[ae.jsx(nt,{className:"mr-2 h-4 w-4"}),ae.jsx("span",{children:"Browse Initiatives"})]})]})]}),ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[ae.jsxs("div",{className:"bg-card rounded-xl p-6 text-center",children:[ae.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center mx-auto mb-4",children:ae.jsx(ve,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),ae.jsx("h3",{className:"text-2xl font-semibold mb-2",children:p.totalVolunteers}),ae.jsx("p",{className:"text-muted-foreground",children:"Total Volunteers"})]}),ae.jsxs("div",{className:"bg-card rounded-xl p-6 text-center",children:[ae.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center mx-auto mb-4",children:ae.jsx(nt,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),ae.jsx("h3",{className:"text-2xl font-semibold mb-2",children:p.problemsSolved}),ae.jsx("p",{className:"text-muted-foreground",children:"Problems Solved"})]}),ae.jsxs("div",{className:"bg-card rounded-xl p-6 text-center",children:[ae.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 dark:bg-purple-900/20 flex items-center justify-center mx-auto mb-4",children:ae.jsx(at,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),ae.jsx("h3",{className:"text-2xl font-semibold mb-2",children:p.activeInitiatives}),ae.jsx("p",{className:"text-muted-foreground",children:"Active Initiatives"})]})]}),ae.jsxs("div",{className:"flex flex-wrap gap-2 mb-8",children:[ae.jsx("button",{onClick:()=>h("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("all"===m?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:"All Initiatives"}),ae.jsx("button",{onClick:()=>h("open"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("open"===m?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:"Open for Volunteers"}),t&&ae.jsx("button",{onClick:()=>h("my"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("my"===m?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:"My Initiatives"})]}),s&&ae.jsxs("div",{className:"bg-card border rounded-xl p-6 mb-8 animate-slide-down",children:[ae.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ae.jsx("h2",{className:"text-2xl font-semibold",children:"Start a Community Initiative"}),ae.jsx(fl,{variant:"ghost",size:"sm",onClick:()=>r(!1),children:""})]}),ae.jsxs("form",{onSubmit:s=>ne(void 0,null,function*(){var n,l;if(s.preventDefault(),t)try{const s={title:i.title,description:i.description,location:i.location,category:i.category,image:i.image||null,meeting_date:i.meetingDate,meeting_time:i.meetingTime,volunteers_needed:i.volunteersNeeded,organizer:(null==(n=t.user_metadata)?void 0:n.full_name)||t.email||"Anonymous",organizer_avatar:(null==(l=t.user_metadata)?void 0:l.avatar_url)||null,status:"open",volunteers_count:0,volunteers:[],created_by:t.id},{error:a}=yield el.from("initiatives").insert([s]);if(a)throw a;e({title:"Initiative Created!",description:"Your community initiative has been posted successfully."}),r(!1),o({title:"",description:"",location:"",category:"Community Cleanup",image:"",meetingDate:"",meetingTime:"",volunteersNeeded:5})}catch(c){e({title:"Error",description:c.message||"Failed to create initiative",variant:"destructive"})}else a(!0)}),className:"space-y-4",children:[ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-1",children:"Initiative Title"}),ae.jsx("input",{type:"text",id:"title",name:"title",value:i.title,onChange:b,className:"w-full p-3 rounded-lg border border-input bg-background",placeholder:"e.g., Community Park Cleanup Drive",required:!0})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"description",className:"block text-sm font-medium mb-1",children:"Description"}),ae.jsx("textarea",{id:"description",name:"description",value:i.description,onChange:b,className:"w-full p-3 rounded-lg border border-input bg-background min-h-32",placeholder:"Describe the problem and how volunteers can help solve it...",required:!0})]}),ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"location",className:"block text-sm font-medium mb-1",children:"Meeting Location"}),ae.jsx("input",{type:"text",id:"location",name:"location",value:i.location,onChange:b,className:"w-full p-3 rounded-lg border border-input bg-background",placeholder:"Where will volunteers meet?",required:!0})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"category",className:"block text-sm font-medium mb-1",children:"Category"}),ae.jsx("select",{id:"category",name:"category",value:i.category,onChange:b,className:"w-full p-3 rounded-lg border border-input bg-background",required:!0,children:["Community Cleanup","Infrastructure Repair","Environmental","Education Support","Elderly Care","Youth Programs","Food Distribution","Other"].map(e=>ae.jsx("option",{value:e,children:e},e))})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"meetingDate",className:"block text-sm font-medium mb-1",children:"Meeting Date"}),ae.jsx("input",{type:"date",id:"meetingDate",name:"meetingDate",value:i.meetingDate,onChange:b,className:"w-full p-3 rounded-lg border border-input bg-background",required:!0})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"meetingTime",className:"block text-sm font-medium mb-1",children:"Meeting Time"}),ae.jsx("input",{type:"time",id:"meetingTime",name:"meetingTime",value:i.meetingTime,onChange:b,className:"w-full p-3 rounded-lg border border-input bg-background",required:!0})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"volunteersNeeded",className:"block text-sm font-medium mb-1",children:"Volunteers Needed"}),ae.jsx("input",{type:"number",id:"volunteersNeeded",name:"volunteersNeeded",value:i.volunteersNeeded,onChange:b,className:"w-full p-3 rounded-lg border border-input bg-background",min:"1",max:"100",required:!0})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"image",className:"block text-sm font-medium mb-1",children:"Problem Image URL (Optional)"}),ae.jsx("input",{type:"url",id:"image",name:"image",value:i.image,onChange:b,className:"w-full p-3 rounded-lg border border-input bg-background",placeholder:"https://example.com/image.jpg"})]})]}),ae.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[ae.jsx(fl,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),ae.jsxs(fl,{type:"submit",children:[ae.jsx(it,{className:"mr-2 h-4 w-4"}),"Post Initiative"]})]})]})]}),d?ae.jsxs("div",{className:"text-center py-16",children:[ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),ae.jsx("p",{className:"text-muted-foreground",children:"Loading community initiatives..."})]}):ae.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.length>0?w.map(s=>{return ae.jsxs("div",{className:"bg-card rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[s.image&&ae.jsxs("div",{className:"relative h-48 overflow-hidden",children:[ae.jsx("img",{src:s.image,alt:s.title,className:"w-full h-full object-cover"}),ae.jsx("div",{className:"absolute top-3 left-3",children:ae.jsx("span",{className:"px-2 py-1 bg-white/90 dark:bg-black/90 text-xs font-medium rounded-md",children:s.category})}),ae.jsx("div",{className:"absolute top-3 right-3",children:ae.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-md "+("open"===s.status?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-400"),children:"open"===s.status?"Open":"In Progress"})})]}),ae.jsxs("div",{className:"p-5",children:[!s.image&&ae.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ae.jsx("span",{className:"px-2 py-1 bg-secondary text-xs font-medium rounded-md",children:s.category}),ae.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-md "+("open"===s.status?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-700 dark:bg-gray-900/20 dark:text-gray-400"),children:"open"===s.status?"Open":"In Progress"})]}),ae.jsx("h3",{className:"text-lg font-semibold mb-2 line-clamp-2",children:s.title}),ae.jsx("p",{className:"text-muted-foreground text-sm mb-4 line-clamp-3",children:s.description}),ae.jsxs("div",{className:"space-y-2 mb-4",children:[ae.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[ae.jsx(oe,{className:"h-4 w-4 mr-2 flex-shrink-0"}),ae.jsx("span",{className:"truncate",children:s.location})]}),ae.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[ae.jsx(Ee,{className:"h-4 w-4 mr-2 flex-shrink-0"}),ae.jsx("span",{children:(r=s.meetingDate,new Date(r).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]}),ae.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[ae.jsx(qe,{className:"h-4 w-4 mr-2 flex-shrink-0"}),ae.jsx("span",{children:j(s.meetingTime)})]})]}),ae.jsxs("div",{className:"flex items-center gap-3 mb-4 p-3 bg-secondary/50 rounded-lg",children:[ae.jsx("div",{className:"h-8 w-8 rounded-full overflow-hidden bg-gray-200 dark:bg-gray-700 flex-shrink-0",children:s.organizerAvatar?ae.jsx("img",{src:s.organizerAvatar,alt:s.organizer,className:"w-full h-full object-cover"}):ae.jsx("div",{className:"w-full h-full flex items-center justify-center",children:ae.jsx(ue,{className:"h-4 w-4 text-muted-foreground"})})}),ae.jsxs("div",{className:"min-w-0 flex-1",children:[ae.jsx("p",{className:"text-sm font-medium truncate",children:s.organizer}),ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Initiative Organizer"})]})]}),ae.jsxs("div",{className:"mb-4",children:[ae.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[ae.jsx("span",{className:"text-muted-foreground",children:"Volunteers"}),ae.jsxs("span",{className:"font-medium",children:[s.volunteersCount,"/",s.volunteersNeeded]})]}),ae.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:ae.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(s.volunteersCount/s.volunteersNeeded*100,100)}%`}})})]}),ae.jsxs("div",{className:"flex gap-2",children:[t&&s.volunteers.includes(t.id)?ae.jsxs(fl,{className:"flex-1",variant:"outline",onClick:()=>{return r=s.id,ne(void 0,null,function*(){if(t)try{const{error:s}=yield el.rpc("leave_initiative",{initiative_id:r,user_id:t.id});if(s)throw s;e({title:"Left Initiative",description:"You've left this initiative."})}catch(s){e({title:"Error",description:s.message||"Failed to leave initiative",variant:"destructive"})}});var r},children:[ae.jsx(ve,{className:"mr-2 h-4 w-4"}),"Leave Initiative"]}):ae.jsxs(fl,{className:"flex-1",onClick:()=>{return r=s.id,ne(void 0,null,function*(){if(t)try{const s=l.find(e=>e.id===r);if(s&&s.volunteers.includes(t.id))return void e({title:"Already Joined",description:"You're already a volunteer for this initiative.",variant:"destructive"});const{error:n}=yield el.rpc("join_initiative",{initiative_id:r,user_id:t.id});if(n)throw n;e({title:"Volunteered Successfully!",description:"You've joined this initiative. The organizer will contact you soon."})}catch(s){e({title:"Error",description:s.message||"Failed to join initiative",variant:"destructive"})}else a(!0)});var r},disabled:s.volunteersCount>=s.volunteersNeeded,children:[ae.jsx(ot,{className:"mr-2 h-4 w-4"}),s.volunteersCount>=s.volunteersNeeded?"Full":"Volunteer"]}),ae.jsx(fl,{variant:"outline",size:"sm",children:ae.jsx(lt,{className:"h-4 w-4"})})]})]})]},s.id);var r}):ae.jsxs("div",{className:"col-span-full text-center py-16",children:[ae.jsx(nt,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),ae.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No initiatives found"}),ae.jsx("p",{className:"text-muted-foreground mb-6",children:"all"===m?"Be the first to start a community initiative!":"open"===m?"No open initiatives right now. Start one!":"You haven't joined any initiatives yet."}),ae.jsxs(fl,{onClick:()=>r(!0),children:[ae.jsx($e,{className:"mr-2 h-4 w-4"}),"Start an Initiative"]})]})})]})}),ae.jsx("footer",{className:"bg-secondary/80 py-8 px-4 md:px-6",children:ae.jsx("div",{className:"container mx-auto",children:ae.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[ae.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[ae.jsx("div",{className:"h-6 w-6 rounded-full bg-primary flex items-center justify-center mr-2",children:ae.jsx(rt,{className:"h-3 w-3 text-white"})}),ae.jsx("span",{className:"text-lg font-semibold",children:"Community Initiatives"})]}),ae.jsx("p",{className:"text-sm text-muted-foreground",children:"Together we can solve any problem"})]})})}),ae.jsx(Kd,{isOpen:n,onClose:()=>a(!1),redirectTo:"/events"})]})},Vy=()=>{const e=Ct();return wt.useEffect(()=>{},[e.pathname]),ae.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),ae.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),ae.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},By=e=>ne(void 0,null,function*(){var t,s,r,n,a;try{const i=yield(e=>new Promise((t,s)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const e=r.result.split(",")[1];t(e)},r.onerror=e=>s(e)}))(e),o={requests:[{image:{content:i},features:[{type:"LABEL_DETECTION",maxResults:10},{type:"TEXT_DETECTION",maxResults:5},{type:"OBJECT_LOCALIZATION",maxResults:10}]}]},l=yield fetch("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyD7nJAmr4M4-qfzUQtubXAgWpc1P4ATh9E",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!l.ok)throw new Error(`Vision API error: ${l.status}`);const c=(yield l.json()).responses[0],d=(null==(t=c.labelAnnotations)?void 0:t.map(e=>e.description))||[],u=(null==(s=c.textAnnotations)?void 0:s.map(e=>e.description))||[],m=(null==(r=c.localizedObjectAnnotations)?void 0:r.map(e=>e.name))||[],h=Wy(d,u,m),p=qy(d,m);return{description:h,suggestedCategory:p,confidence:(null==(a=null==(n=c.labelAnnotations)?void 0:n[0])?void 0:a.score)||0,labels:[...d,...m].slice(0,10)}}catch(i){throw new Error("Failed to analyze image. Please add description manually.")}}),Wy=(e,t,s)=>{const r=[...e,...s].filter(Boolean);if(0===r.length)return"An issue has been detected in the uploaded image that requires attention from the municipal authorities. The image shows a civic problem that needs to be addressed. Please review the image carefully and take appropriate action to resolve this matter. Additional details may be provided by the reporter.";const n=r.filter(e=>{const t=e.toLowerCase();return t.includes("damage")||t.includes("broken")||t.includes("crack")||t.includes("hole")||t.includes("leak")||t.includes("trash")||t.includes("garbage")||t.includes("pothole")||t.includes("waste")||t.includes("graffiti")||t.includes("vandal")||t.includes("hazard")}),a=r.filter(e=>{const t=e.toLowerCase();return t.includes("road")||t.includes("street")||t.includes("sidewalk")||t.includes("pavement")||t.includes("asphalt")||t.includes("concrete")||t.includes("building")||t.includes("wall")||t.includes("fence")||t.includes("bridge")||t.includes("structure")}),i=r.filter(e=>{const t=e.toLowerCase();return t.includes("water")||t.includes("tree")||t.includes("park")||t.includes("garden")||t.includes("plant")||t.includes("outdoor")||t.includes("nature")||t.includes("landscape")}),o=r.filter(e=>{const t=e.toLowerCase();return t.includes("light")||t.includes("lamp")||t.includes("electric")||t.includes("wire")||t.includes("pole")||t.includes("pipe")||t.includes("drain")||t.includes("manhole")||t.includes("utility")});let l="This image shows a civic issue that requires municipal attention. ";if(n.length>0&&(l+=`The image reveals ${n.slice(0,3).join(", ").toLowerCase()} which appears to be affecting the area. `),a.length>0&&(l+=`The issue is located in or near ${a.slice(0,3).join(", ").toLowerCase()}. `),i.length>0&&(l+=`The surrounding environment includes ${i.slice(0,2).join(" and ").toLowerCase()}. `),o.length>0&&(l+=`Utilities or infrastructure elements such as ${o.slice(0,2).join(" and ").toLowerCase()} are visible in the vicinity. `),0===n.length&&0===a.length){l+=`The image contains elements including ${r.slice(0,5).join(", ").toLowerCase()}. `}if(t.length>0&&t[0].length>3){l+=`Visible text in the image reads: "${t[0].substring(0,100).trim()}". `}n.some(e=>e.toLowerCase().includes("damage")||e.toLowerCase().includes("broken")||e.toLowerCase().includes("hazard"))&&(l+="This issue may pose safety concerns and should be addressed promptly. "),l+="The reported issue requires inspection and appropriate action from the relevant municipal department to ensure public safety and maintain community standards. ";return l+=`Detected elements: ${[...new Set([...e,...s])].slice(0,8).join(", ").toLowerCase()}.`,l.trim()},qy=(e,t)=>{const s=[...e,...t].map(e=>e.toLowerCase());return s.some(e=>e.includes("road")||e.includes("street")||e.includes("pothole")||e.includes("asphalt")||e.includes("pavement")||e.includes("sidewalk"))?"infrastructure":s.some(e=>e.includes("water")||e.includes("leak")||e.includes("pipe")||e.includes("drain")||e.includes("flooding"))?"water":s.some(e=>e.includes("light")||e.includes("lamp")||e.includes("electric")||e.includes("wire")||e.includes("pole"))?"streetlight":s.some(e=>e.includes("trash")||e.includes("garbage")||e.includes("waste")||e.includes("litter")||e.includes("bin"))?"waste":s.some(e=>e.includes("tree")||e.includes("park")||e.includes("garden")||e.includes("green")||e.includes("plant"))?"parks":s.some(e=>e.includes("building")||e.includes("construction")||e.includes("wall")||e.includes("structure"))?"building":s.some(e=>e.includes("vehicle")||e.includes("car")||e.includes("traffic")||e.includes("transport"))?"transportation":s.some(e=>e.includes("safety")||e.includes("danger")||e.includes("hazard")||e.includes("security"))?"safety":"others"},Ky=e=>ne(void 0,null,function*(){return(yield Promise.allSettled(e.map(e=>By(e)))).map((e,t)=>"fulfilled"===e.status?e.value:{description:`Image ${t+1}: Unable to analyze automatically. Please add description manually.`,suggestedCategory:"others",confidence:0,labels:[]})});function Zy(e,t,s,r){const n=(s-e)*Math.PI/180,a=(r-t)*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}function Hy(e){const t=[/(-?\d+\.?\d*),\s*(-?\d+\.?\d*)/,/lat:\s*(-?\d+\.?\d*),?\s*lng:\s*(-?\d+\.?\d*)/i,/latitude:\s*(-?\d+\.?\d*),?\s*longitude:\s*(-?\d+\.?\d*)/i,/\((-?\d+\.?\d*),\s*(-?\d+\.?\d*)\)/];for(const s of t){const t=e.match(s);if(t){const e=parseFloat(t[1]),s=parseFloat(t[2]);if(e>=-90&&e<=90&&s>=-180&&s<=180)return{lat:e,lng:s}}}return null}function Gy(e,t){const s=e.toLowerCase().split(/\s+/).filter(e=>e.length>2),r=t.toLowerCase().split(/\s+/).filter(e=>e.length>2);if(0===s.length||0===r.length)return 0;const n=["broken","damaged","pothole","streetlight","trash","garbage","water","leak","flooding","drainage","blocked","overflowing","faulty","not working","repair","maintenance","urgent","dangerous","safety","hazard"];let a=0,i=0;const o=s.filter(e=>r.includes(e)),l=[...new Set([...s,...r])],c=o.length/l.length;o.forEach(e=>{const t=n.includes(e)?2:1;a+=t,i+=t}),l.forEach(e=>{if(!o.includes(e)){const t=n.includes(e)?2:1;i+=t}});const d=i>0?a/i:0;return Math.max(c,d)}function Yy(e,t){return ne(this,null,function*(){try{const s=yield fetch(e).then(e=>e.blob()),r=yield fetch(t).then(e=>e.blob()),n=new File([s],"new.jpg",{type:"image/jpeg"}),a=new File([r],"existing.jpg",{type:"image/jpeg"}),[i,o]=yield Ky([n,a]);if(!i||!o)return 0;const l=Gy(i.description,o.description),c=i.category===o.category?.3:0;return Math.min(l+c,1)}catch(s){return 0}})}function Qy(e){const t=new Date(e),s=new Date,r=Math.abs(s.getTime()-t.getTime()),n=Math.ceil(r/864e5);return 1===n?"1 day ago":n<7?`${n} days ago`:n<30?`${Math.ceil(n/7)} week${Math.ceil(n/7)>1?"s":""} ago`:t.toLocaleDateString()}const Xy=({isOpen:e,onClose:t,duplicates:s,confidence:r,onProceedAnyway:n,onCancel:a})=>{const i=_t(),o=e=>{t(),i(`/issues/${e}`)},l=e=>{switch(e){case"both":return"bg-red-100 text-red-800 border-red-200";case"image":return"bg-orange-100 text-orange-800 border-orange-200";case"location":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},c=e=>{switch(e){case"both":default:return ae.jsx(ct,{className:"h-3 w-3"});case"image":return ae.jsx(Ve,{className:"h-3 w-3"});case"location":return ae.jsx(oe,{className:"h-3 w-3"})}};return ae.jsx(Dd,{open:e,onOpenChange:t,children:ae.jsxs(Od,{className:"max-w-4xl w-[95vw] max-h-[90vh] overflow-y-auto",children:[ae.jsx(Md,{className:"pb-4",children:ae.jsxs("div",{className:"flex items-center gap-3",children:[ae.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:ae.jsx(ct,{className:"h-6 w-6 text-orange-600"})}),ae.jsxs("div",{children:[ae.jsx(Ld,{className:"text-xl font-semibold text-gray-900",children:"Potential Duplicate Issue Detected"}),ae.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["We found ",s.length," similar issue",s.length>1?"s":""," that might be the same as yours"]})]})]})}),ae.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[ae.jsxs("div",{className:"flex items-center justify-between",children:[ae.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Match Confidence"}),ae.jsxs("span",{className:"text-lg font-bold "+(d=r,d>=.8?"text-red-600":d>=.7?"text-orange-600":"text-yellow-600"),children:[Math.round(100*r),"%"]})]}),ae.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:ae.jsx("div",{className:"h-2 rounded-full transition-all duration-300 "+(r>=.8?"bg-red-500":r>=.7?"bg-orange-500":"bg-yellow-500"),style:{width:100*r+"%"}})})]}),ae.jsxs("div",{className:"space-y-4 mb-6",children:[ae.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[ae.jsx(ze,{className:"h-4 w-4"}),"Similar Issues Found"]}),s.map((e,t)=>ae.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[ae.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ae.jsxs("div",{className:"flex-1",children:[ae.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ae.jsxs(jp,{className:`text-xs ${l(e.match_type)}`,children:[c(e.match_type),ae.jsxs("span",{className:"ml-1 capitalize",children:[e.match_type," Match"]})]}),ae.jsxs(jp,{variant:"outline",className:"text-xs",children:[Math.round(100*e.similarity_score),"% Similar"]})]}),ae.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:e.title}),ae.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:e.description})]}),e.image&&ae.jsx("div",{className:"ml-4 flex-shrink-0",children:ae.jsx("img",{src:e.image,alt:"Issue",className:"w-16 h-16 rounded-lg object-cover border border-gray-200"})})]}),ae.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[ae.jsxs("div",{className:"flex items-center gap-4",children:[ae.jsxs("div",{className:"flex items-center gap-1",children:[ae.jsx(oe,{className:"h-3 w-3"}),ae.jsx("span",{className:"truncate max-w-[200px]",children:e.location})]}),ae.jsxs("div",{className:"flex items-center gap-1",children:[ae.jsx(qe,{className:"h-3 w-3"}),ae.jsx("span",{children:Qy(e.created_at)})]})]}),ae.jsxs(fl,{variant:"outline",size:"sm",onClick:()=>o(e.id),className:"text-xs h-7",children:[ae.jsx(ze,{className:"h-3 w-3 mr-1"}),"View Issue"]})]})]},e.id))]}),ae.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:ae.jsxs("div",{className:"flex items-start gap-3",children:[ae.jsx(ct,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),ae.jsxs("div",{children:[ae.jsx("h4",{className:"font-medium text-yellow-800 mb-1",children:"Before proceeding..."}),ae.jsx("p",{className:"text-sm text-yellow-700",children:"Duplicate reports can dilute community attention and resources. Please review the similar issues above to see if your concern has already been reported. If your issue is genuinely different or provides new information, you can proceed with submitting it."})]})]})}),ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-gray-200",children:[ae.jsx(fl,{variant:"outline",onClick:a,className:"flex-1 sm:flex-none",children:"Cancel Submission"}),ae.jsxs("div",{className:"flex gap-3 flex-1",children:[ae.jsxs(fl,{variant:"outline",onClick:()=>{var e;return o(null==(e=s[0])?void 0:e.id)},className:"flex-1",disabled:!s[0],children:[ae.jsx(ze,{className:"h-4 w-4 mr-2"}),"View Top Match"]}),ae.jsx(fl,{onClick:n,className:"flex-1 bg-orange-600 hover:bg-orange-700",children:"Submit Anyway"})]})]}),ae.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"This check helps maintain issue quality and prevents duplicates. Your submission will be processed normally if you choose to proceed."})]})});var d},Jy=({onImagesChange:e,maxImages:t=5,maxFileSize:s=10})=>{const[r,n]=wt.useState([]),a=wt.useRef(null),i=a=>{if(!(e=>!!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type)||(Qt({title:"Invalid file type",description:"Please upload only image files (JPG, PNG, GIF, WebP)",variant:"destructive"}),!1))(a))return;if(!(e=>{const t=e.size/1048576;return!(t>s&&(Qt({title:"File too large",description:`Image size must be less than ${s}MB. Current size: ${t.toFixed(1)}MB`,variant:"destructive"}),1))})(a))return;if(r.length>=t)return void Qt({title:"Upload limit reached",description:`Maximum ${t} images allowed`,variant:"destructive"});const i={id:Date.now().toString()+Math.random().toString(36).substr(2,9),file:a,url:URL.createObjectURL(a),name:a.name,size:a.size},o=[...r,i];n(o),e(o),Qt({title:"Image added",description:"Image uploaded successfully"})},o=e=>{const s=Array.from(e.target.files||[]),n=t-r.length,a=s.slice(0,n);s.length>n&&Qt({title:"Upload limit",description:`You can only upload ${n} more image(s). Maximum ${t} images allowed.`,variant:"destructive"}),a.forEach(e=>i(e)),e.target.value=""},l=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB"][t]};return ae.jsxs("div",{className:"space-y-6",children:[ae.jsx(Ud,{className:"border-2 border-dashed border-gray-300 hover:border-blue-400 transition-colors",children:ae.jsxs(Wd,{className:"p-6",children:[ae.jsx("input",{ref:a,type:"file",accept:"image/*",multiple:!0,onChange:o,className:"hidden"}),ae.jsxs("div",{className:"text-center space-y-4",children:[ae.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto",children:ae.jsx(Ve,{className:"w-8 h-8 text-blue-600"})}),ae.jsxs("div",{children:[ae.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:"Upload Issue Photos"}),ae.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[r.length,"/",t," images uploaded"]})]}),ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[ae.jsxs(fl,{type:"button",variant:"outline",onClick:()=>{var e;return null==(e=a.current)?void 0:e.click()},disabled:r.length>=t,className:"flex items-center gap-2",children:[ae.jsx(it,{className:"w-4 h-4"}),"Choose Files"]}),ae.jsxs("label",{className:"cursor-pointer",children:[ae.jsx(fl,{type:"button",variant:"outline",disabled:r.length>=t,className:"flex items-center gap-2 w-full",asChild:!0,children:ae.jsxs("span",{children:[ae.jsx(Ue,{className:"w-4 h-4"}),"Take Photo"]})}),ae.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:o,className:"hidden",disabled:r.length>=t})]})]}),ae.jsxs("p",{className:"text-xs text-gray-400",children:["Supported formats: JPG, PNG, GIF, WebP (max ",s,"MB each)"]})]})]})}),r.length>0&&ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{className:"flex items-center justify-between",children:[ae.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Uploaded Images"}),ae.jsxs("div",{className:"flex items-center gap-3",children:[ae.jsxs(jp,{variant:"secondary",children:[r.length," image",1!==r.length?"s":""]}),ae.jsx(fl,{type:"button",variant:"outline",size:"sm",onClick:()=>{r.forEach(e=>URL.revokeObjectURL(e.url)),n([]),e([])},className:"text-red-600 hover:text-red-700",children:"Clear All"})]})]}),ae.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:ae.jsx(dt,{children:r.map((t,s)=>ae.jsx(xe.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"relative group",children:ae.jsx(Ud,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:ae.jsxs(Wd,{className:"p-0",children:[ae.jsxs("div",{className:"relative aspect-square",children:[ae.jsx("img",{src:t.url,alt:`Preview ${s+1}`,className:"w-full h-full object-cover"}),ae.jsx(fl,{type:"button",variant:"destructive",size:"sm",onClick:()=>(t=>{const s=r.filter(e=>e.id!==t||(URL.revokeObjectURL(e.url),!1));n(s),e(s),Qt({title:"Image removed",description:"Image removed successfully"})})(t.id),className:"absolute top-2 right-2 w-8 h-8 p-0 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:ae.jsx(ie,{className:"w-4 h-4"})}),ae.jsx(jp,{className:"absolute top-2 left-2",variant:"default",children:s+1})]}),ae.jsxs("div",{className:"p-2 bg-gray-50",children:[ae.jsx("p",{className:"text-xs font-medium text-gray-900 truncate",children:t.name}),ae.jsx("p",{className:"text-xs text-gray-500",children:l(t.size)})]})]})})},t.id))})})]}),0===r.length&&ae.jsx(Ud,{className:"bg-blue-50 border-blue-200",children:ae.jsx(Wd,{className:"p-4",children:ae.jsxs("div",{className:"flex items-start gap-3",children:[ae.jsx(ce,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),ae.jsxs("div",{className:"flex-1",children:[ae.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Add Photos to Your Report"}),ae.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"Upload clear photos of the issue to help authorities understand and resolve the problem faster."}),ae.jsxs("ul",{className:"text-sm text-blue-600 space-y-1",children:[ae.jsx("li",{children:" Take photos from multiple angles"}),ae.jsx("li",{children:" Ensure good lighting for clarity"}),ae.jsx("li",{children:" Include surrounding context"}),ae.jsxs("li",{children:[" Maximum ",t," images, ",s,"MB each"]})]})]})]})})})]})};function eb(){const{currentUser:e}=ol(),t=_t(),[s,r]=wt.useState([]),[n,a]=wt.useState(""),[i,o]=wt.useState(""),[l,c]=wt.useState(""),[d,u]=wt.useState(null),[m,h]=wt.useState(!1),[p,f]=wt.useState(!1),[g,x]=wt.useState(!1),[v,y]=wt.useState(null),[b,w]=wt.useState(!1),[j,N]=wt.useState(null),[k,_]=wt.useState(!1);wt.useEffect(()=>{var e;null==(e=navigator.geolocation)||e.getCurrentPosition(e=>c(`${e.coords.latitude}, ${e.coords.longitude}`),()=>c("Unable to detect location"))},[]);const C=e=>ne(this,null,function*(){x(!0);try{const t=(e=>{const t=e.filter(e=>e.confidence>.3);if(0===t.length)return{description:"Multiple images have been uploaded showing different aspects of the civic issue. The images provide visual documentation of the problem from various angles and perspectives. This comprehensive visual evidence will help municipal authorities better understand the scope and severity of the issue. Please review all uploaded images carefully to assess the situation and determine the appropriate course of action. The issue requires attention from the relevant department to ensure proper resolution and maintain community standards.",category:"others"};let s=`This report includes ${e.length} image${e.length>1?"s":""} documenting the civic issue from multiple perspectives. `;s+="The visual evidence provides a comprehensive view of the problem. ",t.forEach((e,t)=>{s+=`\n\nImage ${t+1} Analysis: ${e.description} `});const r=[...new Set(t.flatMap(e=>e.labels))];r.length>0&&(s+=`\n\nCombined Analysis: Across all images, the following elements have been identified: ${r.slice(0,12).join(", ").toLowerCase()}. `),t.some(e=>e.labels.some(e=>e.toLowerCase().includes("damage")||e.toLowerCase().includes("broken")||e.toLowerCase().includes("hazard")||e.toLowerCase().includes("danger")))&&(s+="The multiple images indicate that this is a significant issue that may pose safety or health concerns. "),s+="The comprehensive visual documentation provided through these images will assist authorities in making an informed assessment and taking appropriate remedial action. ";const n=t.reduce((e,t)=>t.confidence>e.confidence?t:e).suggestedCategory,a={infrastructure:"This infrastructure-related issue requires attention from the public works or roads department.",water:"This water-related issue should be addressed by the water supply or drainage department.",streetlight:"This lighting issue requires attention from the electrical or street lighting department.",waste:"This waste management issue should be handled by the sanitation or waste management department.",parks:"This parks and recreation issue requires attention from the parks maintenance department.",building:"This building-related issue should be reviewed by the building maintenance or inspection department.",transportation:"This transportation-related issue requires attention from the traffic or transport department.",safety:"This safety concern requires immediate attention from the appropriate safety or emergency services department.",others:"This issue requires review to determine the appropriate department for resolution."};return s+=a[n]||a.others,{description:s.trim(),category:n}})(yield Ky(e));y(t),Qt({title:" AI Analysis Complete",description:"Smart description and category suggestions generated!"})}catch(t){Qt({title:"AI Analysis Failed",description:"Unable to analyze images automatically. Please add description manually.",variant:"destructive"})}finally{x(!1)}}),S=e=>ne(this,null,function*(){const t=[];for(let r=0;r<e.length&&r<1;r++){const n=e[r];try{const e=yield new Promise((e,t)=>{const s=new FileReader;s.onload=()=>e(s.result),s.onerror=t,s.readAsDataURL(n)});t.push(e)}catch(s){}}return t}),E=()=>ne(this,null,function*(){f(!0);try{const m=n.length>50?n.substring(0,47)+"...":n,p={pothole:"Infrastructure",streetlight:"Electricity",waste:"Trash",water:"Water",others:"Other"};let f=[];s.length>0&&(Qt({title:"Processing images...",description:"Please wait while we process your photos."}),f=yield S(s.map(e=>e.file)));let g=(null==d?void 0:d.lat)||null,x=(null==d?void 0:d.lng)||null;if(!g&&!x&&l){const e=l.match(/^(-?\d+\.?\d*),\s*(-?\d+\.?\d*)$/);e&&(g=parseFloat(e[1]),x=parseFloat(e[2]))}const v={title:m,description:n,location:l,latitude:g,longitude:x,category:p[i]||"Other",image:f.length>0?f[0]:null,created_by:e.id,status:"reported",comments_count:0,volunteers_count:0,created_at:(new Date).toISOString()};g&&x||Qt({title:"Location coordinates missing",description:"The issue will be submitted, but navigation features may not work. Please use the map picker for better accuracy.",variant:"destructive"});const{data:b,error:w}=yield el.from("issues").insert([v]).select();if(w)throw w;h(!0),Qt({title:"Issue reported successfully!",description:"Your report has been submitted and will be reviewed."}),a(""),o(""),c(""),u(null),y(null),r([]),setTimeout(()=>{t("/issues")},2e3)}catch(m){let e="An error occurred while submitting your report. Please try again.";(null==m?void 0:m.message)&&(e=`Submission failed: ${m.message}`),Qt({title:"Failed to submit report",description:e,variant:"destructive"})}finally{f(!1)}});return ae.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-900 via-indigo-900 to-gray-900 text-white flex justify-center items-center p-6",children:[ae.jsx(Ud,{className:"bg-white/10 border-none shadow-2xl w-full max-w-2xl p-6 rounded-3xl",children:ae.jsxs(Wd,{children:[ae.jsx(xe.h1,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:1},className:"text-3xl font-bold text-center mb-6",children:"Report a Civic Issue"}),ae.jsx("div",{className:"mb-6",children:ae.jsx(Jy,{onImagesChange:e=>{r(e);const t=e.map(e=>e.file);t.length>0&&C(t)},maxImages:5,maxFileSize:10})}),ae.jsxs("div",{className:"mb-6",children:[ae.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ae.jsx("label",{className:"text-gray-300 font-medium",children:"Description"}),s.length>0&&ae.jsx(fl,{type:"button",variant:"outline",size:"sm",onClick:()=>C(s.map(e=>e.file)),disabled:g,className:"text-blue-400 hover:text-blue-300 border-gray-600 hover:border-blue-400",children:g?ae.jsxs(ae.Fragment,{children:[ae.jsx(Le,{className:"h-4 w-4 mr-1 animate-spin"}),"Analyzing..."]}):ae.jsxs(ae.Fragment,{children:[ae.jsx(Be,{className:"h-4 w-4 mr-1"}),"Generate Description"]})})]}),ae.jsx(Np,{placeholder:"Describe the issue briefly or use AI to generate from photos",value:n,onChange:e=>a(e.target.value),className:"bg-gray-800 text-white border-gray-700 focus:ring-2 focus:ring-indigo-500"})]}),v&&ae.jsx("div",{className:"mb-6",children:ae.jsxs("div",{className:"bg-gradient-to-r from-blue-900/50 to-purple-900/50 border border-blue-600/50 rounded-lg p-4",children:[ae.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[ae.jsx(Be,{className:"h-5 w-5 text-blue-400"}),ae.jsx("span",{className:"font-medium text-blue-300",children:"AI Smart Suggestions"}),g&&ae.jsx(Le,{className:"h-4 w-4 animate-spin text-blue-400"})]}),v&&ae.jsxs("div",{className:"space-y-3",children:[ae.jsxs("div",{children:[ae.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Suggested Description:"}),ae.jsx("p",{className:"text-sm text-gray-400 bg-gray-800/50 p-2 rounded border border-gray-600",children:v.description})]}),ae.jsxs("div",{children:[ae.jsx("span",{className:"text-sm font-medium text-gray-300",children:"Suggested Category:"}),ae.jsx("p",{className:"text-sm text-gray-400 bg-gray-800/50 p-2 rounded border border-gray-600",children:v.category})]}),ae.jsxs(fl,{type:"button",onClick:()=>{v&&(a(v.description),o(v.category),y(null),Qt({title:"AI Suggestions Applied",description:"Description and category have been updated with AI suggestions."}))},size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:[ae.jsx(We,{className:"h-4 w-4 mr-1"}),"Apply Suggestions"]})]})]})}),ae.jsxs("div",{className:"mb-6",children:[ae.jsx("label",{className:"block mb-2 text-gray-300 font-medium",children:"Category"}),ae.jsxs(zf,{onValueChange:e=>o(e),children:[ae.jsx(Vf,{className:"bg-gray-800 text-white border-gray-700",children:ae.jsx(Uf,{placeholder:"Select issue category"})}),ae.jsxs(qf,{children:[ae.jsx(Kf,{value:"pothole",children:" Pothole"}),ae.jsx(Kf,{value:"streetlight",children:" Streetlight"}),ae.jsx(Kf,{value:"waste",children:" Waste Management"}),ae.jsx(Kf,{value:"water",children:" Water Leakage"}),ae.jsx(Kf,{value:"others",children:" Others"})]})]})]}),ae.jsxs("div",{className:"mb-6",children:[ae.jsxs("label",{className:"block mb-2 text-gray-300 font-medium flex items-center gap-2",children:[ae.jsx(oe,{className:"w-4 h-4"})," Location"]}),ae.jsx(Xf,{value:l,onChange:(e,t)=>{c(e),u(t||null)},placeholder:"Auto-detected or enter manually"})]}),ae.jsx("div",{className:"text-center",children:ae.jsx(fl,{onClick:()=>ne(this,null,function*(){if(e)if(n.trim())if(i)if(l.trim()){w(!0);try{let e;if(Qt({title:"Checking for duplicates...",description:"Analyzing your issue for potential duplicates."}),s.length>0){e=(yield S(s.map(e=>e.file)))[0]}const t={pothole:"Infrastructure",streetlight:"Electricity",waste:"Trash",water:"Water",others:"Other"}[i]||"Other",r=yield function(e,t,s,r,n){return ne(this,null,function*(){try{const a=new Date;a.setDate(a.getDate()-30);const{data:i,error:o}=yield el.from("issues").select("*").gte("created_at",a.toISOString()).neq("status","resolved");if(o)return{isDuplicate:!1,duplicates:[],confidence:0};if(!i||0===i.length)return{isDuplicate:!1,duplicates:[],confidence:0};const l=[];for(const u of i){let a=0,i="location",o=0;if(s){const e=Hy(u.location);if(e){const t=Zy(s.lat,s.lng,e.lat,e.lng);t<=.1&&(o=Math.max(0,1-t/.1))}}const c=Gy(e,u.description),d=n&&u.category===n?.2:0;let m=0;if(r&&u.image)try{m=yield Yy(r,u.image),m>.3&&(i=o>.3?"both":"image")}catch(t){}a=Math.max(.4*o+.4*c+.2*d,.6*m+.2*o+.2*c),a>.6&&l.push({id:u.id,title:u.title,description:u.description,location:u.location,image:u.image,created_at:u.created_at,created_by:u.created_by,similarity_score:a,match_type:i})}l.sort((e,t)=>t.similarity_score-e.similarity_score);const c=l.length>0,d=c?l[0].similarity_score:0;return{isDuplicate:c,duplicates:l.slice(0,3),confidence:d}}catch(a){return{isDuplicate:!1,duplicates:[],confidence:0}}})}(n,0,d,e,t);if(N(r),r.isDuplicate&&r.confidence>.6)return _(!0),void w(!1);yield E()}catch(t){Qt({title:"Duplicate check failed",description:"Proceeding with submission anyway.",variant:"destructive"}),yield E()}finally{w(!1)}}else Qt({title:"Location required",description:"Please provide a location for the issue",variant:"destructive"});else Qt({title:"Category required",description:"Please select a category for the issue",variant:"destructive"});else Qt({title:"Description required",description:"Please provide a description of the issue",variant:"destructive"});else Qt({title:"Authentication required",description:"Please sign in to report an issue",variant:"destructive"})}),disabled:p||b,className:"bg-pink-600 hover:bg-pink-700 text-white px-8 py-3 text-lg rounded-full shadow-lg disabled:opacity-50",children:b?ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx(Le,{className:"h-5 w-5 animate-spin"}),"Checking for duplicates..."]}):p?ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx(Le,{className:"h-5 w-5 animate-spin"}),"Submitting..."]}):"Submit Report"})}),m&&ae.jsxs(xe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 text-center flex flex-col items-center",children:[ae.jsx(le,{className:"w-10 h-10 text-green-400 mb-2"}),ae.jsx("p",{className:"text-green-300 font-medium",children:"Report submitted successfully! You'll receive updates shortly."})]})]})}),j&&ae.jsx(Xy,{isOpen:k,onClose:()=>_(!1),duplicates:j.duplicates,confidence:j.confidence,onProceedAnyway:()=>ne(this,null,function*(){_(!1),yield E()}),onCancel:()=>{_(!1),N(null),Qt({title:"Submission cancelled",description:"Your issue was not submitted. You can review the similar issues or modify your report."})}})]})}const tb=jy({fullName:wy().min(2,"Full name must be at least 2 characters"),age:wy().refine(e=>{const t=parseInt(e,10);return!isNaN(t)&&t>=18&&t<=120},{message:"Age must be between 18 and 120"}),gender:Ny(["male","female","non-binary","prefer-not-to-say"]),address:wy().min(5,"Address must be at least 5 characters"),city:wy().min(2,"City must be at least 2 characters"),state:wy().min(2,"State must be at least 2 characters"),zipCode:wy().min(5,"Zip code must be at least 5 characters"),bio:wy().max(300,"Bio must be less than 300 characters").optional()}),sb=()=>{const{currentUser:e}=ol(),t=_t(),[s,r]=wt.useState(!1);wt.useEffect(()=>{e||t("/")},[e,t]);const n=Mx({resolver:qx(tb),defaultValues:{fullName:(null==e?void 0:e.displayName)||"",age:"",gender:"prefer-not-to-say",address:"",city:"",state:"",zipCode:"",bio:""}});return ae.jsx("div",{className:"min-h-screen bg-muted/30 py-12 px-4 sm:px-6 lg:px-8",children:ae.jsxs("div",{className:"max-w-3xl mx-auto",children:[ae.jsxs("div",{className:"text-center mb-8",children:[ae.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4",children:ae.jsx(ue,{className:"h-8 w-8 text-primary"})}),ae.jsx("h1",{className:"text-3xl font-semibold mb-2",children:"Complete Your Profile"}),ae.jsx("p",{className:"text-muted-foreground",children:"Tell us a little more about yourself to get the most out of Nagar Setu"})]}),ae.jsx("div",{className:"bg-card rounded-xl shadow-subtle p-6 md:p-8",children:ae.jsx(Ey,Y(G({},n),{children:ae.jsxs("form",{onSubmit:n.handleSubmit(s=>ne(void 0,null,function*(){if(e){r(!0);try{const{error:r}=yield el.from("user_profiles").upsert({id:e.id,email:e.email,full_name:s.fullName,age:parseInt(s.age),gender:s.gender,address:s.address,city:s.city,state:s.state,zip_code:s.zipCode,role:"resident",bio:s.bio||"",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),is_onboarding_complete:!0});if(r)throw r;Qt({title:"Profile created",description:"Your profile has been successfully created!"}),t("/dashboard")}catch(n){Qt({title:"Failed to create profile",description:"An error occurred while creating your profile. Please try again.",variant:"destructive"})}finally{r(!1)}}else Qt({title:"Authentication required",description:"Please sign in to complete your profile",variant:"destructive"})})),className:"space-y-8",children:[ae.jsxs("div",{className:"space-y-6",children:[ae.jsx("h2",{className:"text-xl font-semibold",children:"Personal Information"}),ae.jsx(Py,{control:n.control,name:"fullName",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Full Name"}),ae.jsx(Oy,{children:ae.jsx(Yf,G({placeholder:"e.g., John Doe"},e))}),ae.jsx(Fy,{})]})}),ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ae.jsx(Py,{control:n.control,name:"age",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Age"}),ae.jsx(Oy,{children:ae.jsx(Yf,G({type:"number",min:"18",max:"120"},e))}),ae.jsx(Fy,{})]})}),ae.jsx(Py,{control:n.control,name:"gender",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Gender"}),ae.jsxs(zf,{onValueChange:e.onChange,defaultValue:e.value,children:[ae.jsx(Oy,{children:ae.jsx(Vf,{children:ae.jsx(Uf,{placeholder:"Select gender"})})}),ae.jsxs(qf,{children:[ae.jsx(Kf,{value:"male",children:"Male"}),ae.jsx(Kf,{value:"female",children:"Female"}),ae.jsx(Kf,{value:"non-binary",children:"Non-binary"}),ae.jsx(Kf,{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),ae.jsx(Fy,{})]})})]})]}),ae.jsxs("div",{className:"space-y-6",children:[ae.jsx("h2",{className:"text-xl font-semibold",children:"Contact Information"}),ae.jsx(Py,{control:n.control,name:"address",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Address"}),ae.jsx(Oy,{children:ae.jsx(Yf,G({placeholder:"e.g., 123 Main Street"},e))}),ae.jsx(Fy,{})]})}),ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[ae.jsx(Py,{control:n.control,name:"city",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"City"}),ae.jsx(Oy,{children:ae.jsx(Yf,G({placeholder:"e.g., San Francisco"},e))}),ae.jsx(Fy,{})]})}),ae.jsx(Py,{control:n.control,name:"state",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"State"}),ae.jsx(Oy,{children:ae.jsx(Yf,G({placeholder:"e.g., California"},e))}),ae.jsx(Fy,{})]})}),ae.jsx(Py,{control:n.control,name:"zipCode",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Zip Code"}),ae.jsx(Oy,{children:ae.jsx(Yf,G({placeholder:"e.g., 94105"},e))}),ae.jsx(Fy,{})]})})]})]}),ae.jsxs("div",{className:"space-y-6",children:[ae.jsx("h2",{className:"text-xl font-semibold",children:"About You"}),ae.jsx(Py,{control:n.control,name:"bio",render:({field:e})=>ae.jsxs(Ay,{children:[ae.jsx(Iy,{children:"Bio (Optional)"}),ae.jsx(Oy,{children:ae.jsx(Np,G({placeholder:"Tell us a bit about yourself and your interest in community improvement...",className:"min-h-[100px]"},e))}),ae.jsx(My,{children:"Share your background and why you're interested in improving your community"}),ae.jsx(Fy,{})]})})]}),ae.jsx("div",{className:"pt-4 flex justify-end",children:ae.jsx(fl,{type:"submit",size:"lg",disabled:s,children:s?ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx("span",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Creating Profile..."]}):ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx(Ne,{className:"h-4 w-4"}),"Complete Profile"]})})})]})}))})]})})},rb=()=>{const{id:e}=Et(),t=_t(),[s,r]=wt.useState(null),[n,a]=wt.useState(!0),[i,o]=wt.useState(null);return wt.useEffect(()=>{e&&(a(!0),o(null),(e=>sl.getById(e))(e).then(e=>{e?r(e):o("Event not found.")}).catch(e=>o(e.message||"Failed to load event.")).finally(()=>a(!1)))},[e]),n?ae.jsxs("div",{className:"min-h-screen",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"pt-32 pb-20 px-4 md:px-6 container mx-auto",children:ae.jsx("div",{className:"max-w-2xl mx-auto",children:ae.jsx("p",{className:"text-xl text-muted-foreground mb-12",children:"Loading event..."})})})]}):i?ae.jsxs("div",{className:"min-h-screen",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"pt-32 pb-20 px-4 md:px-6 container mx-auto",children:ae.jsxs("div",{className:"max-w-2xl mx-auto",children:[ae.jsx("p",{className:"text-xl text-destructive mb-12",children:i}),ae.jsx(fl,{onClick:()=>t("/events"),children:"Back to Events"})]})})]}):s?ae.jsxs("div",{className:"min-h-screen",children:[ae.jsx(mp,{}),ae.jsx("div",{className:"pt-32 pb-20 px-4 md:px-6 container mx-auto",children:ae.jsxs("div",{className:"max-w-2xl mx-auto",children:[ae.jsx(fl,{variant:"outline",className:"mb-6",onClick:()=>t("/events"),children:"Back to Events"}),ae.jsx("h1",{className:"text-3xl font-semibold mb-4",children:s.title}),ae.jsxs("div",{className:"mb-4 text-muted-foreground",children:[ae.jsx("span",{className:"mr-4",children:s.date}),ae.jsx("span",{children:s.time})]}),ae.jsxs("div",{className:"mb-4",children:[ae.jsx("span",{className:"font-medium",children:"Location:"})," ",s.location]}),ae.jsxs("div",{className:"mb-4",children:[ae.jsx("span",{className:"font-medium",children:"Categories:"})," ",s.categories&&s.categories.join(", ")]}),ae.jsxs("div",{className:"mb-4",children:[ae.jsx("span",{className:"font-medium",children:"Status:"})," ",s.status]}),ae.jsxs("div",{className:"mb-4",children:[ae.jsx("span",{className:"font-medium",children:"Volunteers:"})," ",s.volunteersCount||0]}),ae.jsxs("div",{className:"mb-8",children:[ae.jsx("span",{className:"font-medium",children:"Description:"}),ae.jsx("div",{className:"prose prose-sm max-w-none mt-2",children:s.description})]})]})})]}):null};function nb(e,t,{checkForDefaultPrevented:s=!0}={}){return function(r){if(null==e||e(r),!1===s||!r.defaultPrevented)return null==t?void 0:t(r)}}function ab(e,t=[]){let s=[];const r=()=>{const t=s.map(e=>wt.createContext(e));return function(s){const r=(null==s?void 0:s[e])||t;return wt.useMemo(()=>({[`__scope${e}`]:Y(G({},s),{[e]:r})}),[s,r])}};return r.scopeName=e,[function(t,r){const n=wt.createContext(r),a=s.length;s=[...s,r];const i=t=>{var s;const r=t,{scope:i,children:o}=r,l=Q(r,["scope","children"]),c=(null==(s=null==i?void 0:i[e])?void 0:s[a])||n,d=wt.useMemo(()=>l,Object.values(l));return ae.jsx(c.Provider,{value:d,children:o})};return i.displayName=t+"Provider",[i,function(s,i){var o;const l=(null==(o=null==i?void 0:i[e])?void 0:o[a])||n,c=wt.useContext(l);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${s}\` must be used within \`${t}\``)}]},ib(r,...t)]}function ib(...e){const t=e[0];if(1===e.length)return t;const s=()=>{const s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=s.reduce((t,{useScope:s,scopeName:r})=>{const n=s(e)[`__scope${r}`];return G(G({},t),n)},{});return wt.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return s.scopeName=t.scopeName,s}function ob(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function lb(...e){return t=>{let s=!1;const r=e.map(e=>{const r=ob(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){const s=r[t];"function"==typeof s?s():ob(e[t],null)}}}}function cb(...e){return wt.useCallback(lb(...e),e)}function db(e){const t=ub(e),s=wt.forwardRef((e,s)=>{const r=e,{children:n}=r,a=Q(r,["children"]),i=wt.Children.toArray(n),o=i.find(hb);if(o){const e=o.props.children,r=i.map(t=>t===o?wt.Children.count(e)>1?wt.Children.only(null):wt.isValidElement(e)?e.props.children:null:t);return ae.jsx(t,Y(G({},a),{ref:s,children:wt.isValidElement(e)?wt.cloneElement(e,void 0,r):null}))}return ae.jsx(t,Y(G({},a),{ref:s,children:n}))});return s.displayName=`${e}.Slot`,s}function ub(e){const t=wt.forwardRef((e,t)=>{const s=e,{children:r}=s,n=Q(s,["children"]);if(wt.isValidElement(r)){const e=function(e){var t,s;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning;if(n)return e.ref;if(r=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(r),s=function(e,t){const s=G({},t);for(const r in t){const n=e[r],a=t[r];/^on[A-Z]/.test(r)?n&&a?s[r]=(...e)=>{const t=a(...e);return n(...e),t}:n&&(s[r]=n):"style"===r?s[r]=G(G({},n),a):"className"===r&&(s[r]=[n,a].filter(Boolean).join(" "))}return G(G({},e),s)}(n,r.props);return r.type!==wt.Fragment&&(s.ref=t?lb(t,e):e),wt.cloneElement(r,s)}return wt.Children.count(r)>1?wt.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var mb=Symbol("radix.slottable");function hb(e){return wt.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===mb}var pb=(null==globalThis?void 0:globalThis.document)?wt.useLayoutEffect:()=>{},fb=kt[" useId ".trim().toString()]||(()=>{}),gb=0;function xb(e){const[t,s]=wt.useState(fb());return pb(()=>{e||s(e=>null!=e?e:String(gb++))},[e]),e||(t?`radix-${t}`:"")}var vb=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const s=db(`Primitive.${t}`),r=wt.forwardRef((e,r)=>{const n=e,{asChild:a}=n,i=Q(n,["asChild"]),o=a?s:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),ae.jsx(o,Y(G({},i),{ref:r}))});return r.displayName=`Primitive.${t}`,Y(G({},e),{[t]:r})},{});var yb=kt[" useInsertionEffect ".trim().toString()]||pb;function bb({prop:e,defaultProp:t,onChange:s=()=>{},caller:r}){const[n,a,i]=function({defaultProp:e,onChange:t}){const[s,r]=wt.useState(e),n=wt.useRef(s),a=wt.useRef(t);return yb(()=>{a.current=t},[t]),wt.useEffect(()=>{var e;n.current!==s&&(null==(e=a.current)||e.call(a,s),n.current=s)},[s,n]),[s,r,a]}({defaultProp:t,onChange:s}),o=void 0!==e,l=o?e:n;{const t=wt.useRef(void 0!==e);wt.useEffect(()=>{const e=t.current;if(e!==o){}t.current=o},[o,r])}const c=wt.useCallback(t=>{var s;if(o){const r=function(e){return"function"==typeof e}(t)?t(e):t;r!==e&&(null==(s=i.current)||s.call(i,r))}else a(t)},[o,e,a,i]);return[l,c]}var wb=wt.createContext(void 0);function jb(e){const t=wt.useContext(wb);return e||t||"ltr"}var Nb="rovingFocusGroup.onEntryFocus",kb={bubbles:!1,cancelable:!0},_b="RovingFocusGroup",[Cb,Sb,Eb]=function(e){const t=e+"CollectionProvider",[s,r]=ab(t),[n,a]=s(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{const{scope:t,children:s}=e,r=jt.useRef(null),a=jt.useRef(new Map).current;return ae.jsx(n,{scope:t,itemMap:a,collectionRef:r,children:s})};i.displayName=t;const o=e+"CollectionSlot",l=db(o),c=jt.forwardRef((e,t)=>{const{scope:s,children:r}=e,n=cb(t,a(o,s).collectionRef);return ae.jsx(l,{ref:n,children:r})});c.displayName=o;const d=e+"CollectionItemSlot",u="data-radix-collection-item",m=db(d),h=jt.forwardRef((e,t)=>{const s=e,{scope:r,children:n}=s,i=Q(s,["scope","children"]),o=jt.useRef(null),l=cb(t,o),c=a(d,r);return jt.useEffect(()=>(c.itemMap.set(o,G({ref:o},i)),()=>{c.itemMap.delete(o)})),ae.jsx(m,Y(G({},{[u]:""}),{ref:l,children:n}))});return h.displayName=d,[{Provider:i,Slot:c,ItemSlot:h},function(t){const s=a(e+"CollectionConsumer",t);return jt.useCallback(()=>{const e=s.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${u}]`));return Array.from(s.itemMap.values()).sort((e,s)=>t.indexOf(e.ref.current)-t.indexOf(s.ref.current))},[s.collectionRef,s.itemMap])},r]}(_b),[Tb,Pb]=ab(_b,[Eb]),[Rb,Db]=Tb(_b),Ab=wt.forwardRef((e,t)=>ae.jsx(Cb.Provider,{scope:e.__scopeRovingFocusGroup,children:ae.jsx(Cb.Slot,{scope:e.__scopeRovingFocusGroup,children:ae.jsx(Ib,Y(G({},e),{ref:t}))})}));Ab.displayName=_b;var Ib=wt.forwardRef((e,t)=>{const s=e,{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1}=s,m=Q(s,["__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopId","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus"]),h=wt.useRef(null),p=cb(t,h),f=jb(i),[g,x]=bb({prop:o,defaultProp:null!=l?l:null,onChange:c,caller:_b}),[v,y]=wt.useState(!1),b=function(e){const t=wt.useRef(e);return wt.useEffect(()=>{t.current=e}),wt.useMemo(()=>(...e)=>{var s;return null==(s=t.current)?void 0:s.call(t,...e)},[])}(d),w=Sb(r),j=wt.useRef(!1),[N,k]=wt.useState(0);return wt.useEffect(()=>{const e=h.current;if(e)return e.addEventListener(Nb,b),()=>e.removeEventListener(Nb,b)},[b]),ae.jsx(Rb,{scope:r,orientation:n,dir:f,loop:a,currentTabStopId:g,onItemFocus:wt.useCallback(e=>x(e),[x]),onItemShiftTab:wt.useCallback(()=>y(!0),[]),onFocusableItemAdd:wt.useCallback(()=>k(e=>e+1),[]),onFocusableItemRemove:wt.useCallback(()=>k(e=>e-1),[]),children:ae.jsx(vb.div,Y(G({tabIndex:v||0===N?-1:0,"data-orientation":n},m),{ref:p,style:G({outline:"none"},e.style),onMouseDown:nb(e.onMouseDown,()=>{j.current=!0}),onFocus:nb(e.onFocus,e=>{const t=!j.current;if(e.target===e.currentTarget&&t&&!v){const t=new CustomEvent(Nb,kb);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=w().filter(e=>e.focusable);Lb([e.find(e=>e.active),e.find(e=>e.id===g),...e].filter(Boolean).map(e=>e.ref.current),u)}}j.current=!1}),onBlur:nb(e.onBlur,()=>y(!1))}))})}),Ob="RovingFocusGroupItem",Mb=wt.forwardRef((e,t)=>{const s=e,{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o}=s,l=Q(s,["__scopeRovingFocusGroup","focusable","active","tabStopId","children"]),c=xb(),d=i||c,u=Db(Ob,r),m=u.currentTabStopId===d,h=Sb(r),{onFocusableItemAdd:p,onFocusableItemRemove:f,currentTabStopId:g}=u;return wt.useEffect(()=>{if(n)return p(),()=>f()},[n,p,f]),ae.jsx(Cb.ItemSlot,{scope:r,id:d,focusable:n,active:a,children:ae.jsx(vb.span,Y(G({tabIndex:m?0:-1,"data-orientation":u.orientation},l),{ref:t,onMouseDown:nb(e.onMouseDown,e=>{n?u.onItemFocus(d):e.preventDefault()}),onFocus:nb(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:nb(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void u.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,s){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,s);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Fb[r]}(e,u.orientation,u.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let n=h().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)n.reverse();else if("prev"===t||"next"===t){"prev"===t&&n.reverse();const a=n.indexOf(e.currentTarget);n=u.loop?(r=a+1,(s=n).map((e,t)=>s[(r+t)%s.length])):n.slice(a+1)}setTimeout(()=>Lb(n))}var s,r}),children:"function"==typeof o?o({isCurrentTabStop:m,hasTabStop:null!=g}):o}))})});Mb.displayName=Ob;var Fb={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Lb(e,t=!1){const s=document.activeElement;for(const r of e){if(r===s)return;if(r.focus({preventScroll:t}),document.activeElement!==s)return}}var $b=Ab,zb=Mb;var Ub=e=>{const{present:t,children:s}=e,r=function(e){const[t,s]=wt.useState(),r=wt.useRef(null),n=wt.useRef(e),a=wt.useRef("none"),i=e?"mounted":"unmounted",[o,l]=function(e,t){return wt.useReducer((e,s)=>{const r=t[e][s];return null!=r?r:e},e)}(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return wt.useEffect(()=>{const e=Vb(r.current);a.current="mounted"===o?e:"none"},[o]),pb(()=>{const t=r.current,s=n.current;if(s!==e){const r=a.current,i=Vb(t);if(e)l("MOUNT");else if("none"===i||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(s&&r!==i?"ANIMATION_OUT":"UNMOUNT")}n.current=e}},[e,l]),pb(()=>{var e;if(t){let s;const i=null!=(e=t.ownerDocument.defaultView)?e:window,o=e=>{const a=Vb(r.current).includes(CSS.escape(e.animationName));if(e.target===t&&a&&(l("ANIMATION_END"),!n.current)){const e=t.style.animationFillMode;t.style.animationFillMode="forwards",s=i.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=e)})}},c=e=>{e.target===t&&(a.current=Vb(r.current))};return t.addEventListener("animationstart",c),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{i.clearTimeout(s),t.removeEventListener("animationstart",c),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:wt.useCallback(e=>{r.current=e?getComputedStyle(e):null,s(e)},[])}}(t),n="function"==typeof s?s({present:r.isPresent}):wt.Children.only(s),a=cb(r.ref,function(e){var t,s;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,n=r&&"isReactWarning"in r&&r.isReactWarning;if(n)return e.ref;if(r=null==(s=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n)return e.props.ref;return e.props.ref||e.ref}(n));return"function"==typeof s||r.isPresent?wt.cloneElement(n,{ref:a}):null};function Vb(e){return(null==e?void 0:e.animationName)||"none"}Ub.displayName="Presence";var Bb="Tabs",[Wb,qb]=ab(Bb,[Pb]),Kb=Pb(),[Zb,Hb]=Wb(Bb),Gb=wt.forwardRef((e,t)=>{const s=e,{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic"}=s,d=Q(s,["__scopeTabs","value","onValueChange","defaultValue","orientation","dir","activationMode"]),u=jb(l),[m,h]=bb({prop:n,onChange:a,defaultProp:null!=i?i:"",caller:Bb});return ae.jsx(Zb,{scope:r,baseId:xb(),value:m,onValueChange:h,orientation:o,dir:u,activationMode:c,children:ae.jsx(vb.div,Y(G({dir:u,"data-orientation":o},d),{ref:t}))})});Gb.displayName=Bb;var Yb="TabsList",Qb=wt.forwardRef((e,t)=>{const s=e,{__scopeTabs:r,loop:n=!0}=s,a=Q(s,["__scopeTabs","loop"]),i=Hb(Yb,r),o=Kb(r);return ae.jsx($b,Y(G({asChild:!0},o),{orientation:i.orientation,dir:i.dir,loop:n,children:ae.jsx(vb.div,Y(G({role:"tablist","aria-orientation":i.orientation},a),{ref:t}))}))});Qb.displayName=Yb;var Xb="TabsTrigger",Jb=wt.forwardRef((e,t)=>{const s=e,{__scopeTabs:r,value:n,disabled:a=!1}=s,i=Q(s,["__scopeTabs","value","disabled"]),o=Hb(Xb,r),l=Kb(r),c=sw(o.baseId,n),d=rw(o.baseId,n),u=n===o.value;return ae.jsx(zb,Y(G({asChild:!0},l),{focusable:!a,active:u,children:ae.jsx(vb.button,Y(G({type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c},i),{ref:t,onMouseDown:nb(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(n)}),onKeyDown:nb(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(n)}),onFocus:nb(e.onFocus,()=>{const e="manual"!==o.activationMode;u||a||!e||o.onValueChange(n)})}))}))});Jb.displayName=Xb;var ew="TabsContent",tw=wt.forwardRef((e,t)=>{const s=e,{__scopeTabs:r,value:n,forceMount:a,children:i}=s,o=Q(s,["__scopeTabs","value","forceMount","children"]),l=Hb(ew,r),c=sw(l.baseId,n),d=rw(l.baseId,n),u=n===l.value,m=wt.useRef(u);return wt.useEffect(()=>{const e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),ae.jsx(Ub,{present:a||u,children:({present:s})=>ae.jsx(vb.div,Y(G({"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!s,id:d,tabIndex:0},o),{ref:t,style:Y(G({},e.style),{animationDuration:m.current?"0s":void 0}),children:s&&i}))})});function sw(e,t){return`${e}-trigger-${t}`}function rw(e,t){return`${e}-content-${t}`}tw.displayName=ew;var nw=Qb,aw=Jb,iw=tw;const ow=Gb,lw=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(nw,G({ref:t,className:fn("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r)},n))});lw.displayName=nw.displayName;const cw=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(aw,G({ref:t,className:fn("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r)},n))});cw.displayName=aw.displayName;const dw=wt.forwardRef((e,t)=>{var s=e,{className:r}=s,n=Q(s,["className"]);return ae.jsx(iw,G({ref:t,className:fn("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r)},n))});dw.displayName=iw.displayName;const uw=(e,t)=>{let s={Safety:"critical",Water:"high",Electricity:"high",Infrastructure:"medium",Transportation:"medium",Trash:"low",Noise:"low",Drainage:"medium","Public Space":"low"}[e]||"medium";if(Math.floor((Date.now()-new Date(t).getTime())/864e5)>7){const e=["low","medium","high","critical"],t=e.indexOf(s);t<e.length-1&&(s=e[t+1])}return s};function mw({isOpen:e,onClose:t}){const[s,r]=wt.useState([{id:"1",type:"urgent",title:"Critical Safety Issue",message:"New safety issue reported at Main Street Bridge - requires immediate attention",timestamp:new Date(Date.now()-3e5),read:!1},{id:"2",type:"info",title:"New Issue Reported",message:"Broken streetlight reported on Oak Avenue",timestamp:new Date(Date.now()-9e5),read:!1},{id:"3",type:"success",title:"Issue Resolved",message:"Pothole on Elm Street has been successfully repaired",timestamp:new Date(Date.now()-18e5),read:!0},{id:"4",type:"warning",title:"Response Overdue",message:"Water leak issue on Pine Road is overdue for response",timestamp:new Date(Date.now()-36e5),read:!1}]),n=e=>{switch(e){case"urgent":return ae.jsx(ct,{className:"h-4 w-4 text-red-500"});case"success":return ae.jsx(le,{className:"h-4 w-4 text-green-500"});case"warning":return ae.jsx(qe,{className:"h-4 w-4 text-orange-500"});default:return ae.jsx(ut,{className:"h-4 w-4 text-blue-500"})}},a=e=>{switch(e){case"urgent":return"border-l-red-500 bg-red-50";case"success":return"border-l-green-500 bg-green-50";case"warning":return"border-l-orange-500 bg-orange-50";default:return"border-l-blue-500 bg-blue-50"}},i=s.filter(e=>!e.read).length,o=e=>{const t=new Date,s=Math.floor((t.getTime()-e.getTime())/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:`${Math.floor(s/1440)}d ago`};return e?ae.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-end p-4",children:[ae.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm",onClick:t}),ae.jsxs(Ud,{className:"relative w-full max-w-md max-h-[80vh] overflow-hidden shadow-xl",children:[ae.jsxs(Vd,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx(_e,{className:"h-5 w-5"}),ae.jsx(Bd,{className:"text-lg",children:"Notifications"}),i>0&&ae.jsx(jp,{variant:"destructive",className:"text-xs",children:i})]}),ae.jsxs("div",{className:"flex items-center gap-2",children:[i>0&&ae.jsx(fl,{variant:"ghost",size:"sm",onClick:()=>{r(e=>e.map(e=>Y(G({},e),{read:!0})))},children:"Mark all read"}),ae.jsx(fl,{variant:"ghost",size:"sm",onClick:t,children:ae.jsx(ie,{className:"h-4 w-4"})})]})]}),ae.jsx(Wd,{className:"p-0",children:ae.jsx("div",{className:"max-h-96 overflow-y-auto",children:0===s.length?ae.jsxs("div",{className:"p-6 text-center text-gray-500",children:[ae.jsx(_e,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),ae.jsx("p",{children:"No notifications"})]}):ae.jsx("div",{className:"space-y-1",children:s.map(e=>ae.jsx("div",{className:`p-4 border-l-4 cursor-pointer hover:bg-gray-50 transition-colors ${a(e.type)} ${e.read?"bg-opacity-50":"bg-opacity-100"}`,onClick:()=>{return t=e.id,void r(e=>e.map(e=>e.id===t?Y(G({},e),{read:!0}):e));var t},children:ae.jsxs("div",{className:"flex items-start gap-3",children:[n(e.type),ae.jsxs("div",{className:"flex-1 min-w-0",children:[ae.jsxs("div",{className:"flex items-center justify-between mb-1",children:[ae.jsx("h4",{className:"text-sm font-medium "+(e.read?"text-gray-600":"text-gray-900"),children:e.title}),!e.read&&ae.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),ae.jsx("p",{className:"text-sm "+(e.read?"text-gray-500":"text-gray-700"),children:e.message}),ae.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o(e.timestamp)})]})]})},e.id))})})})]})]}):null}function hw({issue:e,isOpen:t,onClose:s,onStatusUpdate:r}){var n;if(!e)return null;return ae.jsx(Dd,{open:t,onOpenChange:s,children:ae.jsxs(Od,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[ae.jsx(Md,{children:ae.jsx("div",{className:"flex items-start justify-between",children:ae.jsxs("div",{className:"flex-1",children:[ae.jsx(Ld,{className:"text-xl mb-2",children:e.title}),ae.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ae.jsxs(jp,{className:(e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.priority||"medium"),children:[null==(n=e.priority)?void 0:n.toUpperCase()," PRIORITY"]}),ae.jsx(jp,{className:(e=>{switch(e){case"reported":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}})(e.status),children:e.status.replace("-"," ").toUpperCase()}),ae.jsx(jp,{variant:"outline",children:e.category})]})]})})}),ae.jsxs("div",{className:"space-y-6",children:[e.image&&ae.jsxs("div",{className:"relative",children:[ae.jsx("img",{src:e.image,alt:"Issue",className:"w-full h-64 object-cover rounded-lg"}),ae.jsxs("div",{className:"absolute top-2 right-2 bg-black/50 text-white px-2 py-1 rounded text-xs flex items-center",children:[ae.jsx(Ue,{className:"h-3 w-3 mr-1"}),"Photo Evidence"]})]}),ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ae.jsxs(Ud,{children:[ae.jsx(Vd,{className:"pb-3",children:ae.jsxs(Bd,{className:"text-sm flex items-center",children:[ae.jsx(oe,{className:"h-4 w-4 mr-2 text-blue-500"}),"Location"]})}),ae.jsx(Wd,{className:"pt-0",children:ae.jsx("p",{className:"text-sm",children:e.location})})]}),ae.jsxs(Ud,{children:[ae.jsx(Vd,{className:"pb-3",children:ae.jsxs(Bd,{className:"text-sm flex items-center",children:[ae.jsx(Ee,{className:"h-4 w-4 mr-2 text-green-500"}),"Reported"]})}),ae.jsxs(Wd,{className:"pt-0",children:[ae.jsx("p",{className:"text-sm",children:(a=e.created_at,new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),ae.jsx("p",{className:"text-xs text-gray-500",children:(e=>{const t=Math.floor((Date.now()-new Date(e).getTime())/864e5);return 0===t?"Today":1===t?"Yesterday":`${t} days ago`})(e.created_at)})]})]})]}),ae.jsxs(Ud,{children:[ae.jsx(Vd,{children:ae.jsx(Bd,{className:"text-sm",children:"Description"})}),ae.jsx(Wd,{children:ae.jsx("p",{className:"text-sm leading-relaxed",children:e.description})})]}),ae.jsxs(Ud,{children:[ae.jsx(Vd,{children:ae.jsx(Bd,{className:"text-sm",children:"Status Management"})}),ae.jsx(Wd,{children:ae.jsxs("div",{className:"flex items-center gap-4",children:[ae.jsxs("div",{className:"flex-1",children:[ae.jsx("label",{className:"text-xs font-medium text-gray-700 mb-2 block",children:"Current Status"}),r?ae.jsxs(zf,{value:e.status,onValueChange:t=>r(e.id,t),children:[ae.jsx(Vf,{children:ae.jsx(Uf,{})}),ae.jsxs(qf,{children:[ae.jsx(Kf,{value:"reported",children:"Reported"}),ae.jsx(Kf,{value:"in-progress",children:"In Progress"}),ae.jsx(Kf,{value:"resolved",children:"Resolved"}),ae.jsx(Kf,{value:"closed",children:"Closed"})]})]}):ae.jsx(jp,{className:"text-sm py-2 px-4",children:e.status.replace("_"," ").replace("-"," ").toUpperCase()})]}),r&&ae.jsxs("div",{className:"flex flex-col items-center",children:[ae.jsx(qe,{className:"h-8 w-8 text-gray-400 mb-1"}),ae.jsx("span",{className:"text-xs text-gray-500",children:"Auto-save"})]})]})})]}),ae.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[ae.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[ae.jsx(ue,{className:"h-4 w-4"}),ae.jsxs("span",{children:["Issue ID: ",e.id.slice(0,8)]})]}),ae.jsxs("div",{className:"flex gap-2",children:[ae.jsx(fl,{variant:"outline",onClick:s,children:"Close"}),ae.jsxs(fl,{children:[ae.jsx(Re,{className:"h-4 w-4 mr-2"}),"Add Comment"]})]})]})]})]})});var a}const pw=(e,t,s)=>{const r=[];return[...t.filter(e=>"resolved"!==e.status),...t.filter(e=>"resolved"===e.status)].forEach((t,n)=>{let a=0;for(let e=0;e<t.location.length;e++){a=(a<<5)-a+t.location.charCodeAt(e),a&=a}const i=40.7128+a%2e3/2e4*(a>0?1:-1),o=7*a%2e3/2e4*(a>0?1:-1)-74.006,l=t.priority||fw(t.category,t.created_at),c=Math.floor((Date.now()-new Date(t.created_at).getTime())/864e5),d=((e,t,s)=>{if("resolved"===t)return"#10B981";if("reported"===t||"in-progress"===t)switch(e){case"critical":return s>3?"#DC2626":"#EF4444";case"high":return s>5?"#EA580C":"#F97316";case"medium":return s>7?"#D97706":"#F59E0B";case"low":return s>14?"#F59E0B":"#FCD34D";default:return"#F59E0B"}return"#6B7280"})(l,t.status,c),u=((e,t,s)=>{if("resolved"===t)return 6;let r=8;switch(e){case"critical":r=14;break;case"high":r=12;break;case"medium":r=10;break;case"low":r=8}return s>7&&(r+=2),s>14&&(r+=2),Math.min(r,18)})(l,t.status,c),m=((e,t)=>t>14?"OVERDUE":t>7?"URGENT":"critical"===e?"CRITICAL":"high"===e?"HIGH":e.toUpperCase())(l,c),h="resolved"!==t.status&&("critical"===l||c>7),p=new google.maps.Marker({position:{lat:i,lng:o},map:e,title:`${m}: ${t.title}`,icon:{path:google.maps.SymbolPath.CIRCLE,fillColor:d,fillOpacity:"resolved"===t.status?.6:.9,strokeColor:"resolved"===t.status?"#ffffff":"#000000",strokeWeight:"resolved"===t.status?1:2,scale:u},animation:h?google.maps.Animation.BOUNCE:void 0,zIndex:"resolved"===t.status?1:"critical"===l?1e3:100}),f=new google.maps.InfoWindow({content:`\n        <div style="max-width: 280px; padding: 10px;">\n          <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">\n            <div style="width: 12px; height: 12px; border-radius: 50%; background: ${d};"></div>\n            <h3 style="margin: 0; font-size: 15px; font-weight: bold; color: #1f2937;">\n              ${t.title}\n            </h3>\n          </div>\n          \n          <p style="margin: 0 0 10px 0; font-size: 13px; color: #4b5563; line-height: 1.4;">\n            ${t.description.length>100?t.description.substring(0,100)+"...":t.description}\n          </p>\n          \n          <div style="display: flex; gap: 6px; margin-bottom: 8px; flex-wrap: wrap;">\n            <span style="background: ${d}; color: ${"resolved"===t.status?"#000":"#fff"}; padding: 2px 8px; border-radius: 10px; font-size: 11px; font-weight: bold;">\n              ${m}\n            </span>\n            <span style="background: #e5e7eb; color: #374151; padding: 2px 8px; border-radius: 10px; font-size: 11px;">\n              ${t.category}\n            </span>\n            <span style="background: ${"resolved"===t.status?"#10b981":"in-progress"===t.status?"#f59e0b":"#ef4444"}; color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px;">\n              ${t.status.replace("-"," ").toUpperCase()}\n            </span>\n          </div>\n          \n          <div style="font-size: 11px; color: #6b7280; line-height: 1.3;">\n            <div style="margin-bottom: 2px;"> ${t.location}</div>\n            <div style="margin-bottom: 2px;"> Reported: ${new Date(t.created_at).toLocaleDateString()}</div>\n            <div style="color: ${c>7?"#ef4444":"#6b7280"}; font-weight: ${c>7?"bold":"normal"};">\n               ${c} day${1!==c?"s":""} ago\n              ${c>14?" (OVERDUE!)":c>7?" (URGENT)":""}\n            </div>\n          </div>\n        </div>\n      `});p.addListener("click",()=>{f.open(e,p),s&&s(t)}),r.push(p)}),r},fw=(e,t)=>{let s={Safety:"critical",Water:"high",Electricity:"high",Infrastructure:"medium",Transportation:"medium",Trash:"low",Other:"low"}[e]||"medium";if(Math.floor((Date.now()-new Date(t).getTime())/864e5)>7){const e=["low","medium","high","critical"],t=e.indexOf(s);t<e.length-1&&(s=e[t+1])}return s},gw=({issues:e,onIssueSelect:t})=>{const s=wt.useRef(null),[r,n]=wt.useState(!0),[a,i]=wt.useState(null),[o,l]=wt.useState(new Date),[c,d]=wt.useState(null),[u,m]=wt.useState([]);return wt.useEffect(()=>{const r=()=>{try{if(!s.current)throw new Error("Map container not found");const r=new google.maps.Map(s.current,{center:{lat:40.7128,lng:-74.006},zoom:12,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),a=pw(r,e,t);m(a),n(!1),d(r)}catch(Aw){i("Failed to initialize map"),n(!1)}};(()=>{if(window.google&&window.google.maps)return void r();const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD7nJAmr4M4-qfzUQtubXAgWpc1P4ATh9E&libraries=places",e.async=!0,e.defer=!0,e.onload=()=>{r()},e.onerror=e=>{i("Failed to load Google Maps API"),n(!1)},document.head.appendChild(e)})()},[]),wt.useEffect(()=>{if(!c)return;u.forEach(e=>e.setMap(null));const s=pw(c,e,t);m(s),l(new Date)},[c,e,t]),wt.useEffect(()=>{const e=setInterval(()=>{l(new Date)},3e4);return()=>clearInterval(e)},[]),a?ae.jsx("div",{className:"h-96 flex items-center justify-center bg-red-50 rounded-lg border-2 border-red-200",children:ae.jsxs("div",{className:"text-center text-red-600",children:[ae.jsx(ct,{className:"h-12 w-12 mx-auto mb-4"}),ae.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Map Loading Error"}),ae.jsx("p",{className:"text-sm",children:a}),ae.jsx("p",{className:"text-xs mt-2 text-gray-600",children:"Check browser console for details"})]})}):ae.jsxs("div",{className:"relative",children:[r&&ae.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx(Le,{className:"h-8 w-8 animate-spin mx-auto mb-2 text-blue-600"}),ae.jsx("p",{className:"text-sm text-gray-600",children:"Loading map..."})]})}),ae.jsx("div",{ref:s,className:"w-full h-96 rounded-lg"}),ae.jsxs("div",{className:"absolute bottom-4 left-4 bg-white p-3 rounded-lg shadow-lg border max-w-xs",children:[ae.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Issue Urgency Tracker"}),ae.jsxs("div",{className:"space-y-1 text-xs",children:[ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-4 h-4 rounded-full bg-red-600 animate-pulse"}),ae.jsx("span",{className:"font-medium",children:"Critical/Overdue (14+ days)"})]}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-3 h-3 rounded-full bg-orange-600"}),ae.jsx("span",{children:"High Priority/Urgent (7+ days)"})]}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),ae.jsx("span",{children:"Medium Priority"})]}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-300"}),ae.jsx("span",{children:"Low Priority"})]}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),ae.jsx("span",{children:"Resolved"})]})]}),ae.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 text-xs text-gray-600",children:[ae.jsx("div",{children:" Bouncing = Critical/Overdue"}),ae.jsx("div",{children:" Larger = More urgent"})]})]}),ae.jsx("div",{className:"absolute top-4 right-4 bg-white p-3 rounded-lg shadow-lg border min-w-48",children:ae.jsxs("div",{className:"text-sm space-y-2",children:[ae.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[ae.jsx(oe,{className:"h-4 w-4 text-blue-600"}),ae.jsx("span",{children:"Live Issue Tracker"})]}),ae.jsxs("div",{className:"space-y-1 text-xs",children:[ae.jsxs("div",{className:"flex justify-between",children:[ae.jsxs("span",{className:"flex items-center gap-1",children:[ae.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Critical/Overdue:"]}),ae.jsx("span",{className:"font-bold text-red-600",children:e.filter(e=>{const t=Math.floor((Date.now()-new Date(e.created_at).getTime())/864e5),s=e.priority||fw(e.category,e.created_at);return"resolved"!==e.status&&("critical"===s||t>14)}).length})]}),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsxs("span",{className:"flex items-center gap-1",children:[ae.jsx("div",{className:"w-2 h-2 rounded-full bg-orange-500"}),"High/Urgent:"]}),ae.jsx("span",{className:"font-bold text-orange-600",children:e.filter(e=>{const t=Math.floor((Date.now()-new Date(e.created_at).getTime())/864e5),s=e.priority||fw(e.category,e.created_at);return"resolved"!==e.status&&"high"===s&&t<=14}).length})]}),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsxs("span",{className:"flex items-center gap-1",children:[ae.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Unresolved:"]}),ae.jsx("span",{className:"font-bold text-yellow-600",children:e.filter(e=>"resolved"!==e.status).length})]}),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsxs("span",{className:"flex items-center gap-1",children:[ae.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Resolved:"]}),ae.jsx("span",{className:"font-bold text-green-600",children:e.filter(e=>"resolved"===e.status).length})]})]}),ae.jsxs("div",{className:"pt-1 border-t border-gray-200 text-xs text-gray-500",children:["Last updated: ",o.toLocaleTimeString()]})]})})]})};function xw(){const e=_t(),{currentUser:t,logOut:s}=ol(),[r,n]=wt.useState([]),[a,i]=wt.useState({totalReports:0,pendingIssues:0,resolvedToday:0,inProgress:0,avgResponseTime:"0h",satisfactionRate:0}),[o,l]=wt.useState(!0),[c,d]=wt.useState("all"),[u,m]=wt.useState("all"),[h,p]=wt.useState(""),[f,g]=wt.useState(!1),[x,v]=wt.useState(null),[y,b]=wt.useState(!1),[w,j]=wt.useState(!1),[N,k]=wt.useState(null),[_,C]=wt.useState(!1),[S,E]=wt.useState({full_name:"",department:"",phone:"",bio:"",avatar_url:""}),[T,P]=wt.useState(0),[R,D]=wt.useState(0),[A,I]=wt.useState(!1),[O,M]=wt.useState(null),[F,L]=wt.useState(""),[$,z]=wt.useState(""),[U,V]=wt.useState(!1);wt.useEffect(()=>{W(),B();const e=setInterval(W,3e4),t=el.channel("new-issues").on("postgres_changes",{event:"INSERT",schema:"public",table:"issues"},e=>{if(e.new){const t=e.new;n(e=>[t,...e]),Qt({title:" New Issue Reported",description:`${t.title} - ${t.category}`}),X(t)}}).subscribe();return()=>{clearInterval(e),t.unsubscribe()}},[]);const B=()=>ne(this,null,function*(){if(t)try{const{data:e,error:s}=yield el.from("user_profiles").select("*").eq("id",t.id).single();if(s)throw s;"authority"!==(null==e?void 0:e.user_type)&&Qt({title:"Access Warning",description:"You may not have authority permissions to update issues",variant:"destructive"}),k(e),E({full_name:e.full_name||"",department:e.department||"",phone:e.phone||"",bio:e.bio||"",avatar_url:e.avatar_url||""});const{data:r,error:n}=yield el.from("issues").select("id").eq("assigned_to",t.id),{data:a,error:i}=yield el.from("issues").select("id").eq("assigned_to",t.id).eq("status","resolved");n||P((null==r?void 0:r.length)||0),i||D((null==a?void 0:a.length)||0)}catch(e){}}),W=()=>ne(this,null,function*(){try{l(!0);const[e,t]=yield Promise.all([ne(void 0,null,function*(){try{const{data:e,error:t}=yield el.from("issues").select("*");if(t)throw t;const s=(null==e?void 0:e.length)||0,r=(null==e?void 0:e.filter(e=>"reported"===e.status).length)||0,n=(null==e?void 0:e.filter(e=>"in-progress"===e.status).length)||0,a=(null==e?void 0:e.filter(e=>"resolved"===e.status).length)||0,i=(new Date).toISOString().split("T")[0];return{totalReports:s,pendingIssues:r,resolvedToday:(null==e?void 0:e.filter(e=>{var t;return"resolved"===e.status&&(null==(t=e.created_at)?void 0:t.startsWith(i))}).length)||Math.floor(.1*a),inProgress:n,avgResponseTime:"2.4h",satisfactionRate:87}}catch(e){throw e}}),ne(void 0,null,function*(){try{const{data:e,error:t}=yield el.from("issues").select("*").order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(e=>Y(G({},e),{priority:uw(e.category,e.created_at)}))}catch(e){throw e}})]);i(e),n(t)}catch(e){Qt({title:"Error",description:"Failed to load dashboard data",variant:"destructive"})}finally{l(!1)}}),q=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},K=e=>{switch(e){case"reported":return"bg-blue-100 text-blue-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Z=e=>{v(e),b(!0)},H=()=>{if(!(null==N?void 0:N.full_name))return"A";const e=N.full_name.split(" ");return 1===e.length?e[0].charAt(0).toUpperCase():(e[0].charAt(0)+e[e.length-1].charAt(0)).toUpperCase()},Q=e=>({Infrastructure:"Public Works",Water:"Water & Sewerage",Electricity:"Electricity",Transportation:"Transportation",Safety:"Police Department",Health:"Health Department",Environment:"Environmental Services",Parks:"Parks & Recreation",Building:"Building & Planning",Emergency:"Emergency Services",Trash:"Environmental Services"}[e]||"Public Works"),X=e=>ne(this,null,function*(){if(!t)return;if(["Safety","Water","Electricity"].includes(e.category))try{const s=Q(e.category),{error:r}=yield el.from("issues").update({status:"in-progress",assigned_to:t.id,department:s,assignment_notes:"Auto-assigned due to critical priority",assigned_at:(new Date).toISOString()}).eq("id",e.id);r||(Qt({title:"Critical Issue Auto-Assigned",description:`${e.title} assigned to ${s}`,variant:"default"}),W())}catch(s){}}),J=r.filter(e=>{const t="all"===c||e.status===c,s="all"===u||e.category===u,r=e.title.toLowerCase().includes(h.toLowerCase())||e.location.toLowerCase().includes(h.toLowerCase());return t&&s&&r});return o?ae.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),ae.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):ae.jsxs("div",{className:"min-h-screen bg-gray-50",children:[ae.jsx("header",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:ae.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:ae.jsxs("div",{className:"flex justify-between items-center py-4",children:[ae.jsxs("div",{className:"flex items-center",children:[ae.jsxs(fl,{variant:"ghost",onClick:()=>e("/"),className:"mr-4",children:[ae.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),ae.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Authority Dashboard"})]}),ae.jsxs("div",{className:"flex items-center space-x-4",children:[ae.jsxs(fl,{variant:"outline",size:"sm",onClick:()=>g(!0),children:[ae.jsx(_e,{className:"h-4 w-4 mr-2"}),"Notifications"]}),ae.jsxs(fl,{variant:"outline",size:"sm",children:[ae.jsx(mt,{className:"h-4 w-4 mr-2"}),"Export"]}),ae.jsxs(op,{children:[ae.jsx(lp,{asChild:!0,children:ae.jsxs(fl,{variant:"ghost",size:"sm",className:"gap-2",children:[ae.jsxs(cu,{className:"h-8 w-8",children:[ae.jsx(du,{src:(null==N?void 0:N.avatar_url)||void 0}),ae.jsx(uu,{children:H()})]}),ae.jsx("span",{className:"hidden sm:inline",children:(null==N?void 0:N.full_name)||"Authority User"})]})}),ae.jsxs(cp,{align:"end",className:"w-56",children:[ae.jsxs(dp,{onClick:()=>j(!0),children:[ae.jsx(ue,{className:"mr-2 h-4 w-4"}),ae.jsx("span",{children:"View Profile"})]}),ae.jsxs(dp,{onClick:()=>{j(!0),C(!0)},children:[ae.jsx(et,{className:"mr-2 h-4 w-4"}),ae.jsx("span",{children:"Edit Profile"})]}),ae.jsx(up,{}),ae.jsxs(dp,{onClick:()=>ne(this,null,function*(){try{yield s(),e("/")}catch(t){}}),children:[ae.jsx(Ce,{className:"mr-2 h-4 w-4"}),ae.jsx("span",{children:"Sign out"})]})]})]})]})]})})}),ae.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[ae.jsxs(Ud,{children:[ae.jsxs(Vd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[ae.jsx(Bd,{className:"text-sm font-medium",children:"Total Reports"}),ae.jsx(ht,{className:"h-4 w-4 text-muted-foreground"})]}),ae.jsxs(Wd,{children:[ae.jsx("div",{className:"text-2xl font-bold",children:a.totalReports}),ae.jsxs("p",{className:"text-xs text-muted-foreground flex items-center",children:[ae.jsx(Ae,{className:"h-3 w-3 mr-1 text-green-500"}),"+12% from last month"]})]})]}),ae.jsxs(Ud,{children:[ae.jsxs(Vd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[ae.jsx(Bd,{className:"text-sm font-medium",children:"Pending Issues"}),ae.jsx(ct,{className:"h-4 w-4 text-orange-500"})]}),ae.jsxs(Wd,{children:[ae.jsx("div",{className:"text-2xl font-bold",children:a.pendingIssues}),ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires immediate attention"})]})]}),ae.jsxs(Ud,{children:[ae.jsxs(Vd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[ae.jsx(Bd,{className:"text-sm font-medium",children:"In Progress"}),ae.jsx(pt,{className:"h-4 w-4 text-blue-500"})]}),ae.jsxs(Wd,{children:[ae.jsx("div",{className:"text-2xl font-bold",children:a.inProgress}),ae.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently being addressed"})]})]}),ae.jsxs(Ud,{children:[ae.jsxs(Vd,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[ae.jsx(Bd,{className:"text-sm font-medium",children:"Resolved Today"}),ae.jsx(le,{className:"h-4 w-4 text-green-500"})]}),ae.jsxs(Wd,{children:[ae.jsx("div",{className:"text-2xl font-bold",children:a.resolvedToday}),ae.jsxs("p",{className:"text-xs text-muted-foreground flex items-center",children:[ae.jsx(Ae,{className:"h-3 w-3 mr-1 text-green-500"}),"+8% from yesterday"]})]})]})]}),ae.jsxs(ow,{defaultValue:"issues",className:"space-y-6",children:[ae.jsxs(lw,{className:"grid w-full grid-cols-4",children:[ae.jsx(cw,{value:"issues",children:"Issue Management"}),ae.jsx(cw,{value:"analytics",children:"Analytics"}),ae.jsx(cw,{value:"map",children:"Issue Map"}),ae.jsx(cw,{value:"reports",children:"Reports"})]}),ae.jsx(dw,{value:"issues",className:"space-y-6",children:ae.jsxs(Ud,{children:[ae.jsx(Vd,{children:ae.jsx(Bd,{className:"text-lg",children:"Issue Management"})}),ae.jsxs(Wd,{children:[ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[ae.jsx("div",{className:"flex-1",children:ae.jsxs("div",{className:"relative",children:[ae.jsx(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),ae.jsx(Yf,{placeholder:"Search issues...",value:h,onChange:e=>p(e.target.value),className:"pl-10"})]})}),ae.jsxs(zf,{value:c,onValueChange:d,children:[ae.jsx(Vf,{className:"w-[180px]",children:ae.jsx(Uf,{placeholder:"Filter by status"})}),ae.jsxs(qf,{children:[ae.jsx(Kf,{value:"all",children:"All Status"}),ae.jsx(Kf,{value:"reported",children:"Reported"}),ae.jsx(Kf,{value:"in-progress",children:"In Progress"}),ae.jsx(Kf,{value:"resolved",children:"Resolved"})]})]}),ae.jsxs(zf,{value:u,onValueChange:m,children:[ae.jsx(Vf,{className:"w-[180px]",children:ae.jsx(Uf,{placeholder:"Filter by category"})}),ae.jsxs(qf,{children:[ae.jsx(Kf,{value:"all",children:"All Categories"}),ae.jsx(Kf,{value:"Infrastructure",children:"Infrastructure"}),ae.jsx(Kf,{value:"Water",children:"Water"}),ae.jsx(Kf,{value:"Electricity",children:"Electricity"}),ae.jsx(Kf,{value:"Safety",children:"Safety"}),ae.jsx(Kf,{value:"Transportation",children:"Transportation"}),ae.jsx(Kf,{value:"Trash",children:"Trash"})]})]})]}),ae.jsx("div",{className:"space-y-4",children:0===J.length?ae.jsxs("div",{className:"text-center py-12 text-gray-500",children:[ae.jsx(we,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),ae.jsx("p",{children:"No issues found matching your criteria"})]}):J.map(e=>{var t;return ae.jsx(Ud,{className:"hover:shadow-md transition-shadow",children:ae.jsx(Wd,{className:"p-6",children:ae.jsxs("div",{className:"flex items-start justify-between",children:[ae.jsxs("div",{className:"flex-1",children:[ae.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[ae.jsx("h3",{className:"font-semibold text-lg",children:e.title}),ae.jsx(jp,{className:q(e.priority||"medium"),children:null==(t=e.priority)?void 0:t.toUpperCase()}),ae.jsx(jp,{className:K(e.status),children:e.status.replace("-"," ").toUpperCase()})]}),ae.jsx("p",{className:"text-gray-600 mb-3 line-clamp-2",children:e.description}),ae.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[ae.jsxs("div",{className:"flex items-center",children:[ae.jsx(oe,{className:"h-4 w-4 mr-1"}),e.location]}),ae.jsxs("div",{className:"flex items-center",children:[ae.jsx(Ee,{className:"h-4 w-4 mr-1"}),new Date(e.created_at).toLocaleDateString()]}),ae.jsx(jp,{variant:"outline",children:e.category})]})]}),ae.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[ae.jsx(jp,{className:K(e.status),children:e.status.replace("_"," ").replace("-"," ").toUpperCase()}),ae.jsxs(fl,{variant:"outline",size:"sm",onClick:()=>Z(e),children:[ae.jsx(ze,{className:"h-4 w-4 mr-1"}),"View"]}),"reported"===e.status&&ae.jsxs(fl,{variant:"default",size:"sm",onClick:()=>(e=>{M(e),L(""),z(""),I(!0)})(e),className:"bg-blue-600 hover:bg-blue-700",children:[ae.jsx(ot,{className:"h-4 w-4 mr-1"}),"Assign Work"]})]})]})})},e.id)})})]})]})}),ae.jsx(dw,{value:"analytics",className:"space-y-6",children:ae.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[ae.jsxs(Ud,{children:[ae.jsx(Vd,{children:ae.jsx(Bd,{children:"Performance Metrics"})}),ae.jsxs(Wd,{className:"space-y-4",children:[ae.jsxs("div",{className:"flex justify-between items-center",children:[ae.jsx("span",{className:"text-sm font-medium",children:"Average Response Time"}),ae.jsx("span",{className:"text-2xl font-bold text-blue-600",children:a.avgResponseTime})]}),ae.jsxs("div",{className:"flex justify-between items-center",children:[ae.jsx("span",{className:"text-sm font-medium",children:"Satisfaction Rate"}),ae.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[a.satisfactionRate,"%"]})]}),ae.jsxs("div",{className:"flex justify-between items-center",children:[ae.jsx("span",{className:"text-sm font-medium",children:"Resolution Rate"}),ae.jsx("span",{className:"text-2xl font-bold text-purple-600",children:"78%"})]})]})]}),ae.jsxs(Ud,{children:[ae.jsx(Vd,{children:ae.jsx(Bd,{children:"Category Breakdown"})}),ae.jsx(Wd,{children:ae.jsx("div",{className:"space-y-3",children:["Infrastructure","Water","Safety","Transportation","Other"].map((e,t)=>ae.jsxs("div",{className:"flex items-center justify-between",children:[ae.jsx("span",{className:"text-sm",children:e}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:ae.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.max(20,80-15*t)}%`}})}),ae.jsx("span",{className:"text-sm font-medium",children:Math.max(5,25-4*t)})]})]},e))})})]})]})}),ae.jsx(dw,{value:"map",className:"space-y-6",children:ae.jsxs(Ud,{children:[ae.jsxs(Vd,{children:[ae.jsxs(Bd,{className:"flex items-center",children:[ae.jsx(oe,{className:"h-5 w-5 mr-2 text-blue-500"}),"Interactive Issue Map"]}),ae.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Real-time visualization of all reported issues with priority-based color coding"})]}),ae.jsx(Wd,{children:ae.jsx(gw,{issues:J,onIssueSelect:Z})})]})}),ae.jsx(dw,{value:"reports",className:"space-y-6",children:ae.jsxs(Ud,{children:[ae.jsx(Vd,{children:ae.jsxs(Bd,{className:"flex items-center",children:[ae.jsx(we,{className:"h-5 w-5 mr-2 text-green-500"}),"Generate Reports"]})}),ae.jsx(Wd,{children:ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[ae.jsxs("div",{className:"space-y-4",children:[ae.jsx("h3",{className:"font-semibold",children:"Available Reports"}),ae.jsxs("div",{className:"space-y-2",children:[ae.jsxs(fl,{variant:"outline",className:"w-full justify-start",children:[ae.jsx(ht,{className:"h-4 w-4 mr-2"}),"Monthly Performance Report"]}),ae.jsxs(fl,{variant:"outline",className:"w-full justify-start",children:[ae.jsx(Ae,{className:"h-4 w-4 mr-2"}),"Issue Trends Analysis"]}),ae.jsxs(fl,{variant:"outline",className:"w-full justify-start",children:[ae.jsx(ve,{className:"h-4 w-4 mr-2"}),"Department Performance"]}),ae.jsxs(fl,{variant:"outline",className:"w-full justify-start",children:[ae.jsx(oe,{className:"h-4 w-4 mr-2"}),"Geographic Distribution"]})]})]}),ae.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[ae.jsx("h4",{className:"font-medium mb-4",children:"Quick Stats"}),ae.jsxs("div",{className:"space-y-3 text-sm",children:[ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx("span",{children:"This Month's Reports:"}),ae.jsx("span",{className:"font-semibold",children:a.totalReports})]}),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx("span",{children:"Resolution Rate:"}),ae.jsx("span",{className:"font-semibold text-green-600",children:"78%"})]}),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx("span",{children:"Avg. Response Time:"}),ae.jsx("span",{className:"font-semibold",children:a.avgResponseTime})]}),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx("span",{children:"Citizen Satisfaction:"}),ae.jsxs("span",{className:"font-semibold text-blue-600",children:[a.satisfactionRate,"%"]})]})]})]})]})})]})})]})]}),ae.jsx(mw,{isOpen:f,onClose:()=>g(!1)}),ae.jsx(hw,{issue:x,isOpen:y,onClose:()=>{b(!1),v(null)}}),ae.jsx(Dd,{open:w,onOpenChange:j,children:ae.jsxs(Od,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[ae.jsx(Md,{children:ae.jsx(Ld,{className:"text-2xl font-bold",children:_?"Edit Profile":"Authority Profile"})}),ae.jsxs("div",{className:"space-y-6",children:[ae.jsxs("div",{className:"flex items-center space-x-6",children:[ae.jsxs("div",{className:"relative",children:[ae.jsxs(cu,{className:"h-24 w-24",children:[ae.jsx(du,{src:S.avatar_url||(null==N?void 0:N.avatar_url)}),ae.jsx(uu,{className:"text-2xl",children:H()})]}),_&&ae.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer",children:ae.jsxs("label",{className:"cursor-pointer",children:[ae.jsx(et,{className:"h-6 w-6 text-white"}),ae.jsx("input",{type:"file",accept:"image/*",onChange:e=>ne(this,null,function*(){var s;const r=null==(s=e.target.files)?void 0:s[0];if(r&&t)try{const e=r.name.split(".").pop(),s=`avatars/${`${t.id}-${Math.random()}.${e}`}`,{error:n}=yield el.storage.from("user-uploads").upload(s,r);if(n)throw n;const{data:{publicUrl:a}}=el.storage.from("user-uploads").getPublicUrl(s);E(e=>Y(G({},e),{avatar_url:a})),Qt({title:"Image Uploaded",description:"Profile image uploaded successfully"})}catch(n){Qt({title:"Upload Error",description:"Failed to upload image",variant:"destructive"})}}),className:"hidden"})]})})]}),ae.jsxs("div",{className:"flex-1",children:[ae.jsx("h3",{className:"text-xl font-semibold",children:(null==N?void 0:N.full_name)||"Authority User"}),ae.jsx("p",{className:"text-gray-600",children:(null==N?void 0:N.department)||"Department not specified"}),ae.jsxs("p",{className:"text-sm text-gray-500",children:["Joined ",new Date(null==N?void 0:N.created_at).toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]})]}),ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ae.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[ae.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T}),ae.jsx("div",{className:"text-sm text-blue-800",children:"Tasks Assigned"})]}),ae.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[ae.jsx("div",{className:"text-2xl font-bold text-green-600",children:R}),ae.jsx("div",{className:"text-sm text-green-800",children:"Tasks Solved"})]})]}),_?ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{children:[ae.jsx(Sy,{htmlFor:"full_name",children:"Full Name"}),ae.jsx(Yf,{id:"full_name",value:S.full_name,onChange:e=>E(t=>Y(G({},t),{full_name:e.target.value})),placeholder:"Enter your full name"})]}),ae.jsxs("div",{children:[ae.jsx(Sy,{htmlFor:"department",children:"Department"}),ae.jsx(Yf,{id:"department",value:S.department,onChange:e=>E(t=>Y(G({},t),{department:e.target.value})),placeholder:"Enter your department"})]}),ae.jsxs("div",{children:[ae.jsx(Sy,{htmlFor:"phone",children:"Phone Number"}),ae.jsx(Yf,{id:"phone",value:S.phone,onChange:e=>E(t=>Y(G({},t),{phone:e.target.value})),placeholder:"Enter your phone number"})]}),ae.jsxs("div",{children:[ae.jsx(Sy,{htmlFor:"bio",children:"Bio"}),ae.jsx(Np,{id:"bio",value:S.bio,onChange:e=>E(t=>Y(G({},t),{bio:e.target.value})),placeholder:"Tell us about yourself and your role",rows:3})]}),ae.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[ae.jsx(fl,{variant:"outline",onClick:()=>{C(!1),E({full_name:(null==N?void 0:N.full_name)||"",department:(null==N?void 0:N.department)||"",phone:(null==N?void 0:N.phone)||"",bio:(null==N?void 0:N.bio)||"",avatar_url:(null==N?void 0:N.avatar_url)||""})},children:"Cancel"}),ae.jsx(fl,{onClick:()=>ne(this,null,function*(){if(t)try{const{error:e}=yield el.from("user_profiles").update({full_name:S.full_name,department:S.department,phone:S.phone,bio:S.bio,avatar_url:S.avatar_url,updated_at:(new Date).toISOString()}).eq("id",t.id);if(e)throw e;Qt({title:"Profile Updated",description:"Your profile has been updated successfully"}),C(!1),B()}catch(e){Qt({title:"Error",description:"Failed to update profile",variant:"destructive"})}}),children:"Save Changes"})]})]}):ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{children:[ae.jsx(Sy,{className:"text-sm font-medium text-gray-700",children:"Email"}),ae.jsx("p",{className:"text-gray-900",children:null==t?void 0:t.email})]}),ae.jsxs("div",{children:[ae.jsx(Sy,{className:"text-sm font-medium text-gray-700",children:"Phone"}),ae.jsx("p",{className:"text-gray-900",children:(null==N?void 0:N.phone)||"Not provided"})]}),ae.jsxs("div",{children:[ae.jsx(Sy,{className:"text-sm font-medium text-gray-700",children:"Bio"}),ae.jsx("p",{className:"text-gray-900",children:(null==N?void 0:N.bio)||"No bio provided"})]}),ae.jsx("div",{className:"flex justify-end pt-4",children:ae.jsxs(fl,{onClick:()=>C(!0),children:[ae.jsx(et,{className:"h-4 w-4 mr-2"}),"Edit Profile"]})})]})]})]})}),ae.jsx(Dd,{open:A,onOpenChange:I,children:ae.jsxs(Od,{className:"max-w-2xl",children:[ae.jsx(Md,{children:ae.jsx(Ld,{className:"text-xl font-bold",children:"Assign Work to Department"})}),O&&ae.jsxs("div",{className:"space-y-6",children:[ae.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[ae.jsx("h3",{className:"font-semibold text-lg mb-2",children:O.title}),ae.jsx("p",{className:"text-gray-600 mb-2",children:O.description}),ae.jsxs("div",{className:"flex gap-2 text-sm",children:[ae.jsx(jp,{variant:"outline",children:O.category}),ae.jsxs(jp,{variant:"outline",children:[" ",O.location]}),ae.jsxs(jp,{variant:"outline",children:[" ",new Date(O.created_at).toLocaleDateString()]})]})]}),ae.jsxs("div",{children:[ae.jsx(Sy,{htmlFor:"department",className:"text-sm font-medium mb-2 block",children:"Assign to Department *"}),ae.jsxs(zf,{value:F,onValueChange:e=>{if(L(e),!F){const e=Q(O.category);L(e)}},children:[ae.jsx(Vf,{children:ae.jsx(Uf,{placeholder:`Recommended: ${Q(O.category)}`})}),ae.jsx(qf,{children:["Public Works","Transportation","Water & Sewerage","Electricity","Health Department","Environmental Services","Parks & Recreation","Building & Planning","Police Department","Fire Department","Emergency Services"].map(e=>ae.jsxs(Kf,{value:e,children:[e,e===Q(O.category)&&ae.jsx("span",{className:"ml-2 text-xs text-blue-600",children:"(Recommended)"})]},e))})]})]}),ae.jsxs("div",{children:[ae.jsx(Sy,{htmlFor:"notes",className:"text-sm font-medium mb-2 block",children:"Assignment Notes (Optional)"}),ae.jsx(Np,{id:"notes",value:$,onChange:e=>z(e.target.value),placeholder:"Add any specific instructions or priority notes for the assigned department...",rows:3})]}),ae.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:ae.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[ae.jsx(ct,{className:"h-4 w-4 text-blue-600"}),ae.jsx("span",{className:"font-medium",children:"Assignment Priority:"}),ae.jsx(jp,{className:""+("Safety"===O.category?"bg-red-100 text-red-800":"Water"===O.category||"Electricity"===O.category?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"),children:"Safety"===O.category?"CRITICAL":"Water"===O.category||"Electricity"===O.category?"HIGH":"MEDIUM"})]})}),ae.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[ae.jsx(fl,{variant:"outline",onClick:()=>{I(!1),M(null),L(""),z("")},disabled:U,children:"Cancel"}),ae.jsx(fl,{onClick:()=>ne(this,null,function*(){if(O&&F&&t){V(!0);try{const{error:e}=yield el.from("issues").update({status:"in-progress",assigned_to:t.id,department:F,assignment_notes:$,assigned_at:(new Date).toISOString()}).eq("id",O.id);if(e)throw e;n(e=>e.map(e=>e.id===O.id?Y(G({},e),{status:"in-progress",assigned_to:t.id,department:F}):e)),Qt({title:"Work Assigned Successfully",description:`Issue assigned to ${F} department`}),I(!1),M(null),L(""),z(""),W()}catch(e){Qt({title:"Assignment Failed",description:e.message||"Failed to assign work to department",variant:"destructive"})}finally{V(!1)}}}),disabled:!F||U,className:"bg-blue-600 hover:bg-blue-700",children:U?ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Assigning..."]}):ae.jsxs("span",{className:"flex items-center gap-2",children:[ae.jsx(Ge,{className:"h-4 w-4"}),"Assign Work"]})})]})]})]})})]})}function vw(){const e=_t();return wt.useEffect(()=>{(()=>{ne(this,null,function*(){var t,s,r;try{const{data:n,error:a}=yield el.auth.getSession();if(a)return Qt({title:"Authentication failed",description:a.message,variant:"destructive"}),void e("/");if(n.session){const{data:a,error:i}=yield el.from("user_profiles").select("*").eq("id",n.session.user.id).single();if(i&&"PGRST116"===i.code){const{error:e}=yield el.from("user_profiles").insert([{id:n.session.user.id,email:n.session.user.email,full_name:(null==(t=n.session.user.user_metadata)?void 0:t.full_name)||(null==(s=n.session.user.user_metadata)?void 0:s.name),avatar_url:null==(r=n.session.user.user_metadata)?void 0:r.avatar_url,created_at:(new Date).toISOString(),is_onboarding_complete:!1}])}Qt({title:"Welcome!",description:"You've successfully signed in with Google."});const o=sessionStorage.getItem("auth_redirect_to");sessionStorage.removeItem("auth_redirect_to"),e(o||"/dashboard")}else e("/")}catch(n){e("/")}})})()},[e]),ae.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-primary border-t-transparent mx-auto mb-4"}),ae.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Completing sign in..."}),ae.jsx("p",{className:"text-gray-600",children:"Please wait while we finish setting up your account."})]})})}const yw=()=>{const e=_t(),[t,s]=wt.useState({email:"",password:""}),[r,n]=wt.useState(!1),[a,i]=wt.useState("");return ae.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:[ae.jsx("div",{className:"fixed top-0 left-0 right-0 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-center py-2 px-4 text-sm font-medium z-50 shadow-lg",children:" DEMO MODE: Onboarding skipped  All issues visible  Any account can login"}),ae.jsxs("div",{className:"w-full max-w-md mt-12",children:[ae.jsxs("div",{className:"text-center mb-8",children:[ae.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-full mb-4",children:ae.jsx(me,{className:"w-8 h-8 text-white"})}),ae.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Nagarsetu"}),ae.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Official's Portal"})]}),ae.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:ae.jsxs("form",{onSubmit:s=>ne(void 0,null,function*(){s.preventDefault(),i(""),n(!0);try{const{data:s,error:r}=yield el.auth.signInWithPassword({email:t.email,password:t.password});if(r)throw r;const{data:n,error:a}=yield el.from("user_profiles").select("*").eq("id",s.user.id).single();if(a)throw a;e("/official/dashboard")}catch(Aw){i(Aw.message||"Invalid credentials. Please try again.")}finally{n(!1)}}),className:"space-y-6",children:[ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email ID / Employee ID"}),ae.jsxs("div",{className:"relative",children:[ae.jsx(he,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),ae.jsx("input",{id:"email",type:"email",required:!0,value:t.email,onChange:e=>s(Y(G({},t),{email:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"official@municipality.gov"})]})]}),ae.jsxs("div",{children:[ae.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),ae.jsxs("div",{className:"relative",children:[ae.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),ae.jsx("input",{id:"password",type:"password",required:!0,value:t.password,onChange:e=>s(Y(G({},t),{password:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:""})]})]}),a&&ae.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[ae.jsx(ce,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),ae.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:a})]}),ae.jsx("div",{className:"text-right",children:ae.jsx("button",{type:"button",className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",onClick:()=>e("/official/forgot-password"),children:"Forgot Password?"})}),ae.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Signing in...":"Login"})]})}),ae.jsx("div",{className:"mt-6 p-4 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded-lg",children:ae.jsxs("p",{className:"text-xs text-center text-purple-800 dark:text-purple-300",children:[ae.jsx("strong",{children:" Demo Mode:"})," Login with any account to see the worker dashboard. Profile setup is skipped and all issues are visible for demonstration purposes."]})})]})]})},bw=()=>{const e=_t(),[t,s]=wt.useState(!1),[r,n]=wt.useState(""),[a,i]=wt.useState({full_name:"",employee_id:"",department:"",phone:"",address:""});return ae.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:ae.jsxs("div",{className:"w-full max-w-2xl",children:[ae.jsxs("div",{className:"text-center mb-8",children:[ae.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-full mb-4",children:ae.jsx(ue,{className:"w-8 h-8 text-white"})}),ae.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Complete Your Worker Profile"}),ae.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please provide your details to get started"})]}),ae.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:ae.jsxs("form",{onSubmit:t=>ne(void 0,null,function*(){var r,i;t.preventDefault(),n(""),s(!0);try{const{data:{user:t}}=yield el.auth.getUser();if(!t)throw new Error("Not authenticated");const{error:s}=yield el.from("user_profiles").update({full_name:a.full_name,employee_id:a.employee_id,department:a.department,phone:a.phone,address:a.address,user_type:"official",is_onboarding_complete:!0,updated_at:(new Date).toISOString()}).eq("id",t.id);if(s){if((null==(r=s.message)?void 0:r.includes("schema cache"))||(null==(i=s.message)?void 0:i.includes("column")))throw new Error("Database schema not updated. Please run the migration script first. See QUICK_FIX.md for instructions.");throw s}e("/official/dashboard")}catch(Aw){n(Aw.message||"Failed to complete profile setup")}finally{s(!1)}}),className:"space-y-6",children:[ae.jsxs("div",{children:[ae.jsxs("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Full Name ",ae.jsx("span",{className:"text-red-500",children:"*"})]}),ae.jsxs("div",{className:"relative",children:[ae.jsx(ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),ae.jsx("input",{id:"full_name",type:"text",required:!0,value:a.full_name,onChange:e=>i(Y(G({},a),{full_name:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Enter your full name"})]})]}),ae.jsxs("div",{children:[ae.jsxs("label",{htmlFor:"employee_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Employee ID ",ae.jsx("span",{className:"text-red-500",children:"*"})]}),ae.jsxs("div",{className:"relative",children:[ae.jsx(ft,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),ae.jsx("input",{id:"employee_id",type:"text",required:!0,value:a.employee_id,onChange:e=>i(Y(G({},a),{employee_id:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"e.g., EMP-001"})]})]}),ae.jsxs("div",{children:[ae.jsxs("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Department ",ae.jsx("span",{className:"text-red-500",children:"*"})]}),ae.jsxs("div",{className:"relative",children:[ae.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),ae.jsxs("select",{id:"department",required:!0,value:a.department,onChange:e=>i(Y(G({},a),{department:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white appearance-none",children:[ae.jsx("option",{value:"",children:"Select your department"}),["Public Works - Pothole Division","Public Works - Road Maintenance","Water Supply Department","Electrical Department","Sanitation Department","Drainage Department","Parks & Recreation","Street Lighting","Waste Management","Other"].map(e=>ae.jsx("option",{value:e,children:e},e))]})]})]}),ae.jsxs("div",{children:[ae.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Phone Number ",ae.jsx("span",{className:"text-red-500",children:"*"})]}),ae.jsxs("div",{className:"relative",children:[ae.jsx(tt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),ae.jsx("input",{id:"phone",type:"tel",required:!0,value:a.phone,onChange:e=>i(Y(G({},a),{phone:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"Enter your phone number"})]})]}),ae.jsxs("div",{children:[ae.jsxs("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Address ",ae.jsx("span",{className:"text-red-500",children:"*"})]}),ae.jsxs("div",{className:"relative",children:[ae.jsx(oe,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),ae.jsx("textarea",{id:"address",required:!0,value:a.address,onChange:e=>i(Y(G({},a),{address:e.target.value})),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-none",rows:3,placeholder:"Enter your address"})]})]}),r&&ae.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:ae.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:r})}),ae.jsx("button",{type:"submit",disabled:t,className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:t?ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Saving..."]}):ae.jsxs(ae.Fragment,{children:[ae.jsx(Xe,{className:"w-5 h-5"}),"Complete Profile"]})})]})}),ae.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:ae.jsxs("p",{className:"text-sm text-center text-blue-800 dark:text-blue-300",children:[ae.jsx("strong",{children:"Note:"})," This information will be used to assign work to you and for communication purposes."]})})]})})},ww=()=>{const e=_t(),[t,s]=wt.useState(null),[r,n]=wt.useState({new_assigned:0,in_progress:0,pending_approval:0,critical_count:0,total_assigned:0}),[a,i]=wt.useState([]),[o,l]=wt.useState([]),[c,d]=wt.useState(!0),[u,m]=wt.useState("all"),[h,p]=wt.useState("newest");wt.useEffect(()=>{f(),g()},[]),wt.useEffect(()=>{x()},[a,u,h]);const f=()=>ne(void 0,null,function*(){try{const{data:{user:t}}=yield el.auth.getUser();if(!t)return void e("/official/login");const{data:r}=yield el.from("user_profiles").select("*").eq("id",t.id).single();s(r);const{data:a}=yield el.from("issues").select("*").order("created_at",{ascending:!1});if(a){i(a);const e={new_assigned:a.filter(e=>"assigned"===e.status||"reported"===e.status).length,in_progress:a.filter(e=>"in_progress"===e.status).length,pending_approval:a.filter(e=>"pending_approval"===e.status).length,critical_count:a.filter(e=>"critical"===e.urgency).length,total_assigned:a.length};n(e)}}catch(t){}finally{d(!1)}}),g=()=>{const e=el.channel("official-tasks").on("postgres_changes",{event:"*",schema:"public",table:"issues"},()=>{f()}).subscribe();return()=>{e.unsubscribe()}},x=()=>{let e=[...a];"all"!==u&&(e=e.filter(e=>e.status===u)),e.sort((e,t)=>{if("newest"===h)return new Date(t.created_at).getTime()-new Date(e.created_at).getTime();if("oldest"===h)return new Date(e.created_at).getTime()-new Date(t.created_at).getTime();if("priority"===h){const s={critical:0,high:1,medium:2,low:3};return(s[e.urgency||"low"]||3)-(s[t.urgency||"low"]||3)}return 0}),l(e)},v=e=>{switch(e){case"critical":return"text-red-600 bg-red-100 dark:bg-red-900/20";case"high":return"text-orange-600 bg-orange-100 dark:bg-orange-900/20";case"medium":return"text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20";default:return"text-blue-600 bg-blue-100 dark:bg-blue-900/20"}},y=e=>"critical"===e||"high"===e?"":"",b=e=>{const t=new Date(e),s=(new Date).getTime()-t.getTime(),r=Math.floor(s/6e4),n=Math.floor(s/36e5),a=Math.floor(s/864e5);return r<60?`${r} min ago`:n<24?`${n} hour${n>1?"s":""} ago`:0===a?"Today":1===a?"Yesterday":t.toLocaleDateString()};return c?ae.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),ae.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading dashboard..."})]})}):ae.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[ae.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white text-center py-3 px-4 text-sm font-medium shadow-lg",children:" DEMO MODE: Showing ALL issues from the system (not filtered by department or assignment)"}),ae.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:ae.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:ae.jsxs("div",{className:"flex items-center justify-between",children:[ae.jsxs("div",{children:[ae.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Welcome, ",null==t?void 0:t.full_name]}),ae.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[null==t?void 0:t.department," ",(null==t?void 0:t.employee_id)&&` ${t.employee_id}`]})]}),ae.jsxs("div",{className:"flex items-center gap-4",children:[ae.jsx("button",{onClick:()=>e("/official/profile"),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:ae.jsx(ue,{className:"w-6 h-6 text-gray-600 dark:text-gray-400"})}),ae.jsxs("button",{onClick:()=>ne(void 0,null,function*(){yield el.auth.signOut(),e("/official/login")}),className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[ae.jsx(Ce,{className:"w-4 h-4"}),ae.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]})]})})}),ae.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[ae.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[ae.jsxs("button",{onClick:()=>m("assigned"===u?"all":"assigned"),className:"p-6 rounded-xl shadow-sm transition-all "+("assigned"===u?"bg-blue-600 text-white ring-4 ring-blue-200":"bg-white dark:bg-gray-800 hover:shadow-md"),children:[ae.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ae.jsx(xt,{className:"w-8 h-8"}),ae.jsx("span",{className:"text-3xl font-bold",children:r.new_assigned})]}),ae.jsx("p",{className:"text-sm font-medium",children:"NEW ASSIGNED"})]}),ae.jsxs("button",{onClick:()=>m("in_progress"===u?"all":"in_progress"),className:"p-6 rounded-xl shadow-sm transition-all "+("in_progress"===u?"bg-yellow-600 text-white ring-4 ring-yellow-200":"bg-white dark:bg-gray-800 hover:shadow-md"),children:[ae.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ae.jsx(qe,{className:"w-8 h-8"}),ae.jsx("span",{className:"text-3xl font-bold",children:r.in_progress})]}),ae.jsx("p",{className:"text-sm font-medium",children:"IN-PROGRESS"})]}),ae.jsxs("button",{onClick:()=>m("pending_approval"===u?"all":"pending_approval"),className:"p-6 rounded-xl shadow-sm transition-all "+("pending_approval"===u?"bg-green-600 text-white ring-4 ring-green-200":"bg-white dark:bg-gray-800 hover:shadow-md"),children:[ae.jsxs("div",{className:"flex items-center justify-between mb-2",children:[ae.jsx(le,{className:"w-8 h-8"}),ae.jsx("span",{className:"text-3xl font-bold",children:r.pending_approval})]}),ae.jsx("p",{className:"text-sm font-medium",children:"PENDING ADMIN APPROVAL"})]})]}),ae.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4 mb-6",children:ae.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx(Ze,{className:"w-5 h-5 text-gray-500"}),ae.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Showing: ","all"===u?"All Tasks":u.replace("_"," ").toUpperCase()]}),"all"!==u&&ae.jsx("button",{onClick:()=>m("all"),className:"text-xs text-blue-600 hover:text-blue-700",children:"Clear"})]}),ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx(vt,{className:"w-5 h-5 text-gray-500"}),ae.jsxs("select",{value:h,onChange:e=>p(e.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-1.5 dark:bg-gray-700 dark:text-white",children:[ae.jsx("option",{value:"newest",children:"Newest First"}),ae.jsx("option",{value:"oldest",children:"Oldest First"}),ae.jsx("option",{value:"priority",children:"Priority"})]})]})]})}),ae.jsx("div",{className:"space-y-4",children:0===o.length?ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-12 text-center",children:[ae.jsx(xt,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),ae.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No tasks found"}),ae.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"all"===u?"You have no assigned tasks at the moment.":`No tasks with status: ${u.replace("_"," ")}`})]}):o.map(t=>{var s;return ae.jsxs("button",{onClick:()=>e(`/official/issue/${t.id}`),className:"w-full bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow text-left",children:[ae.jsxs("div",{className:"flex items-start justify-between mb-3",children:[ae.jsxs("div",{className:"flex-1",children:[ae.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[ae.jsx("span",{className:"text-sm font-mono text-gray-500",children:t.id.slice(0,8).toUpperCase()}),y(t.urgency)&&ae.jsxs("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${v(t.urgency)}`,children:[y(t.urgency)," ",null==(s=t.urgency)?void 0:s.toUpperCase()]})]}),ae.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:t.title}),ae.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[" ",t.location]})]}),ae.jsx(ct,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]}),ae.jsxs("div",{className:"flex items-center justify-between text-sm",children:[ae.jsxs("div",{className:"flex items-center gap-4 text-gray-500 dark:text-gray-400",children:[ae.jsxs("span",{children:["Assigned: ",b(t.created_at)]}),ae.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("assigned"===t.status?"bg-blue-100 text-blue-700 dark:bg-blue-900/20":"in_progress"===t.status?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20":"pending_approval"===t.status?"bg-green-100 text-green-700 dark:bg-green-900/20":"bg-gray-100 text-gray-700 dark:bg-gray-700"),children:t.status.replace("_"," ").toUpperCase()})]}),ae.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"View Details "})]})]},t.id)})})]})]})};delete Lt.Icon.Default.prototype._getIconUrl,Lt.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const jw=()=>{var e;const{id:t}=Et(),s=_t(),[r,n]=wt.useState(null),[a,i]=wt.useState([]),[o,l]=wt.useState(""),[c,d]=wt.useState(!0),[u,m]=wt.useState(!1),[h,p]=wt.useState(!1),[f,g]=wt.useState(null),[x,v]=wt.useState("");wt.useEffect(()=>{t&&(y(),b())},[t]);const y=()=>ne(void 0,null,function*(){try{const{data:e,error:s}=yield el.from("issues").select("*").eq("id",t).single();if(s)throw s;n(e)}catch(e){}finally{d(!1)}}),b=()=>ne(void 0,null,function*(){try{const{data:e,error:s}=yield el.from("issue_internal_notes").select("\n          *,\n          user_profiles!issue_internal_notes_official_id_fkey(full_name)\n        ").eq("issue_id",t).order("created_at",{ascending:!1});if(s)throw s;i(e||[])}catch(e){}}),w=e=>ne(void 0,null,function*(){var t;if(r){m(!0);try{const{error:s}=yield el.from("issues").update({status:e,updated_at:(new Date).toISOString()}).eq("id",r.id);if(s)throw s;const a={in_progress:"marked this issue as In Progress",resolved:"marked this issue as Resolved",pending_approval:"submitted this issue for approval",closed:"closed this issue",reported:"reopened this issue"};yield el.from("issue_internal_notes").insert({issue_id:r.id,official_id:null==(t=(yield el.auth.getUser()).data.user)?void 0:t.id,note:a[e]||`Status changed to ${e}`}),n(Y(G({},r),{status:e})),b(),alert(`Issue status updated to ${e.replace("_"," ").toUpperCase()}`)}catch(s){alert("Failed to update status. Please try again.")}finally{m(!1)}}});return c?ae.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),ae.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading issue details..."})]})}):r?ae.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[ae.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-10",children:ae.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[ae.jsxs("button",{onClick:()=>s("/official/dashboard"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-2",children:[ae.jsx(Ye,{className:"w-5 h-5"}),ae.jsx("span",{children:"Back to Dashboard"})]}),ae.jsx("div",{className:"flex items-center justify-between",children:ae.jsxs("div",{children:[ae.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[ae.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Issue #",r.id.slice(0,8).toUpperCase()]}),ae.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${(e=>{switch(e){case"critical":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"high":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";default:return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400"}})(r.urgency)}`,children:(null==(e=r.urgency)?void 0:e.toUpperCase())||"NORMAL"})]}),ae.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.category,"  Reported ",new Date(r.created_at).toLocaleDateString()]})]})})]})}),ae.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:ae.jsxs("div",{className:"space-y-6",children:[ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[ae.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"The Problem"}),ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{children:[ae.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:r.title}),ae.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:r.description})]}),r.image&&ae.jsxs("div",{children:[ae.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'"Before" Photo (from Citizen):'}),ae.jsx("img",{src:r.image,alt:"Issue",className:"w-full max-w-2xl rounded-lg shadow-md"})]}),ae.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[ae.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:'"After" Photo (Resolution Proof):'}),r.after_image?ae.jsxs("div",{children:[ae.jsx("img",{src:r.after_image,alt:"Resolved Issue",className:"w-full max-w-2xl rounded-lg shadow-md mb-2"}),ae.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:" Resolution photo uploaded"})]}):ae.jsxs("div",{className:"space-y-4",children:[x?ae.jsxs("div",{className:"relative",children:[ae.jsx("img",{src:x,alt:"Preview",className:"w-full max-w-2xl rounded-lg shadow-md"}),ae.jsx("button",{onClick:()=>{g(null),v("")},className:"absolute top-2 right-2 px-3 py-1 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700",children:"Remove"})]}):ae.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-8 text-center",children:[ae.jsx(Ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),ae.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Upload a photo showing the resolved issue"}),ae.jsxs("label",{className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium cursor-pointer",children:[ae.jsx(Ue,{className:"w-5 h-5"}),"Choose Photo",ae.jsx("input",{type:"file",accept:"image/*",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s){if(s.size>5242880)return void alert("Image size must be less than 5MB");g(s),v(URL.createObjectURL(s))}},className:"hidden"})]}),ae.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Maximum file size: 5MB"})]}),f&&ae.jsx("button",{onClick:()=>ne(void 0,null,function*(){if(f&&r){p(!0);try{const{data:{user:e}}=yield el.auth.getUser();if(!e)throw new Error("Not authenticated");const t=new FileReader;t.onloadend=()=>ne(void 0,null,function*(){try{const n=t.result,{data:a,error:i}=yield el.from("issues").select("*").eq("id",r.id).single();if(i)throw new Error("Could not fetch issue details");const o={status:"resolved"};if(!("after_image"in a))throw new Error("Database not configured. Please run: ALTER TABLE issues ADD COLUMN after_image TEXT;");o.after_image=n,"completed_at"in a&&(o.completed_at=(new Date).toISOString()),"updated_at"in a&&(o.updated_at=(new Date).toISOString());const{error:l,data:c}=yield el.from("issues").update(o).eq("id",r.id).select();if(l)throw new Error(`Update failed: ${l.message}`);try{yield el.from("issue_internal_notes").insert({issue_id:r.id,official_id:e.id,note:"Uploaded after photo showing resolved issue."})}catch(s){}yield y(),g(null),v(""),alert(" After photo uploaded successfully! Issue marked as resolved."),p(!1)}catch(Aw){alert(" Failed to upload photo: "+(Aw.message||"Unknown error. Check console for details.")),p(!1)}}),t.onerror=()=>{alert(" Failed to read image file"),p(!1)},t.readAsDataURL(f)}catch(Aw){alert(" Failed to upload photo: "+(Aw.message||"Unknown error")),p(!1)}}}),disabled:h,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:h?ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Uploading..."]}):ae.jsxs(ae.Fragment,{children:[ae.jsx(le,{className:"w-5 h-5"}),"Upload After Photo"]})})]})]})]})]}),ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[ae.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Location & Path"}),ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{className:"flex items-start gap-2",children:[ae.jsx(oe,{className:"w-5 h-5 text-gray-500 mt-0.5"}),ae.jsxs("div",{children:[ae.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r.location}),r.latitude&&r.longitude&&ae.jsxs("p",{className:"text-sm text-gray-500",children:[r.latitude.toFixed(6),", ",r.longitude.toFixed(6)]})]})]}),r.latitude&&r.longitude&&ae.jsx("div",{className:"h-64 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700",children:ae.jsxs($t,{center:[r.latitude,r.longitude],zoom:15,style:{height:"100%",width:"100%"},children:[ae.jsx(zt,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'}),ae.jsx(Ut,{position:[r.latitude,r.longitude],children:ae.jsx(Vt,{children:r.title})})]})}),ae.jsxs("div",{className:"space-y-3",children:[ae.jsxs("button",{onClick:()=>{if((null==r?void 0:r.latitude)&&(null==r?void 0:r.longitude))if(navigator.geolocation)navigator.geolocation.getCurrentPosition(e=>{const t=`https://www.google.com/maps/dir/?api=1&origin=${e.coords.latitude},${e.coords.longitude}&destination=${r.latitude},${r.longitude}&travelmode=driving`;window.open(t,"_blank")},e=>{const t=`https://www.google.com/maps/dir/?api=1&destination=${r.latitude},${r.longitude}&travelmode=driving`;window.open(t,"_blank"),alert(" Tip: Allow location access for automatic route from your current location, or Google Maps will ask for your location.")},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0});else{const e=`https://www.google.com/maps/dir/?api=1&destination=${r.latitude},${r.longitude}&travelmode=driving`;window.open(e,"_blank"),alert(" Your browser doesn't support location services. Google Maps will ask for your location.")}else alert(" Location coordinates not available for this issue")},className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all shadow-lg hover:shadow-xl font-semibold text-lg group",children:[ae.jsx(de,{className:"w-6 h-6 group-hover:rotate-12 transition-transform"}),ae.jsx("span",{children:"GET DIRECTIONS IN GOOGLE MAPS"})]}),ae.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[ae.jsxs("button",{onClick:()=>ne(void 0,null,function*(){if(!(null==r?void 0:r.latitude)||!(null==r?void 0:r.longitude))return void alert(" Location coordinates not available for this issue");const e=`https://www.google.com/maps/dir/?api=1&destination=${r.latitude},${r.longitude}&travelmode=driving`,t=`https://www.google.com/maps?q=${r.latitude},${r.longitude}`;try{if(navigator.clipboard&&navigator.clipboard.writeText){yield navigator.clipboard.writeText(e);const s=document.createElement("div");s.style.cssText="\n          position: fixed;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          background: white;\n          padding: 24px;\n          border-radius: 12px;\n          box-shadow: 0 10px 40px rgba(0,0,0,0.3);\n          z-index: 10000;\n          max-width: 500px;\n          width: 90%;\n        ",s.innerHTML=`\n          <div style="text-align: center;">\n            <div style="font-size: 48px; margin-bottom: 16px;"></div>\n            <h3 style="margin: 0 0 16px 0; color: #10b981; font-size: 20px; font-weight: 600;">Link Copied!</h3>\n            <p style="margin: 0 0 16px 0; color: #6b7280; font-size: 14px;">The directions link has been copied to your clipboard.</p>\n            <div style="background: #f3f4f6; padding: 12px; border-radius: 8px; margin-bottom: 16px; text-align: left;">\n              <p style="margin: 0 0 8px 0; font-size: 12px; color: #6b7280; font-weight: 600;"> View Location:</p>\n              <p style="margin: 0 0 12px 0; font-size: 11px; color: #374151; word-break: break-all;">${t}</p>\n              <p style="margin: 0 0 8px 0; font-size: 12px; color: #6b7280; font-weight: 600;"> Get Directions:</p>\n              <p style="margin: 0; font-size: 11px; color: #374151; word-break: break-all;">${e}</p>\n            </div>\n            <button onclick="this.parentElement.parentElement.remove()" style="\n              background: #3b82f6;\n              color: white;\n              border: none;\n              padding: 10px 24px;\n              border-radius: 8px;\n              font-size: 14px;\n              font-weight: 600;\n              cursor: pointer;\n            ">Got it!</button>\n          </div>\n        `,document.body.appendChild(s),setTimeout(()=>{s.parentElement&&s.remove()},1e4)}else{const s=document.createElement("textarea");s.value=e,s.style.position="fixed",s.style.left="-999999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy"),alert(` Link copied!\n\n View: ${t}\n\n Directions: ${e}`)}catch(Aw){prompt("Copy this directions link:",e)}document.body.removeChild(s)}}catch(Aw){prompt("Copy this directions link:",e)}}),className:"flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium border-2 border-gray-200 dark:border-gray-600",children:[ae.jsx(yt,{className:"w-5 h-5"}),ae.jsx("span",{children:"Copy Link"})]}),ae.jsxs("button",{onClick:()=>{if((null==r?void 0:r.latitude)&&(null==r?void 0:r.longitude)){const e=`https://www.google.com/maps/search/?api=1&query=${r.latitude},${r.longitude}`;window.open(e,"_blank")}},className:"flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium border-2 border-gray-200 dark:border-gray-600",children:[ae.jsx(oe,{className:"w-5 h-5"}),ae.jsx("span",{children:"View on Map"})]})]}),ae.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:ae.jsxs("div",{className:"flex items-start gap-3",children:[ae.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-800 rounded-full flex items-center justify-center",children:ae.jsx("span",{className:"text-blue-600 dark:text-blue-300 text-lg",children:""})}),ae.jsxs("div",{className:"flex-1",children:[ae.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Navigation Tips:"}),ae.jsxs("ul",{className:"text-xs text-blue-800 dark:text-blue-200 space-y-1",children:[ae.jsx("li",{children:' Click "Get Directions" to open Google Maps with turn-by-turn navigation'}),ae.jsx("li",{children:" Allow location access for automatic route from your current position"}),ae.jsx("li",{children:' Use "Copy Link" to share the location with your team'}),ae.jsx("li",{children:" The map above shows the exact issue location"})]})]})]})})]})]})]}),ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[ae.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Status & Action"}),ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[ae.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Current Status:"}),ae.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:r.status.replace("_"," ").toUpperCase()})]}),ae.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[ae.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Update Issue Status"}),ae.jsxs("select",{value:r.status,onChange:e=>w(e.target.value),disabled:u,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[ae.jsx("option",{value:"reported",children:" Reported"}),ae.jsx("option",{value:"assigned",children:" Assigned"}),ae.jsx("option",{value:"in_progress",children:" In Progress"}),ae.jsx("option",{value:"resolved",children:" Resolved"}),ae.jsx("option",{value:"pending_approval",children:" Pending Approval"}),ae.jsx("option",{value:"closed",children:" Closed"})]}),ae.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Current status: ",ae.jsx("span",{className:"font-semibold",children:r.status.replace("_"," ").toUpperCase()})]})]}),ae.jsxs("div",{className:"grid grid-cols-2 gap-3",children:["in_progress"!==r.status&&ae.jsxs("button",{onClick:()=>w("in_progress"),disabled:u,className:"flex items-center justify-center gap-2 px-4 py-3 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium disabled:opacity-50",children:[ae.jsx(qe,{className:"w-5 h-5"}),"In Progress"]}),"resolved"!==r.status&&ae.jsxs("button",{onClick:()=>{r&&s(`/official/issue/${r.id}/upload-resolution`)},className:"flex items-center justify-center gap-2 px-4 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[ae.jsx(le,{className:"w-5 h-5"}),"Mark Resolved"]})]}),ae.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[ae.jsxs("button",{onClick:()=>{var e;return null==(e=document.getElementById("note-input"))?void 0:e.focus()},className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium mb-4",children:[ae.jsx(Re,{className:"w-5 h-5"}),"ADD INTERNAL NOTE"]}),ae.jsxs("div",{className:"space-y-3",children:[ae.jsx("textarea",{id:"note-input",value:o,onChange:e=>l(e.target.value),placeholder:"e.g., Dispatched Crew A at 10:30 AM. ETA 2 hours...",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-none",rows:3}),ae.jsx("button",{onClick:()=>ne(void 0,null,function*(){if(o.trim()&&r)try{const{data:{user:e}}=yield el.auth.getUser(),{error:t}=yield el.from("issue_internal_notes").insert({issue_id:r.id,official_id:null==e?void 0:e.id,note:o.trim()});if(t)throw t;l(""),b()}catch(e){alert("Failed to add note. Please try again.")}}),disabled:!o.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Note"})]})]}),a.length>0&&ae.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-4",children:[ae.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white mb-3",children:"Internal Notes History"}),ae.jsx("div",{className:"space-y-3",children:a.map(e=>ae.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[ae.jsx("p",{className:"text-gray-900 dark:text-white mb-2",children:e.note}),ae.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.official_name||"Official","  ",new Date(e.created_at).toLocaleString()]})]},e.id))})]})]})]})]})})]}):ae.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx(ct,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),ae.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Issue Not Found"}),ae.jsx("button",{onClick:()=>s("/official/dashboard"),className:"text-blue-600 hover:text-blue-700",children:" Back to Dashboard"})]})})},Nw=()=>{const{id:e}=Et(),t=_t(),s=wt.useRef(null),[r,n]=wt.useState(null),[a,i]=wt.useState(null),[o,l]=wt.useState(""),[c,d]=wt.useState(""),[u,m]=wt.useState(!0),[h,p]=wt.useState(!1),[f,g]=wt.useState("");wt.useEffect(()=>{e&&x()},[e]);const x=()=>ne(void 0,null,function*(){try{const{data:s,error:r}=yield el.from("issues").select("*").eq("id",e).single();if(r)throw r;if("in_progress"!==s.status)return void t(`/official/issue/${e}`);n(s)}catch(s){g("Failed to load issue details")}finally{m(!1)}});return u?ae.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),ae.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading..."})]})}):r?ae.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[ae.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:ae.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[ae.jsxs("button",{onClick:()=>t(`/official/issue/${e}`),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-2",children:[ae.jsx(Ye,{className:"w-5 h-5"}),ae.jsx("span",{children:"Back to Issue"})]}),ae.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Complete Job #",r.id.slice(0,8).toUpperCase()]})]})}),ae.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:ae.jsxs("form",{onSubmit:e=>ne(void 0,null,function*(){if(e.preventDefault(),a){if(r){p(!0),g("");try{const{data:{user:e}}=yield el.auth.getUser();if(!e)throw new Error("Not authenticated");const s=a.name.split(".").pop(),n=`issue-resolutions/${`${r.id}-after-${Date.now()}.${s}`}`,{error:i}=yield el.storage.from("issue-images").upload(n,a);if(i)throw i;const{data:{publicUrl:o}}=el.storage.from("issue-images").getPublicUrl(n),{error:l}=yield el.from("issues").update({after_image:o,status:"pending_approval",completed_at:(new Date).toISOString(),updated_at:(new Date).toISOString()}).eq("id",r.id);if(l)throw l;c.trim()&&(yield el.from("issue_internal_notes").insert({issue_id:r.id,official_id:e.id,note:`Resolution Note: ${c.trim()}`})),yield el.from("issue_internal_notes").insert({issue_id:r.id,official_id:e.id,note:"Issue marked as resolved and submitted for admin approval with after photo."}),t("/official/dashboard",{state:{message:"Issue successfully submitted for approval!"}})}catch(Aw){g(Aw.message||"Failed to submit resolution. Please try again.")}finally{p(!1)}}}else g('Please upload an "after" photo')}),className:"space-y-6",children:[ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[ae.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:'"Before" (For Reference)'}),r.image?ae.jsx("img",{src:r.image,alt:"Before",className:"w-full max-w-2xl rounded-lg shadow-md"}):ae.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No before image available"})]}),ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[ae.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:['"After" (Required) ',ae.jsx("span",{className:"text-red-500",children:"*"})]}),ae.jsx("div",{className:"space-y-4",children:o?ae.jsxs("div",{className:"relative",children:[ae.jsx("img",{src:o,alt:"After",className:"w-full max-w-2xl rounded-lg shadow-md"}),ae.jsx("button",{type:"button",onClick:()=>{i(null),l("")},className:"absolute top-2 right-2 px-3 py-1 bg-red-600 text-white rounded-lg text-sm hover:bg-red-700",children:"Remove"})]}):ae.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-12 text-center",children:[ae.jsx(Ue,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),ae.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Upload a photo of the resolved issue"}),ae.jsxs("button",{type:"button",onClick:()=>{var e;return null==(e=s.current)?void 0:e.click()},className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:[ae.jsx(it,{className:"w-5 h-5"}),"UPLOAD 'AFTER' PHOTO"]}),ae.jsx("input",{ref:s,type:"file",accept:"image/*",onChange:e=>{var t;const s=null==(t=e.target.files)?void 0:t[0];if(s){if(s.size>5242880)return void g("Image size must be less than 5MB");i(s),l(URL.createObjectURL(s)),g("")}},className:"hidden"}),ae.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Maximum file size: 5MB"})]})})]}),ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[ae.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Resolution Notes (Optional)"}),ae.jsx("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"e.g., Resolved by Crew A. Used 3 bags of asphalt. Road is clear.",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white resize-none",rows:4})]}),f&&ae.jsxs("div",{className:"flex items-start gap-2 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[ae.jsx(ce,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),ae.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:f})]}),ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[ae.jsx("button",{type:"submit",disabled:h||!a,className:"w-full flex items-center justify-center gap-2 px-6 py-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed",children:h?ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Submitting..."]}):ae.jsxs(ae.Fragment,{children:[ae.jsx(le,{className:"w-6 h-6"}),"SUBMIT FOR FINAL APPROVAL"]})}),ae.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 text-center mt-3",children:'This will move the issue to "Pending Approval" and notify the admin'})]})]})})]}):ae.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx(ce,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),ae.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Issue Not Found"}),ae.jsx("button",{onClick:()=>t("/official/dashboard"),className:"text-blue-600 hover:text-blue-700",children:" Back to Dashboard"})]})})},kw=()=>{const e=_t(),[t,s]=wt.useState(null),[r,n]=wt.useState(!0),[a,i]=wt.useState(!1),[o,l]=wt.useState({newPassword:"",confirmPassword:""}),[c,d]=wt.useState(""),[u,m]=wt.useState(!1);wt.useEffect(()=>{h()},[]);const h=()=>ne(void 0,null,function*(){try{const{data:{user:t}}=yield el.auth.getUser();if(!t)return void e("/official/login");const{data:r}=yield el.from("user_profiles").select("*").eq("id",t.id).single();r&&s(r)}catch(t){}finally{n(!1)}});return r?ae.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),ae.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading profile..."})]})}):ae.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[ae.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:ae.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[ae.jsxs("button",{onClick:()=>e("/official/dashboard"),className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-2",children:[ae.jsx(Ye,{className:"w-5 h-5"}),ae.jsx("span",{children:"Back to Dashboard"})]}),ae.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"My Profile"})]})}),ae.jsx("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:ae.jsxs("div",{className:"space-y-6",children:[ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8",children:[ae.jsxs("div",{className:"flex flex-col items-center mb-8",children:[ae.jsx("div",{className:"w-24 h-24 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mb-4",children:ae.jsx(ue,{className:"w-12 h-12 text-blue-600 dark:text-blue-400"})}),ae.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-1",children:null==t?void 0:t.full_name}),ae.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Department Official"})]}),ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[ae.jsx(ue,{className:"w-5 h-5 text-gray-500 mt-0.5"}),ae.jsxs("div",{className:"flex-1",children:[ae.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Name"}),ae.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:null==t?void 0:t.full_name})]})]}),(null==t?void 0:t.employee_id)&&ae.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[ae.jsx(ft,{className:"w-5 h-5 text-gray-500 mt-0.5"}),ae.jsxs("div",{className:"flex-1",children:[ae.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Employee ID"}),ae.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.employee_id})]})]}),(null==t?void 0:t.department)&&ae.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[ae.jsx(gt,{className:"w-5 h-5 text-gray-500 mt-0.5"}),ae.jsxs("div",{className:"flex-1",children:[ae.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Department"}),ae.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.department})]})]}),ae.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[ae.jsx(he,{className:"w-5 h-5 text-gray-500 mt-0.5"}),ae.jsxs("div",{className:"flex-1",children:[ae.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),ae.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:null==t?void 0:t.email})]})]})]})]}),ae.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[ae.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Security"}),a?ae.jsxs("form",{onSubmit:e=>ne(void 0,null,function*(){if(e.preventDefault(),d(""),m(!1),o.newPassword.length<6)d("Password must be at least 6 characters long");else if(o.newPassword===o.confirmPassword)try{const{error:e}=yield el.auth.updateUser({password:o.newPassword});if(e)throw e;m(!0),l({newPassword:"",confirmPassword:""}),i(!1),setTimeout(()=>m(!1),3e3)}catch(t){d(t.message||"Failed to change password")}else d("Passwords do not match")}),className:"space-y-4",children:[ae.jsxs("div",{children:[ae.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),ae.jsx("input",{type:"password",value:o.newPassword,onChange:e=>l(Y(G({},o),{newPassword:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,minLength:6})]}),ae.jsxs("div",{children:[ae.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),ae.jsx("input",{type:"password",value:o.confirmPassword,onChange:e=>l(Y(G({},o),{confirmPassword:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",required:!0,minLength:6})]}),c&&ae.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c}),ae.jsxs("div",{className:"flex gap-3",children:[ae.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Update Password"}),ae.jsx("button",{type:"button",onClick:()=>{i(!1),l({newPassword:"",confirmPassword:""}),d("")},className:"px-6 py-2 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"})]})]}):ae.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-6 py-3 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors font-medium",children:[ae.jsx(pe,{className:"w-5 h-5"}),"Change Password"]}),u&&ae.jsx("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:ae.jsx("p",{className:"text-green-800 dark:text-green-300 font-medium",children:" Password changed successfully"})})]}),ae.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:ae.jsxs("button",{onClick:()=>ne(void 0,null,function*(){yield el.auth.signOut(),e("/official/login")}),className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:[ae.jsx(Ce,{className:"w-5 h-5"}),"Logout"]})})]})})]})},_w=new Qo,Cw=({children:e})=>{const{currentUser:t,isNewUser:s}=ol();return t?s?ae.jsx(Dt,{to:"/onboarding",replace:!0}):ae.jsx(ae.Fragment,{children:e}):ae.jsx(Dt,{to:"/",replace:!0})},Sw=({children:e})=>{const{currentUser:t,isNewUser:s}=ol();return t?s?ae.jsx(ae.Fragment,{children:e}):ae.jsx(Dt,{to:"/dashboard",replace:!0}):ae.jsx(Dt,{to:"/",replace:!0})},Ew=()=>{const{currentUser:e,isNewUser:t,loading:s}=ol();return s?ae.jsx(hl,{fullScreen:!0,message:"Loading your dashboard..."}):e&&!t?ae.jsx(Dt,{to:"/dashboard",replace:!0}):e&&t?ae.jsx(Dt,{to:"/onboarding",replace:!0}):ae.jsx(bp,{})},Tw=({children:e})=>ae.jsx(ml,{children:e}),Pw=()=>{const{loading:e}=ol(),{showLocationModal:t,setShowLocationModal:s,updateUserLocation:r}=dl(),[n,a]=jt.useState(!1);jt.useEffect(()=>{const t=setTimeout(()=>{e&&a(!0)},15e3);return()=>clearTimeout(t)},[e]);return e&&n?ae.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx(hl,{}),ae.jsx("p",{className:"mt-4 text-gray-600",children:"Taking longer than expected..."}),ae.jsx("button",{onClick:()=>window.location.href="/",className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Go to Home Page"})]})}):ae.jsxs(Tt,{children:[ae.jsxs(Pt,{children:[ae.jsx(Rt,{path:"/",element:ae.jsx(Tw,{children:ae.jsx(Gd,{})})}),ae.jsx(Rt,{path:"/home",element:ae.jsx(Tw,{children:ae.jsx(Ew,{})})}),ae.jsx(Rt,{path:"/dashboard",element:ae.jsx(Tw,{children:ae.jsx(Cw,{children:ae.jsx(Jf,{})})})}),ae.jsx(Rt,{path:"/issues",element:ae.jsx(Tw,{children:ae.jsx(ng,{})})}),ae.jsx(Rt,{path:"/issues/:id",element:ae.jsx(Tw,{children:ae.jsx(cg,{})})}),ae.jsx(Rt,{path:"/issues/report",element:ae.jsx(Tw,{children:ae.jsx(Cw,{children:ae.jsx(eb,{})})})}),ae.jsx(Rt,{path:"/profile",element:ae.jsx(Tw,{children:ae.jsx(Cw,{children:ae.jsx(zy,{})})})}),ae.jsx(Rt,{path:"/onboarding",element:ae.jsx(Tw,{children:ae.jsx(Sw,{children:ae.jsx(sb,{})})})}),ae.jsx(Rt,{path:"/events",element:ae.jsx(Tw,{children:ae.jsx(Uy,{})})}),ae.jsx(Rt,{path:"/events/:id",element:ae.jsx(Tw,{children:ae.jsx(rb,{})})}),ae.jsx(Rt,{path:"/authority-dashboard",element:ae.jsx(Tw,{children:ae.jsx(xw,{})})}),ae.jsx(Rt,{path:"/auth/callback",element:ae.jsx(Tw,{children:ae.jsx(vw,{})})}),ae.jsx(Rt,{path:"/official/login",element:ae.jsx(Tw,{children:ae.jsx(yw,{})})}),ae.jsx(Rt,{path:"/official/onboarding",element:ae.jsx(Tw,{children:ae.jsx(bw,{})})}),ae.jsx(Rt,{path:"/official/dashboard",element:ae.jsx(Tw,{children:ae.jsx(ww,{})})}),ae.jsx(Rt,{path:"/official/issue/:id",element:ae.jsx(Tw,{children:ae.jsx(jw,{})})}),ae.jsx(Rt,{path:"/official/issue/:id/upload-resolution",element:ae.jsx(Tw,{children:ae.jsx(Nw,{})})}),ae.jsx(Rt,{path:"/official/profile",element:ae.jsx(Tw,{children:ae.jsx(kw,{})})}),ae.jsx(Rt,{path:"*",element:ae.jsx(Tw,{children:ae.jsx(Vy,{})})})]}),ae.jsx(zd,{isOpen:t,onClose:()=>s(!1),onLocationGranted:e=>{r(Y(G({},e),{timestamp:Date.now()}))}})]})},Rw=()=>{const[e,t]=jt.useState(null);return jt.useEffect(()=>{try{localStorage.setItem("test","test"),localStorage.removeItem("test")}catch(e){t("Browser storage not available")}},[]),e?ae.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:ae.jsxs("div",{className:"text-center p-8",children:[ae.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"App Error"}),ae.jsx("p",{className:"text-gray-600 mb-4",children:e}),ae.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Reload Page"})]})}):ae.jsx(ml,{children:ae.jsx(Jo,{client:_w,children:ae.jsx(fo,{children:ae.jsx(ll,{children:ae.jsxs(ul,{children:[ae.jsx(kn,{}),ae.jsx(qn,{}),ae.jsx(Pw,{})]})})})})})},Dw=document.getElementById("root");Dw&&$(Dw).render(ae.jsx(Rw,{}));export{Ud as C,Wd as a,el as s};
