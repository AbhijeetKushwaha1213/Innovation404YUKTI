import{j as e,m as t,C as s,l as a,e as i}from"./ui-vendor-Dv70Or3Y.js";import{r}from"./react-vendor-DV-ZlTgS.js";import{s as l,C as n,a as o}from"./index-DQs_GA-2.js";import"./supabase-vendor-DFQREE2C.js";import"./maps-vendor-tunuPykp.js";const c=({issue:l,index:c})=>{const[d,x]=r.useState(50),[m,h]=r.useState(!1),u=()=>h(!0),p=()=>h(!1),g=l.description.length>80?l.description.substring(0,80)+"...":l.description;return e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*c},children:e.jsx(n,{className:"bg-white/10 backdrop-blur-md border-white/20 shadow-xl hover:shadow-2xl transition-all duration-300 overflow-hidden group",children:e.jsxs(o,{className:"p-0",children:[e.jsxs("div",{className:"relative h-48 overflow-hidden cursor-ew-resize select-none",onMouseDown:u,onMouseUp:p,onMouseLeave:p,onMouseMove:e=>{if(!m)return;const t=e.currentTarget.getBoundingClientRect(),s=(e.clientX-t.left)/t.width*100;x(Math.max(0,Math.min(100,s)))},onTouchStart:u,onTouchEnd:p,onTouchMove:e=>{if(!m)return;const t=e.currentTarget.getBoundingClientRect(),s=(e.touches[0].clientX-t.left)/t.width*100;x(Math.max(0,Math.min(100,s)))},children:[e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:l.after_image,alt:"After",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-white px-2 py-1 rounded text-xs font-semibold shadow-lg",children:"AFTER"})]}),e.jsxs("div",{className:"absolute inset-0",style:{clipPath:`inset(0 ${100-d}% 0 0)`},children:[e.jsx("img",{src:l.image,alt:"Before",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white px-2 py-1 rounded text-xs font-semibold shadow-lg",children:"BEFORE"})]}),e.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white shadow-lg",style:{left:`${d}%`},children:e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-white rounded-full shadow-xl flex items-center justify-center",children:e.jsxs("div",{className:"flex gap-0.5",children:[e.jsx(a,{className:"w-3 h-3 text-gray-700"}),e.jsx(i,{className:"w-3 h-3 text-gray-700"})]})})}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300 flex items-center justify-center",children:e.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-white/90 px-3 py-1 rounded-full text-xs font-medium text-gray-800",children:"← Drag to compare →"})})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-white/5 to-white/10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(s,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-green-300 text-xs font-semibold",children:"RESOLVED"})]}),e.jsx("h3",{className:"text-white font-bold text-sm mb-2 line-clamp-2",children:l.title}),e.jsx("div",{className:"inline-block bg-blue-500/20 border border-blue-500/30 text-blue-300 px-2 py-0.5 rounded text-xs font-medium mb-2",children:l.category}),e.jsx("p",{className:"text-white/80 text-xs leading-relaxed mb-3 line-clamp-2",children:g}),e.jsxs("div",{className:"flex items-center gap-1 text-white/60 text-xs",children:[e.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("span",{className:"truncate",children:l.location})]})]})]})})})},d=()=>{const[a,i]=r.useState([]),[n,o]=r.useState(!0);r.useEffect(()=>{d()},[]);const d=()=>{return e=void 0,t=null,s=function*(){try{const{data:e,error:t}=yield l.from("issues").select("*").eq("status","resolved").not("after_image","is",null).not("image","is",null).order("updated_at",{ascending:!1}).limit(6);if(t)throw t;e&&e.length>0&&i(e)}catch(e){}finally{o(!1)}},new Promise((a,i)=>{var r=e=>{try{n(s.next(e))}catch(t){i(t)}},l=e=>{try{n(s.throw(e))}catch(t){i(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,l);n((s=s.apply(e,t)).next())});var e,t,s};return n?e.jsx("section",{className:"py-12 px-6 bg-black/20 backdrop-blur-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-white/80",children:"Loading success stories..."})]})})}):0===a.length?null:e.jsx("section",{className:"py-16 px-6 bg-black/20 backdrop-blur-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(s,{className:"w-8 h-8 text-green-400"}),e.jsx("h2",{className:"text-4xl font-bold text-white drop-shadow-lg",children:"Explore Our Impact"})]}),e.jsx("p",{className:"text-white/90 text-lg max-w-2xl mx-auto",children:"See how UrbanCare is transforming communities"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((t,s)=>e.jsx(c,{issue:t,index:s},t.id))}),a.length>=6&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.6},className:"text-center mt-8",children:e.jsx("button",{className:"bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white px-6 py-3 rounded-full border border-white/30 transition-all duration-300 hover:scale-105 shadow-lg",children:"View More Success Stories →"})})]})})};export{d as default};
